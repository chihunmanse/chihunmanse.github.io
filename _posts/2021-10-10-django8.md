---
layout: single
tags: 
 - django

toc: true
toc_sticky: true

title: "[django] 예외처리"
---

{% raw %}

### ObjectDoesNotExist vs DoesNotExist 

- ObjectDoesNotExist : 모든 모델 객체에 적용 가능 (import 필요)

  ```python
  from django.core.exceptions import ObjectDoesNotExist
  ```

- DoesNotExist : 특정 모델을 지정해서 사용, 특정 모델이 존재하지 않을 때만 예외를 포착하기 때문에 명시적인 예외처리를 할 수 있다.

###  MultipleObjectsReturned

objects.get()은 쿼리셋이 아니라 하나의 객체를 불러오기 때문에  하나가 아닌 둘 이상의 객체가 담기면 에러를 발생시킨다. 이때 MultipleObjectsReturned로 예외처리를 해줄 수 있다.  

### FieldError

모델 필드에 문제가있는 경우 예외가 발생

- 필터 매개변수에서 키워드를 분석할 수 없을 때.
- 쿼리 매개변수의 키워드에서 필드를 결정할 수 없을 때.
- 지정된 필드에 조인이 허용되지 않을 때.
- 필드 이름이 잘못되었을 때.
- 쿼리에 잘못된 order_by 인수가 포함되어 있을 때.



## python 내장 예외

### **AttributeError**

속성(attribute) 이름이 잘못됐거나 없는 속성을 가져오려 하면 속성 오류(AttributeError)가 발생

인스턴스의 속성 이름이 잘못됐을 때

```python
>>> [1, 2, 3].indax(2)
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
AttributeError: 'list' object has no attribute 'indax'
```

모듈의 속성 이름이 잘못됐을 때

```python
>>> import math
>>> math.phi
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
AttributeError: module 'math' has no attribute 'phi'
```

인스턴스에 없는 속성을 호출했을 때

```python
>>> year_str = '2016'
>>> year_int = int(year_str)
>>> year_int.replace('6', '7')
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
AttributeError: 'int' object has no attribute 'replace'
```

### TypeError

자료형이 맞지 않거나 함수 호출 규약을 틀리면 타입 오류(TypeError)가 발생

자료형에 맞지 않는 연산을 시도했을 때

```python
>>> round('10')
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
TypeError: type str doesn't define __round__ method
```

```python
>>> if 20 in 2007:
...     print('it has 20!')
...
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
TypeError: argument of type 'int' is not iterable
```

실행인자 개수를 잘못 넣었을 때

```python
>>> round()
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
TypeError: Required argument 'number' (pos 1) not found
```

```python
>>> round(10, 2, 3)
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
TypeError: round() takes at most 2 arguments (3 given)
```

### ValueError

자료형은 맞는데 값이 틀리면 값 오류(ValueError)가 발생

```python
>>> int('안녕')
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '안녕'
```

### UnboundLocalError

변수의 스코프(scope)가 적절하지 않을 때 발생하는 오류

```python
>>> name = '파이썬'
>>> def rename(new_name):
...     print('name:', name)
...     name = new_name
...
>>> rename('신난다')
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "<stdin>", line 2, in rename
UnboundLocalError: local variable 'name' referenced before assignment
```

함수 안에서는 함수 밖에 있는 변수에 값을 할당할 수 없음

```python
>>> name = '파이썬'
>>> def rename(new_name):
...     print('name:', name)
...     name = new_name
...
>>> name = rename('신난다')


>>> name = '파이썬'
>>> def rename(new_name):
...     global name
...     print('name:', name)
...     name = new_name
...
>>> rename('신난다')
```

### KeyError와 IndexError

컨테이너에 참조가 없을 때 발생하는 오류

```python
>>> d = {'a': 100}
>>> d['b']
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
KeyError: 'b'
```

```python
>>> a = [1, 2, 3]
>>> a[10]
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
IndexError: list index out of range
```

### SyntaxError

문법(Syntax)에 맞지 않는 코드를 썼을 때 발생하는 오류

```python
>>> print('Hello, World!)
    File "<stdin>", line 1
        print('Hello, World!)                        
SyntaxError: EOL while scanning string literal
```

사용할 수 없는 이름(예약어)을 변수 이름으로 썼을 때 

and, break, class, continue, elif, else, except, finally, for, global, if, import, not, or, return, try, while

```python
>>> True = 20
    File "<stdin>", line 1
SyntaxError: can't assign to keyword
```

사용할 수 없는 이름(리터럴)을 변수 이름으로 썼을 때 

```python
>>> 1 = 'text'
    File "<stdin>", line 1
SyntaxError: can't assign to literal
```


참조 : https://thebook.io/006888/


{% endraw %}
