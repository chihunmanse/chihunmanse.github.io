<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">chihunmanse | chihunmanse</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://chihunmanse.github.io/img/m.png"><meta data-rh="true" name="twitter:image" content="https://chihunmanse.github.io/img/m.png"><meta data-rh="true" property="og:url" content="https://chihunmanse.github.io/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="chihunmanse | chihunmanse"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://chihunmanse.github.io/"><link data-rh="true" rel="alternate" href="https://chihunmanse.github.io/" hreflang="en"><link data-rh="true" rel="alternate" href="https://chihunmanse.github.io/" hreflang="x-default"><script data-rh="true">function maybeInsertBanner(){window.__DOCUSAURUS_INSERT_BASEURL_BANNER&&insertBanner()}function insertBanner(){var n=document.getElementById("docusaurus-base-url-issue-banner-container");if(n){n.innerHTML='\n<div id="docusaurus-base-url-issue-banner" style="border: thick solid red; background-color: rgb(255, 230, 179); margin: 20px; padding: 20px; font-size: 20px;">\n   <p style="font-weight: bold; font-size: 30px;">Your Docusaurus site did not load properly.</p>\n   <p>A very common reason is a wrong site <a href="https://docusaurus.io/docs/docusaurus.config.js/#baseUrl" style="font-weight: bold;">baseUrl configuration</a>.</p>\n   <p>Current configured baseUrl = <span style="font-weight: bold; color: red;">/</span>  (default value)</p>\n   <p>We suggest trying baseUrl = <span id="docusaurus-base-url-issue-banner-suggestion-container" style="font-weight: bold; color: green;"></span></p>\n</div>\n';var e=document.getElementById("docusaurus-base-url-issue-banner-suggestion-container"),s=window.location.pathname,r="/"===s.substr(-1)?s:s+"/";e.innerHTML=r}}window.__DOCUSAURUS_INSERT_BASEURL_BANNER=!0,document.addEventListener("DOMContentLoaded",maybeInsertBanner)</script><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="chihunmanse RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="chihunmanse Atom Feed"><link rel="stylesheet" href="/assets/css/styles.2979c94b.css">
<link rel="preload" href="/assets/js/runtime~main.3961068c.js" as="script">
<link rel="preload" href="/assets/js/main.2eac6f50.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div id="docusaurus-base-url-issue-banner-container"></div><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/dog.png" alt="logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/dog.png" alt="logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Chihunmanse</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/tags">Category</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tags/back-end">BackEnd</a></li><li><a class="dropdown__link" href="/tags/block-chain">BlockChain</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/tags">Tag</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tags">All Tags</a></li><li><a class="dropdown__link" href="/tags/solidity">Solidity</a></li><li><a class="dropdown__link" href="/tags/nest-js">NestJS</a></li><li><a class="dropdown__link" href="/tags/docker">Docker</a></li><li><a class="dropdown__link" href="/tags/kubernetes">Kubernetes</a></li></ul></div><a class="navbar__item navbar__link" href="/archive">Archive</a><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/11/10/backend/kubernetes/garbage-collection">워커노드 디스크 관리하기</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/11/03/backend/docker/docker-basic">Docker 기본 개념 정리</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2023/09/10/blockchain/contract-errorhandling">Contract Error Handling</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/06/20/blockchain/upgradeable-contract2">Upgradeable Contract 2 - ERC1967, TransparentProxy, UUPS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/06/10/blockchain/upgradeable-contract1">Upgradeable Contract 1 - Migration, DelegateCall</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2022/02/10/backend/project/nestJS">NestJS &amp; MongoDB Project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/11/20/backend/project/preonboarding-8percent">원티드 프리온보딩 8percent 기업과제</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/11/10/backend/project/kream-clone">Kream Clone Project</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/2021/11/10/backend/project/lush-clone">Lush Clone Project</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2023/11/10/backend/kubernetes/garbage-collection">워커노드 디스크 관리하기</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-10T00:00:00.000Z" itemprop="datePublished">November 10, 2023</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>최근 젠킨스 서버의 디스크 용량이 그동안 쌓인 도커 이미지 및 빌드 캐시 데이터들로 가득 차서 젠킨스에서 빌드가 제대로 되지 않는 문제를 겪었다.</p><p>해당 문제를 겪고 나서, 현재 사용 중인 텐센트 클라우드 TKE 클러스터의 워커 노드들의 디스크 용량도 확인해보았다. </p><p>현재 서비스에서는 2개의 워커노드를 사용하고 있는데 그 중 하나의 노드 디스크 용량이 80% 가량 차 있었다. 자세한 사용량을 파악하기 위해 해당 워커노드에 접속하여 <code>df-h</code> 명령어를 실행해보았다.</p><p><img loading="lazy" src="https://p.ipic.vip/d1deym.png" alt="dfh" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/back-end">BackEnd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/kubernetes">Kubernetes</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 워커노드 디스크 관리하기" href="/2023/11/10/backend/kubernetes/garbage-collection"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2023/11/03/backend/docker/docker-basic">Docker 기본 개념 정리</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-11-03T00:00:00.000Z" itemprop="datePublished">November 3, 2023</time> · <!-- -->23 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>해당 글은 <a href="https://www.udemy.com/course/docker-kubernetes-2022/" target="_blank" rel="noopener noreferrer">Docker &amp; Kubernetes : 실전 가이드</a> 강의 내용을 토대로 작성되었습니다.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="이미지--컨테이너">이미지 &amp; 컨테이너<a href="#이미지--컨테이너" class="hash-link" aria-label="Direct link to 이미지 &amp; 컨테이너" title="Direct link to 이미지 &amp; 컨테이너">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="도커의-기본-개념">도커의 기본 개념<a href="#도커의-기본-개념" class="hash-link" aria-label="Direct link to 도커의 기본 개념" title="Direct link to 도커의 기본 개념">​</a></h3><p><strong>도커는 컨테이너를 생성하고 관리하기 위한 도구이다.</strong></p><ul><li>컨테이너란 표준화된 소프트웨어 유닛으로, 코드를 실행하는데 필요한 종속성과 도구과 포함된 코드 패키지이다.</li><li>동일한 컨테이너는 어디서 누가 실행하든, 동일한 어플리케이션의 실행 및 동작을 생성한다.</li><li>예를 들어, Node.js 어플리케이션을 구축하는 경우 도커로 빌드된 컨테이너에는 어플리케이션 소스 코드 뿐만 아니라 Node.js 런타임, 그리고 코드를 실행하는 데 필요한 기타 도구가 포함될 수 있다.
동일한 Node.js 코드와 도구를 사용하는 컨테이너는 항상 동일한 버전을 사용하는 Node.js 런타임에서 동일한 동작과 결과를 제공한다는 이점이 있다.</li><li>도커는 이러한 컨테이너의 생성 및 관리를 간소화한다.</li></ul><p><strong>도커(컨테이너)가 필요한 이유</strong> </p><ul><li>프로덕션 환경과 똑같은 개발 환경에서 새로 개발되는 코드를 빌드하고 테스트할 수 있다.</li><li>함께 개발하는 팀의 멤버들이 같은 프로젝트를 개발할 때 동일환 환경을 보장할 수 있다.</li><li>작업 중인 프로젝트가 여러 개인 경우 프로젝트 별 개발 환경을 간편하게 분리할 수 있다.</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/back-end">BackEnd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/docker">Docker</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Docker 기본 개념 정리" href="/2023/11/03/backend/docker/docker-basic"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2023/09/10/blockchain/contract-errorhandling">Contract Error Handling</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-10T00:00:00.000Z" itemprop="datePublished">September 10, 2023</time> · <!-- -->47 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>먼저 Solidity 안에서 에러를 처리할 수 있는 방식들에 대해 알아보자. Solidity에서 예외를 발생시키는 방식은 크게 <strong>Assert</strong>, <strong>Require</strong>, <strong>Revert</strong>가 있다.</p><p>세 가지 방식 모두 현재 호출 및 모든 하위 호출에서 일어났던 상태 변경 사항들을 취소하고 호출자에게 오류 플래그를 지정한다.</p><p>만약 하위 호출에서 예외가 발생하면, <code>try/catch</code> 명령문 안에서 발견되지 않는 한 자동으로 &quot;버블업&quot; (예외가 다시 발생)된다. 이러한 규칙에 대한 예외는 <code>call</code>, <code>delegatecall</code>, <code>staticcall</code> 과 같은 low-level 함수들이나 <code>send</code> 함수를 사용하여 호출 했을 때 뿐이다. 이 경우에는 하위 호출에서 예외가 발생하더라도 예외가 상위 호출로 전달되는 대신 첫번 째 return 값으로 false가 전달된다.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="assert">Assert<a href="#assert" class="hash-link" aria-label="Direct link to Assert" title="Direct link to Assert">​</a></h2><p>Assert는 컨트랙트의 내부 오류를 테스트하고 불변성을 확인하는 데에만 사용해야 한다. 즉 외부의 입력에 따라 어떤 경우에는 Assert 오류가 발생하고 어떤 경우에는 오류가 발생하지 않는 일이 생기면 안 된다. 이런 일이 발생한다는 것은 컨트랙트에 수정해야 할 버그가 존재한다는 뜻이다.</p><p>또 한 가지 유의해야할 점은, <code>assert</code> 함수를 통해 생성되는 오류는 Solidity 버전에 따라 차이가 있다는 것이다.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="08-버전-이전">0.8 버전 이전<a href="#08-버전-이전" class="hash-link" aria-label="Direct link to 0.8 버전 이전" title="Direct link to 0.8 버전 이전">​</a></h3><p>0.4.22 ~ 0.7.x 버전에서는 <code>assert</code> 함수를 사용했을 때 사용되는 opcode는 <code>INVALID</code> 이다.</p><p><a href="https://www.evm.codes/#fe?fork=shanghai" target="_blank" rel="noopener noreferrer">INVALID opcode</a>에 대한 정보를 살펴보자.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">스택 매개변수가 0,0인 REVERT (Byzantium 포크 이후)와 동일 하지만 현재 컨텍스트에 제공된 모든 가스가 소비된다는 점만 다릅니다.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>즉 Solidity 0.8 버전 이전에는 <code>assert</code> 함수를 통해 오류가 생성되더라도 트랜잭션의 가스가 환불되지 않는다. 또 <code>REVERT(0,0)</code> 와 동일하기 때문에 컨트랙트 외부에서는 어떤 이유로 해당 오류가 발생했는지 유추할 수 있는 데이터가 존재하지 않는다.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="08-버전-이후">0.8 버전 이후<a href="#08-버전-이후" class="hash-link" aria-label="Direct link to 0.8 버전 이후" title="Direct link to 0.8 버전 이후">​</a></h3><p>0.8 버전부터 <code>assert</code> 함수를 사용했을 때 사용되는 opcode가 <code>REVERT</code> 로 변경된다.</p><p><a href="https://www.evm.codes/#fd?fork=shanghai" target="_blank" rel="noopener noreferrer">REVERT opcode</a>에 대한 정보를 살펴보자.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">현재 컨텍스트 실행을 중지하고 상태 변경을 되돌리고(상태 변경 opcode 목록은 STATICCALL 참조) 사용하지 않은 가스를 호출자에게 반환합니다.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>INVALID</code> opcode와 크게 다른 지점은 사용하지 않은 가스를 호출자에게 반환한다는 점이다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">호출 컨텍스트의 반환 데이터는 이 컨텍스트의 지정된 메모리 청크로 설정됩니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">스택 입력</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">offset: 메모리의 바이트 오프셋(바이트). 호출 컨텍스트의 반환 데이터입니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">size: 복사할 바이트 크기(반환 데이터의 크기).</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>또 위의 설명처럼 반환 데이터를 지정할 수 있기 때문에, 기존 <code>INVALID</code> opcode에서와 달리 컨트랙트 내부에서 어떤 이유로 오류가 발생했는지에 대한 데이터를 제공할 수 있다.</p><p>그렇다면 0.8 버전 이후에 <code>assert</code> 함수를 사용했을 때 오류에 대한 정보는 어떤 규칙으로 제공되는지를 살펴보자.</p><p><code>assert</code> 함수는 <code>Panic(uint256)</code> 데이터 유형의 오류를 생성한다. 즉 함수 식별자를 지정하는 방식과 동일하게 &quot;Panic(uint256)&quot;을 keccak256으로 해싱한 데이터의 4바이트 값과 uint256 인자 값을 통해 오류의 정보를 제공한다.</p><p>Solidity 공식 문서를 살펴보면, <code>Panic(uint256)</code> 오류는 컨트랙트 작성자가 <code>assert</code> 함수를 통해 임의로 발생시키는 경우 외에도 미리 지정된 특정 상황들에서 컴파일러에 의해 동일한 오류가 생성될 수 있다고 설명하고 있다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0x00: 일반 컴파일러 삽입 패닉에 사용됩니다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x01: assert(false)로 평가되는 인수로 호출하는 경우.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x11: 산술 연산 결과 .unchecked { ... } 블록 외부에서 언더플로 또는 오버플로가 발생하는 경우.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x12: 0으로 나누거나 modulo하는 경우 (e.g. 5 / 0 or 23 % 0).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x21: 너무 크거나 음수인 값을 열거형으로 변환하는 경우.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x22: 잘못 인코딩된 스토리지 바이트 배열에 액세스하는 경우.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x31: 빈 배열에 .pop()을 호출하는 경우.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x32: 배열 및 배열 슬라이스, bytesN의 범위를 벗어난 인덱스 혹은 음수 인덱스에 액세스하는 경우 (i.e. x[i] where i &gt;= x.length or i &lt; 0).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x41: 너무 많은 메모리를 할당하거나 너무 큰 배열을 생성한 경우.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0x51: 유효하지 않은 내부 함수 호출.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>즉, 언더플로 또는 오버플로가 발생했을 때는 <code>Panic(uint256)</code> 의 인자값으로 &#x27;0x11&#x27;이 사용되며 빈 배열에 <code>.pop()</code> 을 호출한 경우에는 인자값으로 &#x27;0x31&#x27;이 사용되는 식이다. 만약 작성자가 직접 <code>assert</code> 함수 식을 사용한 경우에는 &#x27;0x01&#x27;이 인자값으로 사용된다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/block-chain">BlockChain</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/solidity">Solidity</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Contract Error Handling" href="/2023/09/10/blockchain/contract-errorhandling"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022/06/20/blockchain/upgradeable-contract2">Upgradeable Contract 2 - ERC1967, TransparentProxy, UUPS</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-06-20T00:00:00.000Z" itemprop="datePublished">June 20, 2022</time> · <!-- -->49 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><a href="/2022/06/10/blockchain/upgradeable-contract1">이전 글</a>에 이어서 프록시 패턴에 대해 본격적으로 살펴보려고 한다.</p><p>프록시 패턴은 기본적으로 delegatecall 과 fallback 함수의 조합을 통해 구현된다.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="fallback-함수">fallback 함수<a href="#fallback-함수" class="hash-link" aria-label="Direct link to fallback 함수" title="Direct link to fallback 함수">​</a></h3><p>fallback 함수란 컨트랙트에 존재하지 않는 함수가 호출되었을 경우 대신해서 호출되는 함수이다.</p><p>0.6 이전의 fallback 함수</p><div class="language-sol codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sol codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">external</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">payable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>0.6 이후의 fallback 함수</p><ul><li>fallback : 호출된 함수가 컨트랙트에 존재하지 않을때 작동하는 함수</li><li>receive : calldata 없이 컨트랙트에 이더가 전송됐을 때 작동하는 함수</li></ul><div class="language-sol codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sol codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">fallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">external</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">payable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">receive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">external</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">payable</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/block-chain">BlockChain</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/solidity">Solidity</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Upgradeable Contract 2 - ERC1967, TransparentProxy, UUPS" href="/2022/06/20/blockchain/upgradeable-contract2"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022/06/10/blockchain/upgradeable-contract1">Upgradeable Contract 1 - Migration, DelegateCall</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-06-10T00:00:00.000Z" itemprop="datePublished">June 10, 2022</time> · <!-- -->24 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="스마트-계약의-불변성">스마트 계약의 불변성<a href="#스마트-계약의-불변성" class="hash-link" aria-label="Direct link to 스마트 계약의 불변성" title="Direct link to 스마트 계약의 불변성">​</a></h2><p>컨트랙트를 개발하면서 가장 까다롭게 느껴지는 지점중에 하나는 배포 이후에는 코드를 수정할 수 없다는 것이다.</p><p>스마트 컨트랙트는 이름 그대로 디지털화된 계약서의 역할을 하기 때문에 계약의 불변성은 기술적인 관점과 별개로, Dapp 생태계에서 중요한 특성 중에 하나이다.</p><p>만약 컨트랙트의 코드를 마음대로 수정할 수 있어서, 어플리케이션의 주요한 비즈니스 로직들이 관리자에 의해 언제든지 바뀔 수 있다면 사용자들은 그 코드를 하나의 계약으로 신임할 수 없을 것이다. 따라서 스마트계약의 불변성은 web3의 탈중앙성과 직접적으로 연결되어있다.</p><p>하지만 컨트랙트를 작성하는 개발자 입장에서는, 배포 이후에 코드를 수정할 수 없다는 사실은 장점보다는 커다란 제약이자 부담감으로 다가온다.</p><p>혹 사소한 실수가 담긴 코드를 배포하지는 않았을 지, 그 사소한 실수가 주요한 보안 문제를 야기시키지는 않을 지, 솔리디티 및 이더리움에 대한 부족한 이해도로 비효율적인 코드를 작성하지는 않았을 지, 후에 더 나은 방식을 익히더라도 리팩토링을 진행할 수 없다는 점까지. 컨트랙트를 배포하는 순간에 그 코드가 모든 방면에서 완결되었는 지를 검증해야 한다는 압박감은 상당하다.</p><p>개발자 뿐만 아니라, 스마트 컨트랙트를 기반으로 한 프로젝트를 기획 및 운영하는 관리자의 입장도 비슷할 것이다. 기존 기능에 대한 기획이 변경되었거나, 유저들의 반응 및 기타 상황에 따라 재빠르고 유연한 변화를 필요로 할 때도 컨트랙트의 불변성은 커다란 제약이기 때문이다.</p><p>이러한 불편함들을 많은 사람들이 비슷하게 느끼고 있었을 것이기에, 업그레이드 가능한 컨트랙트에 대한 다양한 기술적 방식과 접근법이 꾸준히 나오고 있는 것 같다. 이 글에서는 그런 다양한 방식 중에 몇 가지를 학습하고 적용해보면서 익힌 내용들과 소박한 느낀점들을 정리해보려고 한다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/block-chain">BlockChain</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/solidity">Solidity</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Upgradeable Contract 1 - Migration, DelegateCall" href="/2022/06/10/blockchain/upgradeable-contract1"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2022/02/10/backend/project/nestJS">NestJS &amp; MongoDB Project</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-02-10T00:00:00.000Z" itemprop="datePublished">February 10, 2022</time> · <!-- -->19 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><strong>기간: 2022-01-17 ~ 2022-01-28</strong></p><p><strong>Stack: TypeScript, NestJS, MongoDB, Mongoose</strong></p><p><strong><a href="https://github.com/chihunmanse/nest-api" target="_blank" rel="noopener noreferrer">Github 링크</a></strong></p><p><strong><a href="https://documenter.getpostman.com/view/17663987/UVe9QUfM" target="_blank" rel="noopener noreferrer">API Document</a></strong></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="endpoint">ENDPOINT<a href="#endpoint" class="hash-link" aria-label="Direct link to ENDPOINT" title="Direct link to ENDPOINT">​</a></h2><ul><li>POST /users/signup (회원가입)</li><li>POST /users/signin (로그인)</li><li>GET /users/reviews (작성 리뷰 조회)</li><li>GET /categories (전체 카테고리 조회)</li><li>GET /categories/:id (카테고리 조회)</li><li>GET /products (전체 상품 조회)</li><li>GET /products/keyword (카테고리&amp;검색어로 상품 조회)</li><li>GET /products/:id (상품 조회)</li><li>POST /products/like (상품 좋아요)</li><li>GET /products/like (좋아요한 상품 조회)</li><li>POST /carts (장바구니 아이템 추가)</li><li>PATCH /carts (장바구니 아이템 수정)</li><li>DELETE /carts (장바구니 아이템 삭제)</li><li>GET /carts (장바구니 조회)</li><li>POST /products/reviews/:productId (리뷰 생성)</li><li>GET /products/reviews/:productId (리뷰 조회)</li><li>PUT /products/reviews/:reviewId (리뷰 수정)</li><li>DELETE /products/reviews/:reviewId (리뷰 삭제)</li><li>POST /image/upload (이미지 파일 업로드)</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/back-end">BackEnd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/nest-js">NestJS</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about NestJS &amp; MongoDB Project" href="/2022/02/10/backend/project/nestJS"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2021/11/20/backend/project/preonboarding-8percent">원티드 프리온보딩 8percent 기업과제</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-20T00:00:00.000Z" itemprop="datePublished">November 20, 2021</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><strong>기간: 2021-11-12 ~ 2021-11-13</strong></p><p><strong>Stack: Python, Django, SQLite, DjangoORM</strong></p><p><strong><a href="https://github.com/chihunmanse/PreonBoarding4-8percent" target="_blank" rel="noopener noreferrer">Github 링크</a></strong></p><ul><li>거래내역이 1억건을 넘어갈 때에 대한 고려<ul><li>이를 고려하여 어떤 설계를 추가하셨는지를 README에 남겨 주세요.</li></ul></li></ul><p>8퍼센트의 과제에서는 하나의 테이블에 대량의 데이터가 집중적으로 쌓인 경우에 대한 대비를 어떻게 할 수 있는지가 주된 포인트였던 것 같다.</p><p>하나의 테이블에 대량의 데이터가 집중적으로 쌓이면 성능이 저하될 확률이 높다. </p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="indexing">Indexing<a href="#indexing" class="hash-link" aria-label="Direct link to Indexing" title="Direct link to Indexing">​</a></h2><p>인덱스란?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">인덱스(Index)는 데이터베이스 분야에 있어서 테이블에 대한 동작의 속도를 높여주는 자료 구조를 일컫는다. 인덱스는 테이블 내의 1개의 컬럼, 혹은 여러 개의 컬럼을 이용하여 생성될 수 있다. 고속의 검색 동작뿐만 아니라 레코드 접근과 관련 효율적인 순서 매김 동작에 대한 기초를 제공한다. 인덱스를 저장하는 데 필요한 디스크 공간은 보통 테이블을 저장하는 데 필요한 디스크 공간보다 작다. (왜냐하면 보통 인덱스는 키-필드만 갖고 있고, 테이블의 다른 세부 항목들은 갖고 있지 않기 때문이다.) 관계형 데이터베이스에서는 인덱스는 테이블 부분에 대한 하나의 사본이다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">인덱스는 고유 제약 조건을 실현하기 위해서도 사용된다. 고유 인덱스는 중복된 항목이 등록되는 것을 금지하기 때문에 인덱스의 대상인 테이블에서 고유성이 보장된다.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="https://media.vlpt.us/images/bsjp400/post/f0417278-986a-4599-99b1-5468abf2610d/image.png" class="img_ev3q"></p><p>History 값을 위의 테이블에서 조회한다고 했을 때 어느 위치에 해당 데이터가 존재하는지 모르기 때문에 테이블 전체를 조회해야한다. 이 때 데이터의 수가 많은 테이블이라고 했을 때 조회가 잦은 테이블이라고 하면 서비스의 성능이 떨어지게 된다.</p><p>왼쪽과 같이 인덱스를 따로 생성하여 필요한 데이터를 빠르게 찾을 수 있게 함으로써 조회할 때 성능을 향상시킬 수 있다.</p><p>하지만 데이터의 추가, 수정, 삭제가 잦은 테이블이라면 인덱스를 사용했을 때 오히려 성능이 저하될 수 있다.</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/61782539/141482697-6ff59772-441a-4a9a-95f3-7734127ceb64.png" class="img_ev3q"></p><p>거래내역을 조회할 때 거래내역 테이블에 대한 검색 속도를 높이기 위해 필터링과 정렬에 자주 사용되는 created_at 필드에 index가 생성되도록 하였다.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="partitioning">Partitioning<a href="#partitioning" class="hash-link" aria-label="Direct link to Partitioning" title="Direct link to Partitioning">​</a></h2><p>이번 과제에서 대량의 데이터가 쌓인 테이블에 대한 관리를 고민하면서 파티셔닝에 대한 개념을 처음 접하게 되었다. </p><p>파티셔닝이란?</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">논리적인 데이터 element들을 다수의 entity로 쪼개는 행위를 뜻하는 일반적인 용어</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">즉 큰 table이나 index를, 관리하기 쉬운 partition이라는 작은 단위로 물리적으로 분할하는 것을 의미한다.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">물리적인 데이터 분할이 있더라도, DB에 접근하는 application의 입장에서는 이를 인식하지 못한다.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1억건이 넘는 거래내역을 거래기간에 따라 RANGE 파티션을 적용하여 여러개의 테이블로 나누어 저장하면, 논리적으로는 하나의 테이블처럼 보이지만 DBMS 내부적으로는 거래일자에 따라 각 파티션의 데이터를 조회하므로 만약 해당 거래기간이 속한 테이블에 데이터가 500만건이라고 하면 500만건의 데이터가 있는 테이블만 조회할 수 있게 된다. 또 데이터 보관주기를 관리할 때 보관기간이 지난 파티션 테이블만 삭제하면 되기 때문에 금융거래 내역을 관리하는데도 유용하게 사용될 수 있다.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/back-end">BackEnd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/django">Django</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 원티드 프리온보딩 8percent 기업과제" href="/2021/11/20/backend/project/preonboarding-8percent"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2021/11/10/backend/project/kream-clone">Kream Clone Project</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-10T00:00:00.000Z" itemprop="datePublished">November 10, 2021</time> · <!-- -->19 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><strong>기간: 2021-10-10 ~ 2021-10-29</strong></p><p><strong>Stack: Python, Django, MySQL, DjangoORM</strong></p><p><strong><a href="https://github.com/chihunmanse/KREAM-motive-Project" target="_blank" rel="noopener noreferrer">Github 링크</a></strong></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="modeling">Modeling<a href="#modeling" class="hash-link" aria-label="Direct link to Modeling" title="Direct link to Modeling">​</a></h2><p><img loading="lazy" src="https://user-images.githubusercontent.com/61782539/139529652-5d04aa32-b615-478e-87fe-b17693fc3b9c.png" alt="erd" class="img_ev3q"></p><p>필수로 구현하기로 한 기능들을 중심으로 모델링하였다. kream은 이용자들이 한정판 상품들을 서로 사고 팔고 할 수 있도록 매개해주는 사이트이다. 그 과정에서 이용자들이 원하는 가격에 물건을 사고 팔 수 있도록 구매가나 판매가를 제시하는 경매 시스템이 있다. 그리고 그 경매 시스템에 따라서 물건을 즉시 구매하고 즉시 판매할 수 있는 실제적인 가격이 결정된다.</p><p>상품의 사이즈별로 (실제 kream에는 여러 종류의 상품이 있기 때문에 옵션도 여러가지지만 프로젝트에서는 신발만 다루기로 기획했다.) 입찰이 생성된다.</p><p>kream에서 구매, 판매 계약(주문)은 거래하려는 상품에 입찰이 하나라도 걸려있을 때만 가능하다. 상품을 구매하려할 때는 해당 상품의 판매 입찰들중에 가장 낮은 가격으로 제시된 입찰가가 즉시 구매가로 결정되고 그 가격이 마음에 든다면 바로 거래할 수 있다. 반대로 상품을 판매할 때는 해당 상품의 구매 입찰들중에 가장 높은 가격으로 제시된 입찰가가 즉시 판매가로 결정된다. 따라서 주문은 즉시거래하는 유저와 해당 즉시거래가를 형성한 하나의 입찰이 만나서 이루어진다. 만약 주문 요청된 입찰의 포지션이 구매라면 판매자는 즉시판매가로 거래하는 유저가 될 것이고 구매자는 해당 입찰을 제시한 유저가 될 것이다.</p><p>이번 프로젝트에서는 경매 프로세스를 구현해보는 것에 중점을 두었기 때문에 결제는 유저의 포인트를 서로 주고 받는 것으로 간략하게 기획했다.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="end-point">End Point<a href="#end-point" class="hash-link" aria-label="Direct link to End Point" title="Direct link to End Point">​</a></h2><p>프로젝트에서 입찰, 주문 관련 API를 만드는 역할을 담당했다.</p><ul><li>POST /orders/bidding/{int:productsize_id}/{int:position_id} (입찰 생성)</li><li>GET /orders/bidding/{int:productsize_id}/{int:position_id} (입찰 조회 - 주문 페이지에서 즉시 거래가 조회)</li><li>POST /orders/{int:bidding_id} (주문 생성)</li><li>GET /orders/size-price/{int:product_id}/{int:position_id} (상품의 사이즈별 즉시 거래가 조회)</li><li>GET /orders/price/{int:product_id} (상품의 시세 조회)</li><li>GET /orders (주문, 입찰중인 내역 조회)</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/back-end">BackEnd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/django">Django</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Kream Clone Project" href="/2021/11/10/backend/project/kream-clone"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/2021/11/10/backend/project/lush-clone">Lush Clone Project</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-11-10T00:00:00.000Z" itemprop="datePublished">November 10, 2021</time> · <!-- -->14 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://p.ipic.vip/o1ih3g.png" alt="Chihun Park"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chihun Park</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><strong>기간: 2021-10-10 ~ 2021-10-29</strong></p><p><strong>Stack: Python, Django, MySQL, DjangoORM</strong></p><p><strong><a href="https://github.com/chihunmanse/LUSH-motive-Project" target="_blank" rel="noopener noreferrer">Github 링크</a></strong></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="end-point">End Point<a href="#end-point" class="hash-link" aria-label="Direct link to End Point" title="Direct link to End Point">​</a></h2><p>프로젝트에서 상품 목록 조회 API와 상품 상세 조회 API, 카테고리 정보 API, 장바구니 상품 추가, 수정, 삭제 API를 만드는 역할을 담당했다.</p><ul><li>GET/products (상품 목록/ 필터링, 솔팅)</li><li>GET/products/{int:product_id} (상품 상세)</li><li>GET/navigator/{int:category_id} (네비게이터)</li><li>GET/category (카테고리 리스트)</li><li>POST/carts (장바구니 생성)</li><li>GET/carts (장바구니 조회)</li><li>DEL/carts/{int:cart_id} (장바구니 삭제)</li><li>PATCH/carts/{int:cart_id} (장바구니 수정)</li></ul></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/back-end">BackEnd</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/django">Django</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Lush Clone Project" href="/2021/11/10/backend/project/lush-clone"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/tags">Tags</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/chihunmanse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.3961068c.js"></script>
<script src="/assets/js/main.2eac6f50.js"></script>
</body>
</html>