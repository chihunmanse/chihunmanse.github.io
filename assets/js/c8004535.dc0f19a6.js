"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[8363],{1470(e,n,t){t.d(n,{A:()=>I});var a=t(8168),l=t(6540),r=t(53),i=t(3104),u=t(6347),p=t(7485),o=t(1682),s=t(9466);function g(e){return function(e){return l.Children.map(e,e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}(e).map(({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a}))}function y(e){const{values:n,children:t}=e;return(0,l.useMemo)(()=>{const e=n??g(t);return function(e){const n=(0,o.X)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function d({queryString:e=!1,groupId:n}){const t=(0,u.W6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,p.aZ)(a),(0,l.useCallback)(e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})},[a,t])]}function c(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=y(e),[i,u]=(0,l.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r})),[p,o]=d({queryString:t,groupId:a}),[g,c]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,a]=(0,s.Dv)(n);return[t,(0,l.useCallback)(e=>{n&&a.set(e)},[n,a])]}({groupId:a}),N=(()=>{const e=p??g;return m({value:e,tabValues:r})?e:null})();(0,l.useLayoutEffect)(()=>{N&&u(N)},[N]);return{selectedValue:i,selectValue:(0,l.useCallback)(e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);u(e),o(e),c(e)},[o,c,r]),tabValues:r}}var N=t(2303);const v="tabList__CuJ",b="tabItem_LNqP";function h({className:e,block:n,selectedValue:t,selectValue:u,tabValues:p}){const o=[],{blockElementScrollPositionUntilNextRender:s}=(0,i.a_)(),g=e=>{const n=e.currentTarget,a=o.indexOf(n),l=p[a].value;l!==t&&(s(n),u(l))},y=e=>{let n=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return l.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e)},p.map(({value:e,label:n,attributes:i})=>l.createElement("li",(0,a.A)({role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,key:e,ref:e=>o.push(e),onKeyDown:y,onClick:g},i,{className:(0,r.A)("tabs__item",b,i?.className,{"tabs__item--active":t===e})}),n??e)))}function f({lazy:e,children:n,selectedValue:t}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===t);return e?(0,l.cloneElement)(e,{className:"margin-top--md"}):null}return l.createElement("div",{className:"margin-top--md"},a.map((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==t})))}function k(e){const n=c(e);return l.createElement("div",{className:(0,r.A)("tabs-container",v)},l.createElement(h,(0,a.A)({},e,n)),l.createElement(f,(0,a.A)({},e,n)))}function I(e){const n=(0,N.A)();return l.createElement(k,(0,a.A)({key:String(n)},e))}},5680(e,n,t){t.d(n,{xA:()=>s,yg:()=>m});var a=t(6540);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){l(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function u(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var p=a.createContext({}),o=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=o(e.components);return a.createElement(p.Provider,{value:n},e.children)},g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},y=a.forwardRef(function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),y=o(t),m=l,d=y["".concat(p,".").concat(m)]||y[m]||g[m]||r;return t?a.createElement(d,i(i({ref:n},s),{},{components:t})):a.createElement(d,i({ref:n},s))});function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=y;var u={};for(var p in n)hasOwnProperty.call(n,p)&&(u[p]=n[p]);u.originalType=e,u.mdxType="string"==typeof e?e:l,i[1]=u;for(var o=2;o<r;o++)i[o]=t[o];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}y.displayName="MDXCreateElement"},9365(e,n,t){t.d(n,{A:()=>i});var a=t(6540),l=t(53);const r="tabItem_Ymn6";function i({children:e,hidden:n,className:t}){return a.createElement("div",{role:"tabpanel",className:(0,l.A)(r,t),hidden:n},e)}},9513(e,n,t){t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>p,default:()=>m,frontMatter:()=>u,metadata:()=>o,toc:()=>g});var a=t(8168),l=(t(6540),t(5680)),r=t(1470),i=t(9365);const u={title:"Uniswap",description:"From Constant Product Formula to Concentrated Liquidity - core principles and code analysis of Uniswap",keywords:["Uniswap","AMM","DEX","DeFi","Constant Product","Concentrated Liquidity","LP","Ethereum"],tags:["DeFi","Ethereum","Solidity","Uniswap"],sidebar_position:1},p="Uniswap",o={unversionedId:"blockchain/defi/uniswap",id:"blockchain/defi/uniswap",title:"Uniswap",description:"From Constant Product Formula to Concentrated Liquidity - core principles and code analysis of Uniswap",source:"@site/docs/04-blockchain/04-defi/01-uniswap.mdx",sourceDirName:"04-blockchain/04-defi",slug:"/blockchain/defi/uniswap",permalink:"/blockchain/defi/uniswap",draft:!1,tags:[{label:"DeFi",permalink:"/tags/de-fi"},{label:"Ethereum",permalink:"/tags/ethereum"},{label:"Solidity",permalink:"/tags/solidity"},{label:"Uniswap",permalink:"/tags/uniswap"}],version:"current",sidebarPosition:1,frontMatter:{title:"Uniswap",description:"From Constant Product Formula to Concentrated Liquidity - core principles and code analysis of Uniswap",keywords:["Uniswap","AMM","DEX","DeFi","Constant Product","Concentrated Liquidity","LP","Ethereum"],tags:["DeFi","Ethereum","Solidity","Uniswap"],sidebar_position:1},sidebar:"docs",previous:{title:"DeFi",permalink:"/blockchain/defi/"},next:{title:"Cryptography",permalink:"/blockchain/cryptography/"}},s={},g=[{value:"AMM\uc774\ub780 \ubb34\uc5c7\uc778\uac00",id:"amm\uc774\ub780-\ubb34\uc5c7\uc778\uac00",level:2},{value:"Uniswap V2: Constant Product Formula",id:"uniswap-v2-constant-product-formula",level:2},{value:"x * y = k\uc758 \uc758\ubbf8",id:"x--y--k\uc758-\uc758\ubbf8",level:3},{value:"\uac00\uaca9 \uacb0\uc815",id:"\uac00\uaca9-\uacb0\uc815",level:3},{value:"\uc218\uc218\ub8cc \uad6c\uc870",id:"\uc218\uc218\ub8cc-\uad6c\uc870",level:3},{value:"\ucf54\ub4dc \ubd84\uc11d: getAmountOut",id:"\ucf54\ub4dc-\ubd84\uc11d-getamountout",level:3},{value:"\ucf54\ub4dc \ubd84\uc11d: swap \ud568\uc218",id:"\ucf54\ub4dc-\ubd84\uc11d-swap-\ud568\uc218",level:3},{value:"Optimistic Transfer \ud328\ud134",id:"optimistic-transfer-\ud328\ud134",level:4},{value:"K \uac80\uc99d\uacfc \uc218\uc218\ub8cc",id:"k-\uac80\uc99d\uacfc-\uc218\uc218\ub8cc",level:4},{value:"\uc785\ub825\ub7c9 \uc5ed\uc0b0",id:"\uc785\ub825\ub7c9-\uc5ed\uc0b0",level:4},{value:"LP \ud1a0\ud070: \uc720\ub3d9\uc131 \uc9c0\ubd84 \uc99d\uba85",id:"lp-\ud1a0\ud070-\uc720\ub3d9\uc131-\uc9c0\ubd84-\uc99d\uba85",level:3},{value:"\uc720\ub3d9\uc131 \uacf5\uae09 (mint)",id:"\uc720\ub3d9\uc131-\uacf5\uae09-mint",level:4},{value:"\uc720\ub3d9\uc131 \uc778\ucd9c (burn)",id:"\uc720\ub3d9\uc131-\uc778\ucd9c-burn",level:4},{value:"\uc218\uc218\ub8cc\ub294 \uc5b4\ub5bb\uac8c LP\uc5d0\uac8c \ub3cc\uc544\uac00\ub294\uac00",id:"\uc218\uc218\ub8cc\ub294-\uc5b4\ub5bb\uac8c-lp\uc5d0\uac8c-\ub3cc\uc544\uac00\ub294\uac00",level:4},{value:"V2\uc758 \ud55c\uacc4: \uc790\ubcf8 \ube44\ud6a8\uc728\uc131",id:"v2\uc758-\ud55c\uacc4-\uc790\ubcf8-\ube44\ud6a8\uc728\uc131",level:2},{value:"\uc804 \ubc94\uc704 \uc720\ub3d9\uc131\uc758 \ubb38\uc81c",id:"\uc804-\ubc94\uc704-\uc720\ub3d9\uc131\uc758-\ubb38\uc81c",level:3},{value:"\ube44\uc601\uad6c\uc801 \uc190\uc2e4 (Impermanent Loss)",id:"\ube44\uc601\uad6c\uc801-\uc190\uc2e4-impermanent-loss",level:3},{value:"\uc218\uce58 \uc608\uc2dc",id:"\uc218\uce58-\uc608\uc2dc",level:4},{value:"Uniswap V3: Concentrated Liquidity",id:"uniswap-v3-concentrated-liquidity",level:2},{value:"\ud575\uc2ec \uc544\uc774\ub514\uc5b4",id:"\ud575\uc2ec-\uc544\uc774\ub514\uc5b4",level:3},{value:"\uc218\ud559\uc801 \uae30\ubc18: Virtual Liquidity",id:"\uc218\ud559\uc801-\uae30\ubc18-virtual-liquidity",level:3},{value:"Real vs Virtual Reserves",id:"real-vs-virtual-reserves",level:4},{value:"\ubc94\uc704 \uc774\ud0c8 \uc2dc \ub3d9\uc791",id:"\ubc94\uc704-\uc774\ud0c8-\uc2dc-\ub3d9\uc791",level:4},{value:"Tick \uc2dc\uc2a4\ud15c",id:"tick-\uc2dc\uc2a4\ud15c",level:3},{value:"Tick Spacing",id:"tick-spacing",level:4},{value:"Initialized Tick",id:"initialized-tick",level:4},{value:"sqrtPriceX96",id:"sqrtpricex96",level:3},{value:"\uc65c \uc81c\uacf1\uadfc\uc778\uac00?",id:"\uc65c-\uc81c\uacf1\uadfc\uc778\uac00",level:4},{value:"\uc65c 2^96\uc778\uac00?",id:"\uc65c-296\uc778\uac00",level:4},{value:"V3 \uc2a4\uc651 \uba54\ucee4\ub2c8\uc998",id:"v3-\uc2a4\uc651-\uba54\ucee4\ub2c8\uc998",level:3},{value:"\uc2a4\uc651 \ud750\ub984",id:"\uc2a4\uc651-\ud750\ub984",level:4},{value:"liquidity \ubcc0\uc218\uc758 \uc758\ubbf8",id:"liquidity-\ubcc0\uc218\uc758-\uc758\ubbf8",level:4},{value:"\ub2e8\uc77c Tick \ub0b4 \uc2a4\uc651 \uacc4\uc0b0",id:"\ub2e8\uc77c-tick-\ub0b4-\uc2a4\uc651-\uacc4\uc0b0",level:4},{value:"\ub2e4\uc911 \uc218\uc218\ub8cc \ud2f0\uc5b4",id:"\ub2e4\uc911-\uc218\uc218\ub8cc-\ud2f0\uc5b4",level:3},{value:"NFT \uae30\ubc18 \ud3ec\uc9c0\uc158",id:"nft-\uae30\ubc18-\ud3ec\uc9c0\uc158",level:3},{value:"V3 Pool \uad6c\uc870",id:"v3-pool-\uad6c\uc870",level:3},{value:"\ud14c\uc2a4\ud2b8",id:"\ud14c\uc2a4\ud2b8",level:2},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:2},{value:"\ucc38\uace0 \uc790\ub8cc",id:"\ucc38\uace0-\uc790\ub8cc",level:3}],y={toc:g};function m({components:e,...n}){return(0,l.yg)("wrapper",(0,a.A)({},y,n,{components:e,mdxType:"MDXLayout"}),(0,l.yg)("h1",{id:"uniswap"},"Uniswap"),(0,l.yg)("h2",{id:"amm\uc774\ub780-\ubb34\uc5c7\uc778\uac00"},"AMM\uc774\ub780 \ubb34\uc5c7\uc778\uac00"),(0,l.yg)("p",null,"\uc804\ud1b5\uc801\uc778 \uac70\ub798\uc18c\ub294 ",(0,l.yg)("strong",{parentName:"p"},"\uc624\ub354\ubd81(Order Book)")," \ubc29\uc2dd\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4. \ub9e4\uc218\uc790\uc640 \ub9e4\ub3c4\uc790\uac00 \uac01\uac01 \uc6d0\ud558\ub294 \uac00\uaca9\uacfc \uc218\ub7c9\uc744 \uc81c\uc2dc\ud558\uace0, \uac00\uaca9\uc774 \uc77c\uce58\ud558\uba74 \uac70\ub798\uac00 \uccb4\uacb0\ub41c\ub2e4. \uc774 \ubc29\uc2dd\uc740 \ub192\uc740 \uc720\ub3d9\uc131\uacfc \uc815\ubc00\ud55c \uac00\uaca9 \ubc1c\uacac\uc774 \uac00\ub2a5\ud558\uc9c0\ub9cc, \uc911\uc559\ud654\ub41c \ub9e4\uce6d \uc5d4\uc9c4\uc774 \ud544\uc694\ud558\uace0 \ucda9\ubd84\ud55c \uac70\ub798\ub7c9\uc774 \uc5c6\uc73c\uba74 \uc2a4\ud504\ub808\ub4dc\uac00 \ubc8c\uc5b4\uc9c4\ub2e4."),(0,l.yg)("p",null,"\ube14\ub85d\uccb4\uc778\uc5d0\uc11c \uc624\ub354\ubd81 \ubc29\uc2dd\uc744 \uad6c\ud604\ud558\uba74 \uba87 \uac00\uc9c0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c\ub2e4."),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"\uac00\uc2a4 \ube44\uc6a9"),": \uc8fc\ubb38 \uc0dd\uc131, \uc218\uc815, \ucde8\uc18c\ub9c8\ub2e4 \ud2b8\ub79c\uc7ad\uc158 \ube44\uc6a9\uc774 \ubc1c\uc0dd\ud55c\ub2e4."),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"\uc18d\ub3c4"),": \ube14\ub85d \uc0dd\uc131 \uc2dc\uac04(\uc774\ub354\ub9ac\uc6c0 \uae30\uc900 12\ucd08) \ub3d9\uc548 \uac00\uaca9\uc774 \ubcc0\ub3d9\ud558\uba74 \ubd88\ub9ac\ud55c \uccb4\uacb0\uc774 \uc77c\uc5b4\ub0a0 \uc218 \uc788\ub2e4."),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"\uc720\ub3d9\uc131 \ud30c\ud3b8\ud654"),": \ubaa8\ub4e0 \uac00\uaca9\ub300\uc5d0 \uc8fc\ubb38\uc774 \ubd84\uc0b0\ub418\uc5b4 \uc788\uc5b4\uc57c \uc6d0\ud65c\ud55c \uac70\ub798\uac00 \uac00\ub2a5\ud558\ub2e4.")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"AMM(Automated Market Maker)"),"\uc740 \uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \uc218\ud559 \uacf5\uc2dd\uc73c\ub85c \ud574\uacb0\ud55c\ub2e4. \uc624\ub354\ubd81 \ub300\uc2e0 ",(0,l.yg)("strong",{parentName:"p"},"\uc720\ub3d9\uc131 \ud480(Liquidity Pool)"),"\uc774\ub77c\ub294 \ud1a0\ud070 \uc800\uc7a5\uc18c\ub97c \ub450\uace0, \uc218\ud559 \uacf5\uc2dd\uc5d0 \ub530\ub77c \uc790\ub3d9\uc73c\ub85c \uac00\uaca9\uc744 \uacb0\uc815\ud55c\ub2e4. \uac70\ub798 \uc0c1\ub300\ubc29\uc774 \uc0ac\ub78c\uc774 \uc544\ub2c8\ub77c \uc2a4\ub9c8\ud2b8 \ucee8\ud2b8\ub799\ud2b8\uc774\ubbc0\ub85c, \uc5b8\uc81c\ub4e0 \uc989\uc2dc \uac70\ub798\uac00 \uac00\ub2a5\ud558\ub2e4."),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"\ud2b9\uc131"),(0,l.yg)("th",{parentName:"tr",align:null},"\uc624\ub354\ubd81"),(0,l.yg)("th",{parentName:"tr",align:null},"AMM"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\uac00\uaca9 \uacb0\uc815"),(0,l.yg)("td",{parentName:"tr",align:null},"\ub9e4\uc218/\ub9e4\ub3c4 \uc8fc\ubb38 \ub9e4\uce6d"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc218\ud559 \uacf5\uc2dd")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\uc720\ub3d9\uc131 \uc81c\uacf5"),(0,l.yg)("td",{parentName:"tr",align:null},"\ub9c8\ucf13 \uba54\uc774\ucee4"),(0,l.yg)("td",{parentName:"tr",align:null},"\ub204\uad6c\ub098 (LP)")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\uac70\ub798 \uc0c1\ub300\ubc29"),(0,l.yg)("td",{parentName:"tr",align:null},"\ub2e4\ub978 \ud2b8\ub808\uc774\ub354"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc2a4\ub9c8\ud2b8 \ucee8\ud2b8\ub799\ud2b8")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\ud56d\uc0c1 \uac70\ub798 \uac00\ub2a5"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc720\ub3d9\uc131\uc5d0 \uc758\uc874"),(0,l.yg)("td",{parentName:"tr",align:null},"\ud480\uc5d0 \ud1a0\ud070\uc774 \uc788\uc73c\uba74 \uac00\ub2a5")))),(0,l.yg)("p",null,"Uniswap\uc740 2018\ub144 V1 \ucd9c\uc2dc \uc774\ud6c4 AMM\uc758 \ud45c\uc900\uc744 \uc815\ub9bd\ud588\uace0, V2(2020)\uc640 V3(2021)\ub97c \uac70\uce58\uba70 DeFi \uc0dd\ud0dc\uacc4\uc758 \ud575\uc2ec \uc778\ud504\ub77c\ub85c \uc790\ub9ac\uc7a1\uc558\ub2e4."),(0,l.yg)("h2",{id:"uniswap-v2-constant-product-formula"},"Uniswap V2: Constant Product Formula"),(0,l.yg)("h3",{id:"x--y--k\uc758-\uc758\ubbf8"},"x * y = k\uc758 \uc758\ubbf8"),(0,l.yg)("p",null,"V2\uc758 \ud575\uc2ec\uc740 ",(0,l.yg)("strong",{parentName:"p"},"Constant Product Formula"),"\ub2e4. \ub450 \ud1a0\ud070 X\uc640 Y\uc758 \ub9ac\uc800\ube0c(reserve)\ub97c \uac01\uac01 x, y\ub77c \ud558\uba74, \uc774 \ub458\uc758 \uacf1 k\ub294 \ud56d\uc0c1 \uc77c\uc815\ud558\uac8c \uc720\uc9c0\ub41c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"x * y = k\n")),(0,l.yg)("p",null,"\uc608\ub97c \ub4e4\uc5b4 ETH/USDC \ud480\uc5d0 10 ETH\uc640 20,000 USDC\uac00 \uc788\ub2e4\uba74"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"k = 10 * 20,000 = 200,000\n")),(0,l.yg)("p",null,"\ub204\uad70\uac00 1 ETH\ub97c \ub123\uace0 USDC\ub97c \ubc1b\uc73c\ub824 \ud55c\ub2e4. \uc2a4\uc651 \ud6c4\uc5d0\ub3c4 k\ub294 200,000\uc73c\ub85c \uc720\uc9c0\ub418\uc5b4\uc57c \ud558\ubbc0\ub85c"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"(10 + 1) * y' = 200,000\ny' = 200,000 / 11 \u2248 18,181.8 USDC\n")),(0,l.yg)("p",null,"\ubc1b\uc744 \uc218 \uc788\ub294 USDC = 20,000 - 18,181.8 = 1,818.2 USDC"),(0,l.yg)("p",null,"\ub2e8\uc21c\ud788 20,000 / 10 = 2,000 USDC\uac00 \uc544\ub2cc \uc774\uc720\ub294 ",(0,l.yg)("strong",{parentName:"p"},"\uc2ac\ub9ac\ud53c\uc9c0(Slippage)")," \ub54c\ubb38\uc774\ub2e4. \uc2a4\uc651\uc774 \ud480\uc758 \ube44\uc728\uc744 \ubc14\uafb8\uae30 \ub54c\ubb38\uc5d0, \uac70\ub798 \uaddc\ubaa8\uac00 \ud074\uc218\ub85d \ubd88\ub9ac\ud55c \uac00\uaca9\uc744 \ubc1b\uac8c \ub41c\ub2e4. \uc774\uac83\uc774 AMM\uc758 \ubcf8\uc9c8\uc801\uc778 \ud2b9\uc131\uc774\ub2e4."),(0,l.yg)("h3",{id:"\uac00\uaca9-\uacb0\uc815"},"\uac00\uaca9 \uacb0\uc815"),(0,l.yg)("p",null,"\ud604\uc7ac \uac00\uaca9\uc740 \ub450 \ub9ac\uc800\ube0c\uc758 \ube44\uc728\uc774\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"ETH \uac00\uaca9 (USDC \uae30\uc900) = reserveUSDC / reserveETH = 20,000 / 10 = 2,000 USDC\n")),(0,l.yg)("p",null,"\uc2a4\uc651\uc774 \uc77c\uc5b4\ub098\uba74 \ub9ac\uc800\ube0c \ube44\uc728\uc774 \ubc14\ub00c\uace0, \ub530\ub77c\uc11c \uac00\uaca9\ub3c4 \ubc14\ub010\ub2e4. 1 ETH\ub97c \ub123\uc740 \ud6c4"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"\uc0c8 \uac00\uaca9 = 18,181.8 / 11 \u2248 1,653 USDC\n")),(0,l.yg)("p",null,"\uac00\uaca9\uc774 2,000\uc5d0\uc11c 1,653\uc73c\ub85c \ub5a8\uc5b4\uc84c\ub2e4. \uc774\ucc98\ub7fc AMM\uc5d0\uc11c \uac70\ub798 \uc790\uccb4\uac00 \uac00\uaca9\uc744 \uc6c0\uc9c1\uc778\ub2e4."),(0,l.yg)("h3",{id:"\uc218\uc218\ub8cc-\uad6c\uc870"},"\uc218\uc218\ub8cc \uad6c\uc870"),(0,l.yg)("p",null,"V2\ub294 \ubaa8\ub4e0 \uc2a4\uc651\uc5d0 ",(0,l.yg)("strong",{parentName:"p"},"0.3% \uc218\uc218\ub8cc"),"\ub97c \ubd80\uacfc\ud55c\ub2e4. \uc774 \uc218\uc218\ub8cc\ub294 LP(Liquidity Provider)\uc5d0\uac8c \ub3cc\uc544\uac04\ub2e4."),(0,l.yg)("p",null,"\uc2e4\uc81c \uacf5\uc2dd\uc5d0\uc11c\ub294 \uc785\ub825 \uae08\uc561\uc758 0.3%\ub97c \uc81c\uc678\ud558\uace0 \uacc4\uc0b0\ud55c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"amountInWithFee = amountIn * 997 / 1000  // 0.3% \uc218\uc218\ub8cc \uc81c\uc678\n")),(0,l.yg)("h3",{id:"\ucf54\ub4dc-\ubd84\uc11d-getamountout"},"\ucf54\ub4dc \ubd84\uc11d: getAmountOut"),(0,l.yg)("p",null,"V2\uc758 \uc2a4\uc651 \ucd9c\ub825\ub7c9\uc744 \uacc4\uc0b0\ud558\ub294 \ud575\uc2ec \ud568\uc218\ub97c \uc0b4\ud3b4\ubcf4\uc790."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity",metastring:'title="UniswapV2Library.sol"',title:'"UniswapV2Library.sol"'},"// \uc785\ub825 \uae08\uc561\uacfc \ub9ac\uc800\ube0c\uac00 \uc8fc\uc5b4\uc9c0\uba74, \ucd9c\ub825 \uae08\uc561\uc744 \uacc4\uc0b0\ud55c\ub2e4\nfunction getAmountOut(\n    uint amountIn,      // \uc785\ub825\ud560 \ud1a0\ud070 \uc591\n    uint reserveIn,     // \uc785\ub825 \ud1a0\ud070\uc758 \ub9ac\uc800\ube0c\n    uint reserveOut     // \ucd9c\ub825 \ud1a0\ud070\uc758 \ub9ac\uc800\ube0c\n) internal pure returns (uint amountOut) {\n    require(amountIn > 0, 'UniswapV2Library: INSUFFICIENT_INPUT_AMOUNT');\n    require(reserveIn > 0 && reserveOut > 0, 'UniswapV2Library: INSUFFICIENT_LIQUIDITY');\n\n    // 1) 0.3% \uc218\uc218\ub8cc\ub97c \uc81c\uc678\ud55c \uc785\ub825\ub7c9 \uacc4\uc0b0\n    // amountIn * 0.997 = amountIn * 997 / 1000\n    uint amountInWithFee = amountIn.mul(997);\n\n    // 2) \ubd84\uc790: \uc218\uc218\ub8cc \uc81c\uc678 \uc785\ub825\ub7c9 * \ucd9c\ub825 \ub9ac\uc800\ube0c\n    uint numerator = amountInWithFee.mul(reserveOut);\n\n    // 3) \ubd84\ubaa8: \uc785\ub825 \ub9ac\uc800\ube0c * 1000 + \uc218\uc218\ub8cc \uc81c\uc678 \uc785\ub825\ub7c9\n    uint denominator = reserveIn.mul(1000).add(amountInWithFee);\n\n    // 4) \ucd5c\uc885 \ucd9c\ub825\ub7c9 = \ubd84\uc790 / \ubd84\ubaa8\n    amountOut = numerator / denominator;\n}\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\uacf5\uc2dd \uc720\ub3c4 \uacfc\uc815")),(0,l.yg)("p",null,"Constant Product\ub97c \uc720\uc9c0\ud558\uba74\uc11c \uc218\uc218\ub8cc\ub97c \uc801\uc6a9\ud574\uc57c \ud55c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"\uc2a4\uc651 \uc804: reserveIn * reserveOut = k\n\uc2a4\uc651 \ud6c4: (reserveIn + amountIn * 0.997) * (reserveOut - amountOut) = k\n\n\uc815\ub9ac\ud558\uba74:\namountOut = (amountIn * 0.997 * reserveOut) / (reserveIn + amountIn * 0.997)\n          = (amountIn * 997 * reserveOut) / (reserveIn * 1000 + amountIn * 997)\n")),(0,l.yg)("h3",{id:"\ucf54\ub4dc-\ubd84\uc11d-swap-\ud568\uc218"},"\ucf54\ub4dc \ubd84\uc11d: swap \ud568\uc218"),(0,l.yg)("p",null,"\uc2e4\uc81c \uc2a4\uc651\uc744 \uc2e4\ud589\ud558\ub294 Pair \ucee8\ud2b8\ub799\ud2b8\uc758 ",(0,l.yg)("inlineCode",{parentName:"p"},"swap")," \ud568\uc218\ub97c \ubd84\uc11d\ud574\ubcf4\uc790."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity",metastring:'title="UniswapV2Pair.sol"',title:'"UniswapV2Pair.sol"'},"function swap(\n    uint amount0Out,    // \ubc1b\uc744 token0 \uc591\n    uint amount1Out,    // \ubc1b\uc744 token1 \uc591\n    address to,         // \ubc1b\uc744 \uc8fc\uc18c\n    bytes calldata data // flash swap\uc6a9 \ucf5c\ubc31 \ub370\uc774\ud130\n) external lock {\n    // 1) \ucd9c\ub825\ub7c9 \uac80\uc99d: \ub458 \uc911 \ud558\ub098\ub294 0\ubcf4\ub2e4 \ucee4\uc57c \ud568\n    require(amount0Out > 0 || amount1Out > 0, 'UniswapV2: INSUFFICIENT_OUTPUT_AMOUNT');\n\n    // 2) \ud604\uc7ac \ub9ac\uc800\ube0c \uc870\ud68c\n    (uint112 _reserve0, uint112 _reserve1,) = getReserves();\n\n    // 3) \ucd9c\ub825\ub7c9\uc774 \ub9ac\uc800\ube0c\ubcf4\ub2e4 \uc791\uc544\uc57c \ud568 (\ud480\uc5d0 \uc788\ub294 \uac83\ubcf4\ub2e4 \ub9ce\uc774 \ube7c\uac08 \uc218 \uc5c6\uc74c)\n    require(amount0Out < _reserve0 && amount1Out < _reserve1, 'UniswapV2: INSUFFICIENT_LIQUIDITY');\n\n    uint balance0;\n    uint balance1;\n    {\n        address _token0 = token0;\n        address _token1 = token1;\n        require(to != _token0 && to != _token1, 'UniswapV2: INVALID_TO');\n\n        // 4) \ud1a0\ud070 \uc804\uc1a1 (\uba3c\uc800 \ubcf4\ub0b4\uace0 \ub098\uc911\uc5d0 \uac80\uc99d - Optimistic Transfer)\n        if (amount0Out > 0) _safeTransfer(_token0, to, amount0Out);\n        if (amount1Out > 0) _safeTransfer(_token1, to, amount1Out);\n\n        // 5) Flash Swap \ucf5c\ubc31 (data\uac00 \uc788\uc73c\uba74 \ud638\ucd9c)\n        if (data.length > 0) IUniswapV2Callee(to).uniswapV2Call(msg.sender, amount0Out, amount1Out, data);\n\n        // 6) \uc804\uc1a1 \ud6c4 \uc794\uc561 \ud655\uc778\n        balance0 = IERC20(_token0).balanceOf(address(this));\n        balance1 = IERC20(_token1).balanceOf(address(this));\n    }\n\n    // 7) \uc785\ub825\ub7c9 \uacc4\uc0b0 (\uc794\uc561 \uc99d\uac00\ubd84)\n    uint amount0In = balance0 > _reserve0 - amount0Out ? balance0 - (_reserve0 - amount0Out) : 0;\n    uint amount1In = balance1 > _reserve1 - amount1Out ? balance1 - (_reserve1 - amount1Out) : 0;\n    require(amount0In > 0 || amount1In > 0, 'UniswapV2: INSUFFICIENT_INPUT_AMOUNT');\n\n    {\n        // 8) K \uac12 \uac80\uc99d (\uc218\uc218\ub8cc \uc801\uc6a9 \ud6c4\uc5d0\ub3c4 k\uac00 \uc720\uc9c0\ub418\uc5b4\uc57c \ud568)\n        // balance * 1000 - amountIn * 3 = \uc218\uc218\ub8cc(0.3%) \uc81c\uc678\ud55c effective balance\n        uint balance0Adjusted = balance0.mul(1000).sub(amount0In.mul(3));\n        uint balance1Adjusted = balance1.mul(1000).sub(amount1In.mul(3));\n\n        // \uc870\uc815\ub41c \uc794\uc561\uc758 \uacf1\uc774 \uae30\uc874 k * 1000^2 \uc774\uc0c1\uc774\uc5b4\uc57c \ud568\n        require(\n            balance0Adjusted.mul(balance1Adjusted) >= uint(_reserve0).mul(_reserve1).mul(1000**2),\n            'UniswapV2: K'\n        );\n    }\n\n    // 9) \ub9ac\uc800\ube0c \uc5c5\ub370\uc774\ud2b8\n    _update(balance0, balance1, _reserve0, _reserve1);\n    emit Swap(msg.sender, amount0In, amount1In, amount0Out, amount1Out, to);\n}\n")),(0,l.yg)("p",null,'\uc704 \ucf54\ub4dc\uc758 \uc2e4\ud589 \ud750\ub984\uc744 \ubcf4\uba74, \uc77c\ubc18\uc801\uc778 "\uc785\uae08 \u2192 \uac80\uc99d \u2192 \ucd9c\uae08" \uc21c\uc11c\uc640 \ub2e4\ub974\ub2e4\ub294 \uac83\uc744 \uc54c \uc218 \uc788\ub2e4. Uniswap V2\ub294 ',(0,l.yg)("strong",{parentName:"p"},'"\ucd9c\uae08 \u2192 \ucf5c\ubc31 \u2192 \uac80\uc99d"')," \uc21c\uc11c\ub85c \ub3d9\uc791\ud55c\ub2e4. \uc774 \uc124\uacc4\uac00 \uac00\ub2a5\ud55c \uc774\uc720\uc640 \uadf8\ub85c \uc778\ud574 \uc5bb\ub294 \uc774\uc810\uc744 \uc0b4\ud3b4\ubcf4\uc790."),(0,l.yg)("h4",{id:"optimistic-transfer-\ud328\ud134"},"Optimistic Transfer \ud328\ud134"),(0,l.yg)("p",null,"4\ubc88 \ub2e8\uacc4\uc5d0\uc11c \uc694\uccad\ud55c \ud1a0\ud070\uc744 ",(0,l.yg)("strong",{parentName:"p"},"\uba3c\uc800 \uc804\uc1a1"),"\ud55c\ub2e4. \uc544\uc9c1 \uc0ac\uc6a9\uc790\uac00 \uc785\ub825 \ud1a0\ud070\uc744 \ubcf4\ub0c8\ub294\uc9c0 \ud655\uc778\ud558\uc9c0 \uc54a\uc740 \uc0c1\ud0dc\ub2e4. \uc774\uac83\uc774 \uac00\ub2a5\ud55c \uc774\uc720\ub294 8\ubc88 \ub2e8\uacc4\uc758 K \uac80\uc99d \ub54c\ubb38\uc774\ub2e4. \ud2b8\ub79c\uc7ad\uc158\uc774 \ub05d\ub0a0 \ub54c K \uac12\uc774 \uc720\uc9c0(\ub610\ub294 \uc99d\uac00)\ub418\uc9c0 \uc54a\uc73c\uba74 \uc804\uccb4 \ud2b8\ub79c\uc7ad\uc158\uc774 revert\ub41c\ub2e4. \uc774\ub354\ub9ac\uc6c0\uc758 atomic transaction \ud2b9\uc131\uc0c1, \uc911\uac04\uc5d0 \ud1a0\ud070\uc744 \ubc1b\uc544\uac14\ub354\ub77c\ub3c4 \ucd5c\uc885 \uac80\uc99d\uc5d0 \uc2e4\ud328\ud558\uba74 \ubaa8\ub4e0 \uc0c1\ud0dc \ubcc0\uacbd\uc774 \ucde8\uc18c\ub41c\ub2e4."),(0,l.yg)("p",null,"\uc774 \ud328\ud134 \ub355\ubd84\uc5d0 ",(0,l.yg)("strong",{parentName:"p"},"Flash Swap"),"\uc774 \uac00\ub2a5\ud574\uc9c4\ub2e4. 5\ubc88 \ub2e8\uacc4\uc758 \ucf5c\ubc31\uc5d0\uc11c \uc0ac\uc6a9\uc790\ub294 \ubc29\uae08 \ubc1b\uc740 \ud1a0\ud070\uc73c\ub85c \ub2e4\ub978 \uc791\uc5c5(\ucc28\uc775\uac70\ub798, \ub2f4\ubcf4 \uccad\uc0b0 \ub4f1)\uc744 \uc218\ud589\ud558\uace0, \uadf8 \uc218\uc775\uc73c\ub85c \uc785\ub825 \ud1a0\ud070\uc744 \uac1a\uc744 \uc218 \uc788\ub2e4. \ubb34\ub2f4\ubcf4\ub85c \uc790\uc0b0\uc744 \ube4c\ub824 \uc0ac\uc6a9\ud558\uace0 \uac19\uc740 \ud2b8\ub79c\uc7ad\uc158 \ub0b4\uc5d0\uc11c \uac1a\ub294 Flash Loan\uc758 \ubcc0\ud615\uc774\ub2e4."),(0,l.yg)("h4",{id:"k-\uac80\uc99d\uacfc-\uc218\uc218\ub8cc"},"K \uac80\uc99d\uacfc \uc218\uc218\ub8cc"),(0,l.yg)("p",null,"8\ubc88 \ub2e8\uacc4\uc758 K \uac80\uc99d\uc740 \ub2e8\uc21c\ud788 ",(0,l.yg)("inlineCode",{parentName:"p"},"x * y >= k"),"\uac00 \uc544\ub2c8\ub77c \uc218\uc218\ub8cc\ub97c \uace0\ub824\ud55c \uc870\uc815\ub41c \uac12\uc744 \uc0ac\uc6a9\ud55c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"balance0Adjusted = balance0 * 1000 - amount0In * 3\nbalance1Adjusted = balance1 * 1000 - amount1In * 3\n")),(0,l.yg)("p",null,'\uc785\ub825\ub7c9\uc758 0.3%(3/1000)\ub97c \uc81c\uc678\ud55c "effective balance"\ub97c \uacc4\uc0b0\ud558\uc5ec, \uc218\uc218\ub8cc\ub97c \uc81c\uc678\ud55c \uc2e4\uc9c8 \uc794\uc561\uc758 \uacf1\uc774 \uae30\uc874 K \uac12 \uc774\uc0c1\uc778\uc9c0 \ud655\uc778\ud55c\ub2e4. \uc218\uc218\ub8cc\ub294 \ud480\uc5d0 \ub0a8\uc544 K \uac12\uc744 \uc99d\uac00\uc2dc\ud0a4\uace0, \uc774\ub294 LP\ub4e4\uc758 \uc218\uc775\uc774 \ub41c\ub2e4.'),(0,l.yg)("h4",{id:"\uc785\ub825\ub7c9-\uc5ed\uc0b0"},"\uc785\ub825\ub7c9 \uc5ed\uc0b0"),(0,l.yg)("p",null,"7\ubc88 \ub2e8\uacc4\uc5d0\uc11c \uc785\ub825\ub7c9\uc744 \uc9c1\uc811 \ud30c\ub77c\ubbf8\ud130\ub85c \ubc1b\uc9c0 \uc54a\uace0 \uc794\uc561 \ubcc0\ud654\ub85c \uacc4\uc0b0\ud55c\ub2e4. ",(0,l.yg)("inlineCode",{parentName:"p"},"swap")," \ud568\uc218 \ud638\ucd9c \uc804\uc5d0 \ud1a0\ud070\uc744 \uc804\uc1a1\ud574\ub450\uba74, \ud568\uc218 \ub0b4\uc5d0\uc11c \ub9ac\uc800\ube0c \ub300\ube44 \uc99d\uac00\ud55c \uc794\uc561\uc744 \uc785\ub825\ub7c9\uc73c\ub85c \uc778\uc2dd\ud55c\ub2e4."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\uc7a5\uc810")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"Router \uc5c6\uc774 Pair \ucee8\ud2b8\ub799\ud2b8\ub97c \uc9c1\uc811 \ud638\ucd9c\ud560 \uc218 \uc788\ub2e4."),(0,l.yg)("li",{parentName:"ul"},"\uc5ec\ub7ec \uc2a4\uc651\uc744 \ud558\ub098\uc758 \ud2b8\ub79c\uc7ad\uc158\uc73c\ub85c \uccb4\uc774\ub2dd\ud560 \uc218 \uc788\ub2e4."),(0,l.yg)("li",{parentName:"ul"},"\ud1a0\ud070 \uc804\uc1a1 \ubc29\uc2dd\uc5d0 \uc720\uc5f0\uc131\uc744 \uc81c\uacf5\ud55c\ub2e4. (transfer, transferFrom, \ub610\ub294 \ub2e4\ub978 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc804\uc1a1)")),(0,l.yg)("h3",{id:"lp-\ud1a0\ud070-\uc720\ub3d9\uc131-\uc9c0\ubd84-\uc99d\uba85"},"LP \ud1a0\ud070: \uc720\ub3d9\uc131 \uc9c0\ubd84 \uc99d\uba85"),(0,l.yg)("p",null,"\uc720\ub3d9\uc131\uc744 \uacf5\uae09\ud558\uba74 LP(Liquidity Provider) \ud1a0\ud070\uc744 \ubc1b\ub294\ub2e4. LP \ud1a0\ud070\uc740 \ud480\uc5d0 \ub300\ud55c ",(0,l.yg)("strong",{parentName:"p"},"\ube44\ub840\uc801 \uc9c0\ubd84"),"\uc744 \ub098\ud0c0\ub0b4\ub294 ERC-20 \ud1a0\ud070\uc774\ub2e4. \uc8fc\uc2dd\ud68c\uc0ac\uc758 \uc8fc\uc2dd\uacfc \ube44\uc2b7\ud558\uac8c, LP \ud1a0\ud070\uc744 \ubcf4\uc720\ud55c\ub2e4\ub294 \uac83\uc740 \ud574\ub2f9 \ud480\uc758 \uc790\uc0b0\uc5d0 \ub300\ud55c \uccad\uad6c\uad8c\uc744 \uac16\ub294\ub2e4\ub294 \uc758\ubbf8\ub2e4."),(0,l.yg)("p",null,"\ud575\uc2ec\uc740 LP \ud1a0\ud070\uc774 ",(0,l.yg)("strong",{parentName:"p"},"\uc808\ub300\uc801\uc778 \ud1a0\ud070 \uc591\uc774 \uc544\ub2c8\ub77c \ube44\uc728"),"\uc744 \ub098\ud0c0\ub0b8\ub2e4\ub294 \uc810\uc774\ub2e4. \ub0b4\uac00 \uc804\uccb4 LP \ud1a0\ud070\uc758 10%\ub97c \ubcf4\uc720\ud558\uace0 \uc788\ub2e4\uba74, \ucd9c\uae08 \uc2dc\uc810\uc758 \ud480 \uc790\uc0b0 10%\ub97c \ubc1b\ub294\ub2e4. \ud480\uc5d0\uc11c \uc2a4\uc651\uc774 \ubc1c\uc0dd\ud560 \ub54c\ub9c8\ub2e4 0.3% \uc218\uc218\ub8cc\uac00 \ud480\uc5d0 \ub204\uc801\ub418\ubbc0\ub85c, \uc2dc\uac04\uc774 \uc9c0\ub098\uba74 \uac19\uc740 LP \ud1a0\ud070\uc73c\ub85c \ub354 \ub9ce\uc740 \uc790\uc0b0\uc744 \uc778\ucd9c\ud560 \uc218 \uc788\ub2e4."),(0,l.yg)("h4",{id:"\uc720\ub3d9\uc131-\uacf5\uae09-mint"},"\uc720\ub3d9\uc131 \uacf5\uae09 (mint)"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity",metastring:'title="UniswapV2Pair.sol"',title:'"UniswapV2Pair.sol"'},"function mint(address to) external lock returns (uint liquidity) {\n    (uint112 _reserve0, uint112 _reserve1,) = getReserves();\n\n    // \uc0c8\ub85c \ub4e4\uc5b4\uc628 \ud1a0\ud070 \uc591 \uacc4\uc0b0 (\ud604\uc7ac \uc794\uc561 - \uae30\ub85d\ub41c \ub9ac\uc800\ube0c)\n    uint balance0 = IERC20(token0).balanceOf(address(this));\n    uint balance1 = IERC20(token1).balanceOf(address(this));\n    uint amount0 = balance0.sub(_reserve0);\n    uint amount1 = balance1.sub(_reserve1);\n\n    uint _totalSupply = totalSupply;\n    if (_totalSupply == 0) {\n        // \ucd5c\ucd08 \uc720\ub3d9\uc131 \uacf5\uae09\n        liquidity = Math.sqrt(amount0.mul(amount1)).sub(MINIMUM_LIQUIDITY);\n        _mint(address(0), MINIMUM_LIQUIDITY); // 1000 LP \uc601\uad6c \uc7a0\uae08\n    } else {\n        // \uae30\uc874 \ud480\uc5d0 \ucd94\uac00: \ub354 \uc791\uc740 \ube44\uc728 \uae30\uc900\uc73c\ub85c \ubc1c\ud589\n        liquidity = Math.min(\n            amount0.mul(_totalSupply) / _reserve0,\n            amount1.mul(_totalSupply) / _reserve1\n        );\n    }\n    require(liquidity > 0, 'UniswapV2: INSUFFICIENT_LIQUIDITY_MINTED');\n    _mint(to, liquidity);\n\n    _update(balance0, balance1, _reserve0, _reserve1);\n}\n")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\ucd5c\ucd08 \uc720\ub3d9\uc131 - sqrt \uacf5\uc2dd\uc758 \uc774\uc720"),": \uccab LP\uc5d0\uac8c\ub294 ",(0,l.yg)("inlineCode",{parentName:"p"},"sqrt(amount0 * amount1)")," \ub9cc\ud07c\uc758 LP \ud1a0\ud070\uc774 \ubc1c\ud589\ub41c\ub2e4. \uc65c \uacf1\uc758 \uc81c\uacf1\uadfc\uc77c\uae4c?"),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"\ub2e8\uc704 \ub3c5\ub9bd\uc131"),": ETH(18 decimals)\uc640 USDC(6 decimals)\ucc98\ub7fc \ub2e8\uc704\uac00 \ub2e4\ub978 \ud1a0\ud070 \ud398\uc5b4\uc5d0\uc11c\ub3c4 \uacf5\uc815\ud558\uac8c \ub3d9\uc791\ud55c\ub2e4. \ub2e8\uc21c \ud569\uc774\ub098 \uacf1\uc744 \uc0ac\uc6a9\ud558\uba74 decimal\uc774 \ud070 \ud1a0\ud070\uc5d0 \ud3b8\ud5a5\ub41c\ub2e4."),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"\uae30\ud558\ud3c9\uade0\uc758 \ud2b9\uc131"),": ",(0,l.yg)("inlineCode",{parentName:"li"},"sqrt(x * y)"),"\ub294 \ub450 \uac12\uc758 \uae30\ud558\ud3c9\uade0\uc774\ub2e4. x\uac00 2\ubc30\uac00 \ub418\uace0 y\uac00 \uc808\ubc18\uc774 \ub418\uba74 \uae30\ud558\ud3c9\uade0\uc740 \ubcc0\ud558\uc9c0 \uc54a\uc544, \uac00\uaca9 \ubcc0\ub3d9\uc5d0 \uc911\ub9bd\uc801\uc778 \uc9c0\ud45c\uac00 \ub41c\ub2e4."),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"K \uac12\uacfc\uc758 \uad00\uacc4"),": ",(0,l.yg)("inlineCode",{parentName:"li"},"L = sqrt(K)"),"\ub85c, \uc720\ub3d9\uc131 L\uc758 \uc81c\uacf1\uc774 \uc0c1\uc218 K\uac00 \ub41c\ub2e4. \uc774 \uad00\uacc4\ub294 V3\uc5d0\uc11c \ub354 \uba85\ud655\ud574\uc9c4\ub2e4.")),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\ucd94\uac00 \uc720\ub3d9\uc131"),": \uc774\ubbf8 \ud480\uc774 \uc874\uc7ac\ud558\uba74 \ud604\uc7ac \ube44\uc728\uc5d0 \ub9de\ucdb0 LP \ud1a0\ud070\uc774 \ubc1c\ud589\ub41c\ub2e4. ",(0,l.yg)("inlineCode",{parentName:"p"},"Math.min"),"\uc744 \uc0ac\uc6a9\ud558\ub294 \uc774\uc720\ub294 \ube44\uc728\uc774 \ub9de\uc9c0 \uc54a\uac8c \uacf5\uae09\ud560 \uacbd\uc6b0 \ucd08\uacfc\ubd84\uc744 \ubcf4\ud638\ud558\uc9c0 \uc54a\uae30 \uc704\ud568\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4 1:1 \ud480\uc5d0 2:1 \ube44\uc728\ub85c \uacf5\uae09\ud558\uba74, 1:1\uc5d0 \ud574\ub2f9\ud558\ub294 LP\ub9cc \ubc1b\uace0 \ub098\uba38\uc9c0 \ud1a0\ud070\uc740 \ud480\uc5d0 \uae30\ubd80\ub41c\ub2e4. Router \ucee8\ud2b8\ub799\ud2b8\uac00 \uc774\ub7f0 \uc2e4\uc218\ub97c \ubc29\uc9c0\ud574\uc900\ub2e4."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"MINIMUM_LIQUIDITY"),": \ucd5c\ucd08 1000 LP \ud1a0\ud070(10^-15 \uc218\uc900)\uc740 address(0)\uc5d0 \uc601\uad6c\ud788 \uc7a0\uae34\ub2e4. \uc774\ub294 \ub450 \uac00\uc9c0 \ubb38\uc81c\ub97c \ubc29\uc9c0\ud55c\ub2e4."),(0,l.yg)("ol",null,(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"0 \ub098\ub204\uae30 \ubc29\uc9c0"),": totalSupply\uac00 0\uc774 \ub418\uba74 \ucd94\uac00 \uc720\ub3d9\uc131 \uacf5\uae09 \uc2dc \ub098\ub217\uc148 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud55c\ub2e4."),(0,l.yg)("li",{parentName:"ol"},(0,l.yg)("strong",{parentName:"li"},"Inflation Attack \ubc29\uc9c0"),": \uacf5\uaca9\uc790\uac00 \ucd5c\ucd08 LP\uac00 \ub418\uc5b4 1 wei\ub9cc \uacf5\uae09\ud558\uace0, \uc774\ud6c4 \ub300\ub7c9\uc758 \ud1a0\ud070\uc744 \uc9c1\uc811 \uc804\uc1a1\ud558\uba74 LP \ud1a0\ud070 1\uac1c\uc758 \uac00\uce58\uac00 \uadf9\ub3c4\ub85c \ub192\uc544\uc9c4\ub2e4. \uc774\ud6c4 \ud53c\ud574\uc790\uac00 \uc720\ub3d9\uc131\uc744 \uacf5\uae09\ud558\uba74 \ubc18\uc62c\ub9bc \uc624\ucc28\ub85c LP \ud1a0\ud070\uc744 0\uac1c \ubc1b\uac8c \ub418\uc5b4 \uc790\uae08\uc744 \uc783\ub294\ub2e4. MINIMUM_LIQUIDITY\uac00 \uc788\uc73c\uba74 \uc774 \uacf5\uaca9\uc758 \ube44\uc6a9\uc774 \ub192\uc544\uc9c4\ub2e4.")),(0,l.yg)("h4",{id:"\uc720\ub3d9\uc131-\uc778\ucd9c-burn"},"\uc720\ub3d9\uc131 \uc778\ucd9c (burn)"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity",metastring:'title="UniswapV2Pair.sol"',title:'"UniswapV2Pair.sol"'},"function burn(address to) external lock returns (uint amount0, uint amount1) {\n    (uint112 _reserve0, uint112 _reserve1,) = getReserves();\n    address _token0 = token0;\n    address _token1 = token1;\n    uint balance0 = IERC20(_token0).balanceOf(address(this));\n    uint balance1 = IERC20(_token1).balanceOf(address(this));\n    uint liquidity = balanceOf[address(this)]; // \ucee8\ud2b8\ub799\ud2b8\ub85c \uc804\uc1a1\ub41c LP \ud1a0\ud070\n\n    uint _totalSupply = totalSupply;\n    // LP \ud1a0\ud070 \ube44\uc728\ub9cc\ud07c \uac01 \ud1a0\ud070\uc744 \uc778\ucd9c\n    amount0 = liquidity.mul(balance0) / _totalSupply;\n    amount1 = liquidity.mul(balance1) / _totalSupply;\n    require(amount0 > 0 && amount1 > 0, 'UniswapV2: INSUFFICIENT_LIQUIDITY_BURNED');\n\n    _burn(address(this), liquidity);\n    _safeTransfer(_token0, to, amount0);\n    _safeTransfer(_token1, to, amount1);\n\n    _update(...);\n}\n")),(0,l.yg)("p",null,"\uc778\ucd9c \uc2dc\uc5d0\ub294 \ubcf4\uc720\ud55c LP \ud1a0\ud070 \ube44\uc728\ub9cc\ud07c \ud480\uc758 \uc790\uc0b0\uc744 \uac00\uc838\uac04\ub2e4. \uacf5\uae09 \uc774\ud6c4 \ubc1c\uc0dd\ud55c \uc218\uc218\ub8cc\uac00 \ud480\uc5d0 \ub204\uc801\ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c, \uc77c\ubc18\uc801\uc73c\ub85c \uacf5\uae09\ud588\ub358 \uac83\ubcf4\ub2e4 \ub354 \ub9ce\uc740 \ud1a0\ud070\uc744 \uc778\ucd9c\ud558\uac8c \ub41c\ub2e4."),(0,l.yg)("h4",{id:"\uc218\uc218\ub8cc\ub294-\uc5b4\ub5bb\uac8c-lp\uc5d0\uac8c-\ub3cc\uc544\uac00\ub294\uac00"},"\uc218\uc218\ub8cc\ub294 \uc5b4\ub5bb\uac8c LP\uc5d0\uac8c \ub3cc\uc544\uac00\ub294\uac00"),(0,l.yg)("p",null,"Uniswap V2\ub294 \ubcc4\ub3c4\uc758 \uc218\uc218\ub8cc \ubd84\ubc30 \ub85c\uc9c1\uc774 \uc5c6\ub2e4. \ub300\uc2e0 \uc218\uc218\ub8cc\uac00 \ubc1c\uc0dd\ud558\uba74 K \uac12 \uc790\uccb4\uac00 \uc99d\uac00\ud55c\ub2e4."),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\uc2a4\uc651 \uc804: K = 1,000,000"),(0,l.yg)("li",{parentName:"ul"},"\uc2a4\uc651 \ud6c4 (0.3% \uc218\uc218\ub8cc \ud3ec\ud568): K = 1,003,000")),(0,l.yg)("p",null,"K\uac00 \ucee4\uc9c0\uba74 \uac19\uc740 LP \ud1a0\ud070 \ube44\uc728\ub85c \ub354 \ub9ce\uc740 \ud1a0\ud070\uc744 \uc778\ucd9c\ud560 \uc218 \uc788\ub2e4. \ubcc4\ub3c4\uc758 claim \ud568\uc218 \uc5c6\uc774 \uc778\ucd9c \uc2dc \uc790\ub3d9\uc73c\ub85c \uc218\uc218\ub8cc\uac00 \ud3ec\ud568\ub41c\ub2e4."),(0,l.yg)("h2",{id:"v2\uc758-\ud55c\uacc4-\uc790\ubcf8-\ube44\ud6a8\uc728\uc131"},"V2\uc758 \ud55c\uacc4: \uc790\ubcf8 \ube44\ud6a8\uc728\uc131"),(0,l.yg)("p",null,"V2\ub294 \ub2e8\uc21c\ud558\uace0 \uac80\uc99d\ub41c \uc124\uacc4\uc9c0\ub9cc, DeFi\uac00 \uc131\uc7a5\ud558\uba74\uc11c \uadf8 \ud55c\uacc4\uac00 \uba85\ud655\ud574\uc84c\ub2e4. \ud575\uc2ec \ubb38\uc81c\ub294 ",(0,l.yg)("strong",{parentName:"p"},"\uc790\ubcf8 \ube44\ud6a8\uc728\uc131"),"\uc774\ub2e4. LP\uac00 \uacf5\uae09\ud55c \uc790\ubcf8 \ub300\ubd80\ubd84\uc774 \uc2e4\uc81c \uac70\ub798\uc5d0 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\ub294\ub2e4."),(0,l.yg)("h3",{id:"\uc804-\ubc94\uc704-\uc720\ub3d9\uc131\uc758-\ubb38\uc81c"},"\uc804 \ubc94\uc704 \uc720\ub3d9\uc131\uc758 \ubb38\uc81c"),(0,l.yg)("p",null,(0,l.yg)("inlineCode",{parentName:"p"},"x * y = k")," \uacf5\uc2dd\uc5d0\uc11c \uc720\ub3d9\uc131\uc740 \uac00\uaca9 0\ubd80\ud130 \ubb34\ud55c\ub300\uae4c\uc9c0 ",(0,l.yg)("strong",{parentName:"p"},"\uade0\uc77c\ud558\uac8c \ubd84\ud3ec"),"\ub41c\ub2e4. \uc218\ud559\uc801\uc73c\ub85c \uc774 \uace1\uc120\uc740 \uc810\uadfc\uc120\uc744 \uac00\uc9c0\ubbc0\ub85c x\uac00 0\uc774\ub098 \ubb34\ud55c\ub300\uc5d0 \uac00\uae4c\uc6cc\uc838\ub3c4 \uace1\uc120\uc740 \ucd95\uc5d0 \ub2ff\uc9c0 \uc54a\ub294\ub2e4. \uc989, \ubaa8\ub4e0 \uac00\uaca9\ub300\uc5d0 \uc720\ub3d9\uc131\uc774 \uc874\uc7ac\ud55c\ub2e4."),(0,l.yg)("p",null,"\ubb38\uc81c\ub294 \ub300\ubd80\ubd84\uc758 \uac70\ub798\uac00 ",(0,l.yg)("strong",{parentName:"p"},"\ud604\uc7ac \uac00\uaca9 \uadfc\ucc98\uc758 \uc881\uc740 \ubc94\uc704"),"\uc5d0\uc11c \uc77c\uc5b4\ub09c\ub2e4\ub294 \uac83\uc774\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"V2 \uc720\ub3d9\uc131 \ubd84\ud3ec (ETH/USDC \uc608\uc2dc)\n\nPrice    $100        $2,000        $100,000\n          |            |              |\nLiq.     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588  <- Uniformly distributed\n          |            |              |\nTrading             [##]                   <- Most trades here\n                 $1,800~$2,200\n")),(0,l.yg)("p",null,"ETH\uac00 $2,000\uc77c \ub54c, $100\uc774\ub098 $100,000 \uac00\uaca9\ub300\uc5d0 \ubc30\uce58\ub41c \uc720\ub3d9\uc131\uc740 \uac70\ub798\uc5d0 \uc804\ud600 \uae30\uc5ec\ud558\uc9c0 \ubabb\ud55c\ub2e4. \uadf8 \uc790\ubcf8\uc740 \uadf8\ub0e5 \uc7a0\ub4e4\uc5b4 \uc788\ub294 \uac83\uc774\ub2e4."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\uad6c\uccb4\uc801\uc778 \uc218\uce58\ub85c \ubcf4\uba74"),":"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"ETH/USDC \ud480\uc5d0 $1,000,000\uc758 \uc720\ub3d9\uc131\uc774 \uc788\ub2e4\uace0 \uac00\uc815"),(0,l.yg)("li",{parentName:"ul"},"\uc77c\uc77c \uac70\ub798\uc758 95%\uac00 \ud604\uc7ac \uac00\uaca9 \xb110% \ubc94\uc704\uc5d0\uc11c \ubc1c\uc0dd"),(0,l.yg)("li",{parentName:"ul"},"\uadf8 \ubc94\uc704\uc5d0 \uc2e4\uc81c\ub85c \ud65c\uc6a9\ub418\ub294 \uc720\ub3d9\uc131\uc740 \uc804\uccb4\uc758 \uc57d 0.5~2% \uc218\uc900"),(0,l.yg)("li",{parentName:"ul"},"\ub098\uba38\uc9c0 98%\uc758 \uc790\ubcf8\uc740 \uadf9\ub2e8\uc801 \uac00\uaca9 \ubcc0\ub3d9\uc5d0 \ub300\ube44\ud574 \ubb36\uc5ec \uc788\uc744 \ubfd0")),(0,l.yg)("p",null,"\uc2a4\ud14c\uc774\ube14\ucf54\uc778 \ud398\uc5b4\uc758 \uc0ac\ub840: DAI/USDC \uac19\uc740 \uc2a4\ud14c\uc774\ube14\ucf54\uc778 \ud398\uc5b4\ub294 0.99~1.01 \ubc94\uc704\ub97c \uac70\uc758 \ubc97\uc5b4\ub098\uc9c0 \uc54a\ub294\ub2e4. \ud558\uc9c0\ub9cc V2\uc5d0\uc11c\ub294 0~\ubb34\ud55c\ub300 \uc804\uccb4\uc5d0 \uc720\ub3d9\uc131\uc774 \ubd84\uc0b0\ub418\uc5b4, \uc804\uccb4 \uc790\ubcf8\uc758 0.5%\ub9cc \uc2e4\uc81c \uac70\ub798\uc5d0 \uc0ac\uc6a9\ub41c\ub2e4. 99.5%\uc758 \uc790\ubcf8\uc774 \uc0ac\uc2e4\uc0c1 \ub0ad\ube44\ub418\ub294 \uc148\uc774\ub2e4."),(0,l.yg)("p",null,"\uc774 \ube44\ud6a8\uc728\uc131\uc740 LP\uc758 \uc218\uc775\ub960\uc744 \uc9c1\uc811\uc801\uc73c\ub85c \ub0ae\ucd98\ub2e4. \uc218\uc218\ub8cc\ub294 \uc2e4\uc81c \uac70\ub798\uc5d0 \uc0ac\uc6a9\ub41c \uc720\ub3d9\uc131\uc5d0\uc11c\ub9cc \ubc1c\uc0dd\ud558\ub294\ub370, \uc790\ubcf8\uc758 \uadf9\ud788 \uc77c\ubd80\ub9cc \uac70\ub798\uc5d0 \ucc38\uc5ec\ud558\ub2c8 \uc804\uccb4 \uc790\ubcf8 \ub300\ube44 \uc218\uc775\ub960(APR)\uc774 \ub0ae\uc544\uc9c8 \uc218\ubc16\uc5d0 \uc5c6\ub2e4."),(0,l.yg)("h3",{id:"\ube44\uc601\uad6c\uc801-\uc190\uc2e4-impermanent-loss"},"\ube44\uc601\uad6c\uc801 \uc190\uc2e4 (Impermanent Loss)"),(0,l.yg)("p",null,"LP\uac00 \uc9c1\uba74\ud558\ub294 \ub610 \ub2e4\ub978 \ubb38\uc81c\ub294 ",(0,l.yg)("strong",{parentName:"p"},"\ube44\uc601\uad6c\uc801 \uc190\uc2e4(Impermanent Loss, IL)"),"\uc774\ub2e4. \uac00\uaca9\uc774 \ubcc0\ub3d9\ud558\uba74, LP\ub294 \ud1a0\ud070\uc744 \uadf8\ub0e5 \ub4e4\uace0 \uc788\uc5c8\uc744 \ub54c\ubcf4\ub2e4 \uc190\ud574\ub97c \ubcf4\uac8c \ub41c\ub2e4."),(0,l.yg)("p",null,'AMM\uc758 \ud2b9\uc131\uc0c1 \uac00\uaca9\uc774 \uc624\ub974\ub294 \ud1a0\ud070\uc740 \ud314\ub9ac\uace0, \ub0b4\ub9ac\ub294 \ud1a0\ud070\uc740 \uc0ac\ub4e4\uc774\uac8c \ub41c\ub2e4. \ucc28\uc775\uac70\ub798\uc790\ub4e4\uc774 \uc678\ubd80 \uc2dc\uc7a5\uacfc \uac00\uaca9\uc744 \ub9de\ucd94\ub294 \uacfc\uc815\uc5d0\uc11c \ud480\uc758 \ud1a0\ud070 \ube44\uc728\uc774 \uc870\uc815\ub41c\ub2e4. \uacb0\uacfc\uc801\uc73c\ub85c LP\ub294 "\uc624\ub974\ub294 \uc790\uc0b0\uc740 \uc77c\ucc0d \ud314\uace0, \ub0b4\ub9ac\ub294 \uc790\uc0b0\uc740 \uacc4\uc18d \uc0b0" \uc148\uc774 \ub41c\ub2e4.'),(0,l.yg)("h4",{id:"\uc218\uce58-\uc608\uc2dc"},"\uc218\uce58 \uc608\uc2dc"),(0,l.yg)("p",null,"ETH \uac00\uaca9\uc774 $2,000 \u2192 $4,000\ub85c 2\ubc30\uac00 \ub41c \uacbd\uc6b0\ub97c \uacc4\uc0b0\ud574\ubcf4\uc790."),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\ucd08\uae30 \uc0c1\ud0dc")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"LP\uac00 5 ETH + 10,000 USDC\ub97c \uacf5\uae09 (\ucd1d $20,000)"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"k = 5 * 10,000 = 50,000"))),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\uac00\uaca9 \ubcc0\ub3d9 \ud6c4 \ud480 \uc0c1\ud0dc")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\uc0c8 \uac00\uaca9 p = 4,000\uc5d0\uc11c ",(0,l.yg)("inlineCode",{parentName:"li"},"x * y = k"),"\uc640 ",(0,l.yg)("inlineCode",{parentName:"li"},"y/x = p"),"\ub97c \ub9cc\uc871\ud574\uc57c \ud568"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"x = sqrt(k/p) = sqrt(50,000/4,000) \u2248 3.54 ETH")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"y = sqrt(k*p) = sqrt(50,000*4,000) \u2248 14,142 USDC"))),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"\uc804\ub7b5"),(0,l.yg)("th",{parentName:"tr",align:null},"\ubcf4\uc720 \uc790\uc0b0"),(0,l.yg)("th",{parentName:"tr",align:null},"\uac00\uce58"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\ub2e8\uc21c \ubcf4\uc720"),(0,l.yg)("td",{parentName:"tr",align:null},"5 ETH + 10,000 USDC"),(0,l.yg)("td",{parentName:"tr",align:null},"$30,000")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"V2 LP"),(0,l.yg)("td",{parentName:"tr",align:null},"3.54 ETH + 14,142 USDC"),(0,l.yg)("td",{parentName:"tr",align:null},"$28,284")))),(0,l.yg)("p",null,(0,l.yg)("strong",{parentName:"p"},"\uc190\uc2e4"),": $1,716 (\uc57d 5.72%)"),(0,l.yg)("p",null,"ETH\uac00 \uc62c\ub790\ub294\ub370 LP\ub294 ETH\ub97c 1.46\uac1c\ub098 \ub35c \uac16\uac8c \ub410\ub2e4. \ucc28\uc775\uac70\ub798\uc790\ub4e4\uc774 \uc2fc ETH\ub97c \uc0ac\uac00\uba74\uc11c \ud480\uc5d0\uc11c \ube60\uc838\ub098\uac14\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,l.yg)("p",null,'\uac00\uaca9 \ubcc0\ub3d9\uc774 \ud074\uc218\ub85d \ube44\uc601\uad6c\uc801 \uc190\uc2e4\ub3c4 \ucee4\uc9c4\ub2e4. \ubcc0\ub3d9\uc131\uc774 \ud070 \ud1a0\ud070 \ud398\uc5b4\uc758 LP\ub294 \uc218\uc218\ub8cc \uc218\uc775\uc774 \uc190\uc2e4\uc744 \uc0c1\uc1c4\ud558\uace0\ub3c4 \ub0a8\uc544\uc57c \uc218\uc775\uc744 \ub0bc \uc218 \uc788\ub2e4. "\ube44\uc601\uad6c\uc801"\uc774\ub77c \ubd80\ub974\ub294 \uc774\uc720\ub294 \uac00\uaca9\uc774 \uc6d0\ub798\ub300\ub85c \ub3cc\uc544\uc624\uba74 \uc190\uc2e4\uc774 \uc0ac\ub77c\uc9c0\uae30 \ub54c\ubb38\uc774\ub2e4. \ud558\uc9c0\ub9cc \ud604\uc2e4\uc5d0\uc11c \uac00\uaca9\uc774 \uc815\ud655\ud788 \uc6d0\uc810\uc73c\ub85c \ub3cc\uc544\uc624\ub294 \uacbd\uc6b0\ub294 \ub4dc\ubb3c\ub2e4.'),(0,l.yg)("h2",{id:"uniswap-v3-concentrated-liquidity"},"Uniswap V3: Concentrated Liquidity"),(0,l.yg)("h3",{id:"\ud575\uc2ec-\uc544\uc774\ub514\uc5b4"},"\ud575\uc2ec \uc544\uc774\ub514\uc5b4"),(0,l.yg)("p",null,"V3\uc758 \ud601\uc2e0\uc740 ",(0,l.yg)("strong",{parentName:"p"},"Concentrated Liquidity"),"\ub2e4. LP\uac00 \uc6d0\ud558\ub294 \uac00\uaca9 \ubc94\uc704\uc5d0\ub9cc \uc720\ub3d9\uc131\uc744 \uc9d1\uc911\ud560 \uc218 \uc788\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"V2: Full Range Distribution\n|================================================|\n0                     Price                      \u221e\n[          Liquidity spread across all prices    ]\n\nV3: Concentrated in Selected Range\n                    |==========|\n                  $1,800     $2,200\n                  [Deep liquidity here]\n")),(0,l.yg)("p",null,"V2\uc5d0\uc11c $10,000\ub97c \uacf5\uae09\ud558\uba74 \uc804 \uac00\uaca9\ub300\uc5d0 \uc587\uac8c \ubd84\uc0b0\ub41c\ub2e4. V3\uc5d0\uc11c\ub294 \uac19\uc740 $10,000\ub97c $1,800~$2,200 \ubc94\uc704\uc5d0\ub9cc \uc9d1\uc911\ud560 \uc218 \uc788\uc5b4, \ud574\ub2f9 \ubc94\uc704 \ub0b4\uc5d0\uc11c \ud6e8\uc52c \uae4a\uc740 \uc720\ub3d9\uc131\uc744 \uc81c\uacf5\ud55c\ub2e4."),(0,l.yg)("h3",{id:"\uc218\ud559\uc801-\uae30\ubc18-virtual-liquidity"},"\uc218\ud559\uc801 \uae30\ubc18: Virtual Liquidity"),(0,l.yg)("p",null,"V3\uc758 concentrated liquidity\ub97c \uc774\ud574\ud558\ub824\uba74 ",(0,l.yg)("strong",{parentName:"p"},"\uac00\uc0c1 \uc720\ub3d9\uc131(Virtual Liquidity)")," \uac1c\ub150\uc774 \ud544\uc694\ud558\ub2e4."),(0,l.yg)("p",null,"V2\uc758 ",(0,l.yg)("inlineCode",{parentName:"p"},"x * y = k"),"\ub97c \ub2e4\uc2dc \ubcf4\uc790. \uc774 \uacf5\uc2dd\uc5d0\uc11c \uc720\ub3d9\uc131 L\uc740 ",(0,l.yg)("inlineCode",{parentName:"p"},"L = sqrt(k) = sqrt(x * y)"),"\ub85c \uc815\uc758\ub41c\ub2e4."),(0,l.yg)("p",null,"V2\uc5d0\uc11c\ub294 \uc804\uccb4 \uac00\uaca9 \ubc94\uc704(0~\u221e)\uc5d0 L\uc774 \uade0\uc77c\ud558\uac8c \ubd84\ud3ec\ud55c\ub2e4. \uac00\uaca9 P\uc5d0\uc11c \ud1a0\ud070 \uc591\uacfc\uc758 \uad00\uacc4\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"x = L / sqrt(P)\ny = L * sqrt(P)\n")),(0,l.yg)("p",null,"V3\uc758 \ud575\uc2ec \ud1b5\ucc30\uc740 ",(0,l.yg)("strong",{parentName:"p"},"\ud2b9\uc815 \uac00\uaca9 \ubc94\uc704 ","[Pa, Pb]",'\uc5d0\uc11c\ub9cc \ub3d9\uc791\ud558\ub294 "\uac00\uc0c1\uc758" x, y\ub97c \uc0ac\uc6a9\ud558\uba74, \ub354 \uc801\uc740 \uc2e4\uc81c \uc790\ubcf8\uc73c\ub85c \uac19\uc740 \uc720\ub3d9\uc131 L\uc744 \uc81c\uacf5\ud560 \uc218 \uc788\ub2e4'),"\ub294 \uac83\uc774\ub2e4."),(0,l.yg)("h4",{id:"real-vs-virtual-reserves"},"Real vs Virtual Reserves"),(0,l.yg)("p",null,"V3\uc5d0\uc11c LP\uac00 \ubc94\uc704 ","[Pa, Pb]","\uc5d0 \uc720\ub3d9\uc131 L\uc744 \uacf5\uae09\ud560 \ub54c \ud544\uc694\ud55c \ud1a0\ud070 \uc591\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"Virtual reserves (V2\ucc98\ub7fc \ub3d9\uc791):\nx_virtual = L / sqrt(P)\ny_virtual = L * sqrt(P)\n\nReal reserves (\uc2e4\uc81c \ud544\uc694\ud55c \ud1a0\ud070):\nx_real = L * (1/sqrt(P) - 1/sqrt(Pb))   # \uac00\uaca9\uc774 Pb\uc5d0 \ub3c4\ub2ec\ud558\uba74 x\uac00 0\uc774 \ub428\ny_real = L * (sqrt(P) - sqrt(Pa))        # \uac00\uaca9\uc774 Pa\uc5d0 \ub3c4\ub2ec\ud558\uba74 y\uac00 0\uc774 \ub428\n")),(0,l.yg)("p",null,"\ubc94\uc704\uac00 \uc881\uc744\uc218\ub85d \uc2e4\uc81c \ud544\uc694\ud55c \ud1a0\ud070(x_real, y_real)\uc774 \uc904\uc5b4\ub4e4\uc9c0\ub9cc, \uac00\uc0c1 \ub9ac\uc800\ube0c(x_virtual, y_virtual)\ub294 \uac19\uc740 L\uc744 \uc720\uc9c0\ud55c\ub2e4. \uc2a4\uc651 \uc2dc\uc5d0\ub294 \uac00\uc0c1 \ub9ac\uc800\ube0c \uae30\uc900\uc73c\ub85c \uac00\uaca9\uc774 \uacb0\uc815\ub418\ubbc0\ub85c, \uc801\uc740 \uc790\ubcf8\uc73c\ub85c \uae4a\uc740 \uc720\ub3d9\uc131 \ud6a8\uacfc\ub97c \ub0b8\ub2e4."),(0,l.yg)("h4",{id:"\ubc94\uc704-\uc774\ud0c8-\uc2dc-\ub3d9\uc791"},"\ubc94\uc704 \uc774\ud0c8 \uc2dc \ub3d9\uc791"),(0,l.yg)("p",null,"\uac00\uaca9\uc774 \ubc94\uc704\ub97c \ubc97\uc5b4\ub098\uba74 \ud3ec\uc9c0\uc158\uc740 \ub2e8\uc77c \ud1a0\ud070\uc73c\ub85c \ubcc0\ud658\ub41c\ub2e4."),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\uac00\uaca9 < Pa (\ubc94\uc704 \ud558\ub2e8 \uc774\ud0c8): y_real = 0, \uc804\ubd80 \ud1a0\ud070 X\ub85c \ubcc0\ud658"),(0,l.yg)("li",{parentName:"ul"},"\uac00\uaca9 > Pb (\ubc94\uc704 \uc0c1\ub2e8 \uc774\ud0c8): x_real = 0, \uc804\ubd80 \ud1a0\ud070 Y\ub85c \ubcc0\ud658")),(0,l.yg)("p",null,"\ubc94\uc704\ub97c \ubc97\uc5b4\ub09c \ud3ec\uc9c0\uc158\uc740 \uac70\ub798\uc5d0 \ucc38\uc5ec\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc218\uc218\ub8cc\ub3c4 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4. \uac00\uaca9\uc774 \ub2e4\uc2dc \ubc94\uc704 \uc548\uc73c\ub85c \ub4e4\uc5b4\uc624\uba74 \uac70\ub798\uc5d0 \ucc38\uc5ec\ud558\uae30 \uc2dc\uc791\ud55c\ub2e4."),(0,l.yg)("h3",{id:"tick-\uc2dc\uc2a4\ud15c"},"Tick \uc2dc\uc2a4\ud15c"),(0,l.yg)("p",null,"V3\ub294 \uc5f0\uc18d\uc801\uc778 \uac00\uaca9 \ub300\uc2e0 ",(0,l.yg)("strong",{parentName:"p"},"Tick"),"\uc774\ub77c\ub294 \uc774\uc0b0\uc801 \uac00\uaca9 \ud3ec\uc778\ud2b8\ub97c \uc0ac\uc6a9\ud55c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"Tick: ..., -2, -1, 0, 1, 2, ...\n\n\uac01 Tick\uc740 \ud2b9\uc815 \uac00\uaca9\uc5d0 \ub300\uc751:\nprice(i) = 1.0001^i\n\nTick 0  \u2192 \uac00\uaca9 1.0\nTick 1  \u2192 \uac00\uaca9 1.0001\nTick 100 \u2192 \uac00\uaca9 1.0100\nTick -100 \u2192 \uac00\uaca9 0.9900\n")),(0,l.yg)("p",null,"LP\ub294 \ub450 Tick\uc744 \uc120\ud0dd\ud558\uc5ec \uc720\ub3d9\uc131 \ubc94\uc704\ub97c \uc9c0\uc815\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 Tick -100 ~ +100\uc740 \uac00\uaca9 0.99 ~ 1.01 \ubc94\uc704\ub97c \uc758\ubbf8\ud55c\ub2e4."),(0,l.yg)("h4",{id:"tick-spacing"},"Tick Spacing"),(0,l.yg)("p",null,"\ubaa8\ub4e0 Tick\uc5d0\uc11c \uc720\ub3d9\uc131\uc744 \uc124\uc815\ud560 \uc218 \uc788\ub2e4\uba74, \uac01 Tick\ub9c8\ub2e4 \uc0c1\ud0dc\ub97c \uc5c5\ub370\uc774\ud2b8\ud574\uc57c \ud574\uc11c \uac00\uc2a4 \ube44\uc6a9\uc774 \ud3ed\uc99d\ud55c\ub2e4. V3\ub294 ",(0,l.yg)("strong",{parentName:"p"},"Tick Spacing"),"\uc744 \ub3c4\uc785\ud574 \uc0ac\uc6a9 \uac00\ub2a5\ud55c Tick\uc744 \uc81c\ud55c\ud55c\ub2e4."),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"\uc218\uc218\ub8cc"),(0,l.yg)("th",{parentName:"tr",align:null},"Tick Spacing"),(0,l.yg)("th",{parentName:"tr",align:null},"\ubc94\uc704\ub2f9 Tick \uc218"),(0,l.yg)("th",{parentName:"tr",align:null},"\uc124\uacc4 \uc758\ub3c4"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"0.01%"),(0,l.yg)("td",{parentName:"tr",align:null},"1"),(0,l.yg)("td",{parentName:"tr",align:null},"\ubaa8\ub4e0 Tick"),(0,l.yg)("td",{parentName:"tr",align:null},"\ucd5c\uace0 \uc815\ubc00\ub3c4, \uc2a4\ud14c\uc774\ube14\ucf54\uc778 \uc804\uc6a9")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"0.05%"),(0,l.yg)("td",{parentName:"tr",align:null},"10"),(0,l.yg)("td",{parentName:"tr",align:null},"1/10"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc2a4\ud14c\uc774\ube14\ucf54\uc778 (\uc815\ubc00\ud55c \ubc94\uc704 \ud544\uc694)")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"0.30%"),(0,l.yg)("td",{parentName:"tr",align:null},"60"),(0,l.yg)("td",{parentName:"tr",align:null},"1/60"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc77c\ubc18 \ud398\uc5b4 (\uac00\uc2a4/\uc815\ubc00\ub3c4 \uade0\ud615)")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"1.00%"),(0,l.yg)("td",{parentName:"tr",align:null},"200"),(0,l.yg)("td",{parentName:"tr",align:null},"1/200"),(0,l.yg)("td",{parentName:"tr",align:null},"\ubcc0\ub3d9\uc131 \ub192\uc740 \ud398\uc5b4 (\ub113\uc740 \ubc94\uc704)")))),(0,l.yg)("p",null,"Tick Spacing\uc774 60\uc774\uba74 ..., -120, -60, 0, 60, 120, ... \uc774\ub7f0 Tick\ub9cc \ubc94\uc704 \uacbd\uacc4\ub85c \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4. \ub0ae\uc740 \uc218\uc218\ub8cc \ud480\uc740 \uc881\uc740 \ubc94\uc704\uc5d0\uc11c \uc815\uad50\ud55c LP \uc804\ub7b5\uc774 \ud544\uc694\ud558\ubbc0\ub85c \uc138\ubc00\ud55c Tick\uc744, \ub192\uc740 \uc218\uc218\ub8cc \ud480\uc740 \uc5b4\ucc28\ud53c \ub113\uc740 \ubc94\uc704\ub97c \uc4f0\ubbc0\ub85c \uac70\uce5c Tick\uc744 \uc81c\uacf5\ud55c\ub2e4."),(0,l.yg)("h4",{id:"initialized-tick"},"Initialized Tick"),(0,l.yg)("p",null,"\ubaa8\ub4e0 Tick\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uba74 \uba54\ubaa8\ub9ac \ub0ad\ube44\ub2e4. V3\ub294 ",(0,l.yg)("strong",{parentName:"p"},"\uc720\ub3d9\uc131 \ubcc0\ud654\uac00 \uc788\ub294 Tick\ub9cc \ucd08\uae30\ud654"),"\ud55c\ub2e4. \uc774\ub97c Initialized Tick\uc774\ub77c \ud55c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"\uc608: \uc5b4\ub5a4 LP\uac00 Tick 100~200 \ubc94\uc704\uc5d0 \uc720\ub3d9\uc131 \uacf5\uae09\n\nTick 100: liquidityNet = +1000 (\uc774 Tick\uc744 \uc9c0\ub098\uac08 \ub54c \uc720\ub3d9\uc131 +1000)\nTick 200: liquidityNet = -1000 (\uc774 Tick\uc744 \uc9c0\ub098\uac08 \ub54c \uc720\ub3d9\uc131 -1000)\n\n\uc911\uac04\uc758 Tick 101~199\ub294 \ucd08\uae30\ud654\ud558\uc9c0 \uc54a\uc74c\n")),(0,l.yg)("p",null,"\uc2a4\uc651\uc774 Tick\uc744 \uc9c0\ub098\uac08 \ub54c \ud574\ub2f9 Tick\uc758 ",(0,l.yg)("inlineCode",{parentName:"p"},"liquidityNet"),"\uc744 \ud604\uc7ac \uc720\ub3d9\uc131\uc5d0 \ub354\ud558\uac70\ub098 \ube7c\uba74\uc11c \uc720\ub3d9\uc131\uc744 \ucd94\uc801\ud55c\ub2e4."),(0,l.yg)("h3",{id:"sqrtpricex96"},"sqrtPriceX96"),(0,l.yg)("p",null,"V3\ub294 \uac00\uaca9\uc744 \uc9c1\uc811 \uc800\uc7a5\ud558\uc9c0 \uc54a\uace0 ",(0,l.yg)("strong",{parentName:"p"},"sqrtPriceX96"),"\uc744 \uc800\uc7a5\ud55c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"sqrtPriceX96 = sqrt(price) * 2^96\n")),(0,l.yg)("h4",{id:"\uc65c-\uc81c\uacf1\uadfc\uc778\uac00"},"\uc65c \uc81c\uacf1\uadfc\uc778\uac00?"),(0,l.yg)("p",null,"\uc720\ub3d9\uc131 \uacc4\uc0b0 \uacf5\uc2dd\uc744 \ub2e4\uc2dc \ubcf4\uc790."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"x = L / sqrt(P)\ny = L * sqrt(P)\n")),(0,l.yg)("p",null,"\ud1a0\ud070 \uc591\uc744 \uacc4\uc0b0\ud560 \ub54c \ud56d\uc0c1 ",(0,l.yg)("inlineCode",{parentName:"p"},"sqrt(P)"),"\uac00 \ud544\uc694\ud558\ub2e4. \uac00\uaca9 P\ub97c \uc800\uc7a5\ud558\uba74 \ub9e4\ubc88 \uc81c\uacf1\uadfc \uc5f0\uc0b0(\uac00\uc2a4 \ube44\uc308)\uc744 \ud574\uc57c \ud55c\ub2e4. ",(0,l.yg)("inlineCode",{parentName:"p"},"sqrt(P)"),"\ub97c \uc800\uc7a5\ud558\uba74 \ubc14\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."),(0,l.yg)("p",null,"\ub610\ud55c \uc2a4\uc651 \uc2dc \uac00\uaca9 \ubcc0\ud654\ub7c9 \uacc4\uc0b0\uc5d0\uc11c\ub3c4 \uc81c\uacf1\uadfc \ud615\ud0dc\uac00 \ub354 \ud3b8\ub9ac\ud558\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"deltaX = L * (1/sqrt(P_new) - 1/sqrt(P_old))\ndeltaY = L * (sqrt(P_new) - sqrt(P_old))\n")),(0,l.yg)("h4",{id:"\uc65c-296\uc778\uac00"},"\uc65c 2^96\uc778\uac00?"),(0,l.yg)("p",null,"Solidity\ub294 \ubd80\ub3d9\uc18c\uc218\uc810\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c ",(0,l.yg)("strong",{parentName:"p"},"\uace0\uc815\uc18c\uc218\uc810(Fixed-Point)")," \ud45c\uae30\ub97c \uc0ac\uc6a9\ud55c\ub2e4. 2^96\uc744 \uacf1\ud574 \uc815\uc218\ub85c \ud45c\ud604\ud558\uba74 \ucda9\ubd84\ud55c \uc815\ubc00\ub3c4\ub97c \ud655\ubcf4\ud558\uba74\uc11c uint160 \ubc94\uc704 \ub0b4\uc5d0\uc11c \uc5f0\uc0b0\ud560 \uc218 \uc788\ub2e4."),(0,l.yg)("h3",{id:"v3-\uc2a4\uc651-\uba54\ucee4\ub2c8\uc998"},"V3 \uc2a4\uc651 \uba54\ucee4\ub2c8\uc998"),(0,l.yg)("p",null,"V3 \uc2a4\uc651\uc740 V2\ubcf4\ub2e4 \ubcf5\uc7a1\ud558\ub2e4. \uac00\uaca9 \ubc94\uc704\ub97c \ub118\ub098\ub4e4\uba70 \uc5ec\ub7ec \ud3ec\uc9c0\uc158\uc758 \uc720\ub3d9\uc131\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \uc18c\ube44\ud558\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,l.yg)("h4",{id:"\uc2a4\uc651-\ud750\ub984"},"\uc2a4\uc651 \ud750\ub984"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"\uc2a4\uc651 \uc694\uccad: 1 ETH \u2192 USDC\n\n1. \ud604\uc7ac \uac00\uaca9(Tick)\uc5d0\uc11c \uc2dc\uc791\n2. \ud604\uc7ac \ud65c\uc131 \uc720\ub3d9\uc131(L)\uc73c\ub85c \uc2a4\uc651 \uac00\ub2a5\ud55c \ub9cc\ud07c \uc2a4\uc651\n3. \uac00\uaca9\uc774 \ub2e4\uc74c \ucd08\uae30\ud654\ub41c Tick\uc5d0 \ub3c4\ub2ec\ud558\uba74:\n   - \ud574\ub2f9 Tick\uc758 liquidityNet\uc744 \ud604\uc7ac L\uc5d0 \uc801\uc6a9\n   - \uc0c8\ub85c\uc6b4 L\ub85c \uc2a4\uc651 \uacc4\uc18d\n4. \uc785\ub825 \ud1a0\ud070\uc774 \uc18c\uc9c4\ub420 \ub54c\uae4c\uc9c0 \ubc18\ubcf5\n")),(0,l.yg)("p",null,"\uc608\ub97c \ub4e4\uc5b4 ETH\ub97c USDC\ub85c \uc2a4\uc651\ud558\uba74 \uac00\uaca9\uc774 \ud558\ub77d\ud55c\ub2e4(ETH \uacf5\uae09 \uc99d\uac00, USDC \uc218\uc694 \uc99d\uac00). \uac00\uaca9\uc774 \ud558\ub77d\ud558\uba70 \uc5ec\ub7ec LP \ud3ec\uc9c0\uc158\uc758 \ubc94\uc704\ub97c \uc9c0\ub098\uac08 \uc218 \uc788\ub2e4."),(0,l.yg)("h4",{id:"liquidity-\ubcc0\uc218\uc758-\uc758\ubbf8"},"liquidity \ubcc0\uc218\uc758 \uc758\ubbf8"),(0,l.yg)("p",null,"Pool\uc758 ",(0,l.yg)("inlineCode",{parentName:"p"},"liquidity")," \uc0c1\ud0dc \ubcc0\uc218\ub294 ",(0,l.yg)("strong",{parentName:"p"},"\ud604\uc7ac \uac00\uaca9\uc774 \uc18d\ud55c \ubc94\uc704\uc5d0 \uac78\uce5c \ubaa8\ub4e0 \ud3ec\uc9c0\uc158\uc758 \uc720\ub3d9\uc131 \ud569"),"\uc774\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity"},"// \ud604\uc7ac Tick = 100\uc774\uace0, \uc544\ub798 \ud3ec\uc9c0\uc158\ub4e4\uc774 \uc788\ub2e4\uba74:\n// \ud3ec\uc9c0\uc158 A: Tick 50~150, L = 1000\n// \ud3ec\uc9c0\uc158 B: Tick 80~120, L = 2000\n// \ud3ec\uc9c0\uc158 C: Tick 200~300, L = 500 (\ud604\uc7ac \ubc94\uc704 \ubc16)\n\n// liquidity = 1000 + 2000 = 3000\n// (\ud3ec\uc9c0\uc158 C\ub294 \ud604\uc7ac \uac00\uaca9\uc774 \ubc94\uc704 \ubc16\uc774\ubbc0\ub85c \uc81c\uc678)\n")),(0,l.yg)("p",null,"\uc2a4\uc651\uc774 Tick\uc744 \uc9c0\ub098\uac08 \ub54c\ub9c8\ub2e4 ",(0,l.yg)("inlineCode",{parentName:"p"},"liquidity"),"\uac00 \uc5c5\ub370\uc774\ud2b8\ub41c\ub2e4. \uc774 \uac12\uc774 \ud074\uc218\ub85d \ud574\ub2f9 \uac00\uaca9\ub300\uc758 \uc2ac\ub9ac\ud53c\uc9c0\uac00 \uc791\uc544\uc9c4\ub2e4."),(0,l.yg)("h4",{id:"\ub2e8\uc77c-tick-\ub0b4-\uc2a4\uc651-\uacc4\uc0b0"},"\ub2e8\uc77c Tick \ub0b4 \uc2a4\uc651 \uacc4\uc0b0"),(0,l.yg)("p",null,"\uac00\uaca9\uc774 \ud558\ub098\uc758 Tick \ubc94\uc704 \ub0b4\uc5d0\uc11c\ub9cc \uc6c0\uc9c1\uc774\ub294 \uacbd\uc6b0, V2\uc640 \uc720\uc0ac\ud558\uac8c \uacc4\uc0b0\ub41c\ub2e4."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"X\ub97c Y\ub85c \uc2a4\uc651\ud560 \ub54c (\uac00\uaca9 \ud558\ub77d \ubc29\ud5a5):\ndeltaY = L * (sqrt(P_old) - sqrt(P_new))\n\nY\ub97c X\ub85c \uc2a4\uc651\ud560 \ub54c (\uac00\uaca9 \uc0c1\uc2b9 \ubc29\ud5a5):\ndeltaX = L * (1/sqrt(P_new) - 1/sqrt(P_old))\n")),(0,l.yg)("p",null,(0,l.yg)("inlineCode",{parentName:"p"},"L"),"\uc774 \ud074\uc218\ub85d \uac19\uc740 \uac00\uaca9 \ubcc0\ud654\uc5d0 \ub354 \ub9ce\uc740 \ud1a0\ud070\uc744 \uad50\ud658\ud560 \uc218 \uc788\ub2e4. \uc774\uac83\uc774 concentrated liquidity\uc758 \ud575\uc2ec\uc774\ub2e4. \uc881\uc740 \ubc94\uc704\uc5d0 L\uc744 \uc9d1\uc911\ud558\uba74 \ud574\ub2f9 \ubc94\uc704\uc5d0\uc11c \uae4a\uc740 \uc720\ub3d9\uc131(\ub0ae\uc740 \uc2ac\ub9ac\ud53c\uc9c0)\uc744 \uc81c\uacf5\ud55c\ub2e4."),(0,l.yg)("h3",{id:"\ub2e4\uc911-\uc218\uc218\ub8cc-\ud2f0\uc5b4"},"\ub2e4\uc911 \uc218\uc218\ub8cc \ud2f0\uc5b4"),(0,l.yg)("p",null,"V2\ub294 0.3% \uace0\uc815\uc774\uc5c8\uc9c0\ub9cc, V3\ub294 \uc138 \uac00\uc9c0 \uc218\uc218\ub8cc \ud2f0\uc5b4\ub97c \uc81c\uacf5\ud55c\ub2e4."),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"\ud2f0\uc5b4"),(0,l.yg)("th",{parentName:"tr",align:null},"\uc801\ud569\ud55c \ud398\uc5b4"),(0,l.yg)("th",{parentName:"tr",align:null},"\uc774\uc720"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"0.05%"),(0,l.yg)("td",{parentName:"tr",align:null},"USDC/DAI"),(0,l.yg)("td",{parentName:"tr",align:null},"\uac00\uaca9 \ubcc0\ub3d9 \uac70\uc758 \uc5c6\uc74c, \ub0ae\uc740 IL")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"0.30%"),(0,l.yg)("td",{parentName:"tr",align:null},"ETH/USDC"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc77c\ubc18\uc801\uc778 \ubcc0\ub3d9\uc131")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"1.00%"),(0,l.yg)("td",{parentName:"tr",align:null},"SHIB/ETH"),(0,l.yg)("td",{parentName:"tr",align:null},"\ub192\uc740 \ubcc0\ub3d9\uc131, \ub192\uc740 IL \ubcf4\uc0c1 \ud544\uc694")))),(0,l.yg)("h3",{id:"nft-\uae30\ubc18-\ud3ec\uc9c0\uc158"},"NFT \uae30\ubc18 \ud3ec\uc9c0\uc158"),(0,l.yg)("p",null,"V2\uc5d0\uc11c LP \ud1a0\ud070\uc740 ERC-20\uc774\uc5c8\ub2e4. \ubaa8\ub4e0 LP\uac00 \ub3d9\uc77c\ud55c \ubc94\uc704(\uc804\uccb4)\uc5d0 \uc720\ub3d9\uc131\uc744 \uc81c\uacf5\ud558\ubbc0\ub85c, \ub300\uccb4 \uac00\ub2a5(fungible)\ud588\ub2e4."),(0,l.yg)("p",null,"V3\uc5d0\uc11c \uac01 LP \ud3ec\uc9c0\uc158\uc740 \uace0\uc720\ud55c \ubc94\uc704\ub97c \uac00\uc9c0\ubbc0\ub85c, ",(0,l.yg)("strong",{parentName:"p"},"ERC-721 NFT"),"\ub85c \ud45c\ud604\ub41c\ub2e4."),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"token0, token1 (\ud1a0\ud070 \uc30d)"),(0,l.yg)("li",{parentName:"ul"},"tickLower, tickUpper (\uac00\uaca9 \ubc94\uc704)"),(0,l.yg)("li",{parentName:"ul"},"liquidity (\uc720\ub3d9\uc131 \uc591)"),(0,l.yg)("li",{parentName:"ul"},"feeGrowthInside (\uc218\uc218\ub8cc \ub204\uc801)")),(0,l.yg)("h3",{id:"v3-pool-\uad6c\uc870"},"V3 Pool \uad6c\uc870"),(0,l.yg)("p",null,"V3 Pool\uc758 \ud575\uc2ec \uc0c1\ud0dc \ubcc0\uc218\ub97c \uc0b4\ud3b4\ubcf4\uc790."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity",metastring:'title="UniswapV3Pool.sol - \uc0c1\ud0dc \ubcc0\uc218"',title:'"UniswapV3Pool.sol',"-":!0,"\uc0c1\ud0dc":!0,'\ubcc0\uc218"':!0},"// \ud604\uc7ac \uac00\uaca9\uacfc \ud2f1 \uc815\ubcf4\ub97c \ub2f4\uc740 \uc2ac\ub86f\nstruct Slot0 {\n    uint160 sqrtPriceX96;           // \ud604\uc7ac \uac00\uaca9\uc758 \uc81c\uacf1\uadfc * 2^96\n    int24 tick;                      // \ud604\uc7ac \ud2f1\n    uint16 observationIndex;         // \uc624\ub77c\ud074 \uad00\uce21 \uc778\ub371\uc2a4\n    uint16 observationCardinality;   // \uc624\ub77c\ud074 \ubc30\uc5f4 \ud06c\uae30\n    uint16 observationCardinalityNext;\n    uint8 feeProtocol;              // \ud504\ub85c\ud1a0\ucf5c \uc218\uc218\ub8cc\n    bool unlocked;                   // \uc7ac\uc9c4\uc785 \ubc29\uc9c0\n}\nSlot0 public slot0;\n\n// \ud604\uc7ac \ud65c\uc131 \uc720\ub3d9\uc131 (\ud604\uc7ac \uac00\uaca9 \ubc94\uc704\uc5d0 \uac78\uce5c \uc720\ub3d9\uc131 \ud569\uacc4)\nuint128 public liquidity;\n\n// \ud2f1\ubcc4 \uc815\ubcf4: \ud574\ub2f9 \ud2f1\uc744 \uacbd\uacc4\ub85c \ud558\ub294 \ud3ec\uc9c0\uc158\ub4e4\uc758 \uc720\ub3d9\uc131 \ud569\nmapping(int24 => Tick.Info) public ticks;\n\n// \ud3ec\uc9c0\uc158\ubcc4 \uc815\ubcf4: (owner, tickLower, tickUpper) \u2192 \ud3ec\uc9c0\uc158 \ub370\uc774\ud130\nmapping(bytes32 => Position.Info) public positions;\n")),(0,l.yg)("h2",{id:"\ud14c\uc2a4\ud2b8"},"\ud14c\uc2a4\ud2b8"),(0,l.yg)("p",null,"\uba54\uc778\ub137 \ud3ec\ud06c \ud658\uacbd\uc5d0\uc11c V2 \uacf5\uc2dd\uc744 \uac80\uc99d\ud558\uace0 V2/V3 \uc2a4\uc651 \uacb0\uacfc\ub97c \ube44\uad50\ud574\ubcf4\uc790."),(0,l.yg)(r.A,{mdxType:"Tabs"},(0,l.yg)(i.A,{value:"v2-formula",label:"V2 \uacf5\uc2dd \uac80\uc99d",mdxType:"TabItem"},(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity",metastring:'title="UniswapComparison.t.sol"',title:'"UniswapComparison.t.sol"'},"function test_V2_GetAmountOutFormula() public view {\n    uint256 amountIn = 1 ether;\n\n    // V2 \uacf5\uc2dd \uc9c1\uc811 \uacc4\uc0b0\n    uint256 amountInWithFee = amountIn * 997;\n    uint256 numerator = amountInWithFee * reserveOut;\n    uint256 denominator = reserveIn * 1000 + amountInWithFee;\n    uint256 amountOut = numerator / denominator;\n\n    // Router\uc758 \uacb0\uacfc\uc640 \ube44\uad50\n    uint256[] memory routerAmounts = v2Router.getAmountsOut(amountIn, path);\n    assertEq(amountOut, routerAmounts[1]);\n}\n"))),(0,l.yg)(i.A,{value:"swap-comparison",label:"V2 vs V3 \uc2a4\uc651 \ube44\uad50",mdxType:"TabItem"},(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-solidity",metastring:'title="UniswapComparison.t.sol"',title:'"UniswapComparison.t.sol"'},"function test_SwapComparison() public {\n    uint256 amountIn = 1 ether;\n    uint256 halfAmount = amountIn / 2;\n\n    // V2 \uc2a4\uc651\n    IERC20(WETH).approve(address(v2Router), halfAmount);\n    v2Router.swapExactTokensForTokens(halfAmount, 0, path, address(this), block.timestamp);\n    uint256 v2Output = IERC20(USDC).balanceOf(address(this));\n\n    // V3 \uc2a4\uc651\n    IERC20(WETH).approve(address(v3Router), halfAmount);\n    uint256 v3Output = v3Router.exactInputSingle(\n        ISwapRouter.ExactInputSingleParams({\n            tokenIn: WETH,\n            tokenOut: USDC,\n            fee: 3000,\n            recipient: address(this),\n            deadline: block.timestamp,\n            amountIn: halfAmount,\n            amountOutMinimum: 0,\n            sqrtPriceLimitX96: 0\n        })\n    );\n}\n")))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"npm run test:uniswap\n")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre"},"[PASS] test_V2_GetAmountOutFormula()\n  amountIn: 1000000000000000000\n  reserveIn (WETH): 3563038037535649675241\n  reserveOut (USDC): 11441088302021\n\n  amountOut = (amountIn * 997 * reserveOut) / (reserveIn * 1000 + amountIn * 997)\n  Router getAmountsOut: 3200519893\n  Manual calculation:   3200519893\n  Match: true\n\n[PASS] test_SwapComparison()\n  === Swap Comparison: 1 WETH -> USDC ===\n  V2 actual output (0.5 WETH): 1600483805 USDC\n  V3 actual output (0.5 WETH): 1600561197 USDC\n\n  V3 gave 77392 more USDC (0.005% more efficient)\n")),(0,l.yg)("p",null,"V3\uac00 \ub3d9\uc77c \uc785\ub825\uc5d0 \ub354 \ub9ce\uc740 \ucd9c\ub825\uc744 \uc8fc\ub294 \uc774\uc720\ub294 concentrated liquidity \ub355\ubd84\uc5d0 \ud604\uc7ac \uac00\uaca9\ub300\uc758 \uc720\ub3d9\uc131\uc774 \ub354 \uae4a\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,l.yg)("p",null,"\uc804\uccb4 \ucf54\ub4dc\ub294 ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/chihunmanse/crypto-examples/tree/main/solidity-examples/test/foundry"},"crypto-examples/solidity-examples"),"\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4."),(0,l.yg)("h2",{id:"\uc815\ub9ac"},"\uc815\ub9ac"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"\ud56d\ubaa9"),(0,l.yg)("th",{parentName:"tr",align:null},"V2"),(0,l.yg)("th",{parentName:"tr",align:null},"V3"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\uc720\ub3d9\uc131 \ubd84\ud3ec"),(0,l.yg)("td",{parentName:"tr",align:null},"0 ~ \u221e \uc804 \ubc94\uc704 \uade0\uc77c"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc0ac\uc6a9\uc790 \uc9c0\uc815 \ubc94\uc704 \uc9d1\uc911")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\uc790\ubcf8 \ud6a8\uc728\uc131"),(0,l.yg)("td",{parentName:"tr",align:null},"\uae30\uc900 (1x)"),(0,l.yg)("td",{parentName:"tr",align:null},"\ucd5c\ub300 4000x")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"LP \ud1a0\ud070"),(0,l.yg)("td",{parentName:"tr",align:null},"ERC-20 (\ub300\uccb4 \uac00\ub2a5)"),(0,l.yg)("td",{parentName:"tr",align:null},"ERC-721 NFT (\uace0\uc720)")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\uc218\uc218\ub8cc"),(0,l.yg)("td",{parentName:"tr",align:null},"0.3% \uace0\uc815"),(0,l.yg)("td",{parentName:"tr",align:null},"0.05%, 0.3%, 1% \uc120\ud0dd")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"LP \uad00\ub9ac"),(0,l.yg)("td",{parentName:"tr",align:null},"Passive (\uc124\uc815 \ud6c4 \ubc29\uce58)"),(0,l.yg)("td",{parentName:"tr",align:null},"Active (\ubc94\uc704 \uc870\uc815 \ud544\uc694)")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\ube44\uc601\uad6c\uc801 \uc190\uc2e4"),(0,l.yg)("td",{parentName:"tr",align:null},"\uae30\ubcf8"),(0,l.yg)("td",{parentName:"tr",align:null},"\ubc94\uc704 \uc774\ud0c8 \uc2dc \uc99d\ud3ed")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\uac00\uc2a4 \ube44\uc6a9"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc0c1\ub300\uc801 \uc800\ub834"),(0,l.yg)("td",{parentName:"tr",align:null},"\uc0c1\ub300\uc801 \ube44\uc308")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"\ubcf5\uc7a1\ub3c4"),(0,l.yg)("td",{parentName:"tr",align:null},"\ub2e8\uc21c"),(0,l.yg)("td",{parentName:"tr",align:null},"\ubcf5\uc7a1")))),(0,l.yg)("h3",{id:"\ucc38\uace0-\uc790\ub8cc"},"\ucc38\uace0 \uc790\ub8cc"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://app.uniswap.org/whitepaper.pdf"},"Uniswap V2 Whitepaper")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://app.uniswap.org/whitepaper-v3.pdf"},"Uniswap V3 Whitepaper")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://docs.uniswap.org/contracts/v2/concepts/protocol-overview/how-uniswap-works"},"Uniswap Docs - How Uniswap Works")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://docs.uniswap.org/concepts/protocol/concentrated-liquidity"},"Uniswap Docs - Concentrated Liquidity")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://rareskills.io/post/uniswap-v3-concentrated-liquidity"},"RareSkills - Uniswap V3 Concentrated Liquidity"))))}m.isMDXComponent=!0}}]);