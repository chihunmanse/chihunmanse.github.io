"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8856],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>g});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),c=p(t),m=r,g=c["".concat(s,".").concat(m)]||c[m]||u[m]||l;return t?a.createElement(g,o(o({ref:n},d),{},{components:t})):a.createElement(g,o({ref:n},d))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[c]="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5162:(e,n,t)=>{t.d(n,{Z:()=>o});var a=t(7294),r=t(6010);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:n,hidden:t,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(l.tabItem,o),hidden:t},n)}},4866:(e,n,t)=>{t.d(n,{Z:()=>x});var a=t(7462),r=t(7294),l=t(6010),o=t(2466),i=t(6550),s=t(1980),p=t(7392),d=t(12);function c(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}function u(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??c(t);return function(e){const n=(0,p.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const a=(0,i.k6)(),l=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s._X)(l),(0,r.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(a.location.search);n.set(l,e),a.replace({...a.location,search:n.toString()})}),[l,a])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,l=u(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:l}))),[s,p]=g({queryString:t,groupId:a}),[c,b]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,l]=(0,d.Nk)(t);return[a,(0,r.useCallback)((e=>{t&&l.set(e)}),[t,l])]}({groupId:a}),h=(()=>{const e=s??c;return m({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{h&&i(h)}),[h]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),p(e),b(e)}),[p,b,l]),tabValues:l}}var h=t(2389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:n,block:t,selectedValue:i,selectValue:s,tabValues:p}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),u=e=>{const n=e.currentTarget,t=d.indexOf(n),a=p[t].value;a!==i&&(c(n),s(a))},m=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;n=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;n=d[t]??d[d.length-1];break}}n?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":t},n)},p.map((e=>{let{value:n,label:t,attributes:o}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,key:n,ref:e=>d.push(e),onKeyDown:m,onClick:u},o,{className:(0,l.Z)("tabs__item",f.tabItem,o?.className,{"tabs__item--active":i===n})}),t??n)})))}function y(e){let{lazy:n,children:t,selectedValue:a}=e;const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function v(e){const n=b(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",f.tabList)},r.createElement(k,(0,a.Z)({},e,n)),r.createElement(y,(0,a.Z)({},e,n)))}function x(e){const n=(0,h.Z)();return r.createElement(v,(0,a.Z)({key:String(n)},e))}},557:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var a=t(7462),r=(t(7294),t(3905)),l=t(4866),o=t(5162);const i={title:"2. ERC1967, TransparentProxy, UUPS",description:"writing upgradeable contract with solidity.",keywords:["solidity","ethereum","contract","blockchain","ERC1967","TransparentProxy","UUPS"],tags:["Solidity"],sidebar_position:2},s="2. ERC1967, TransparentProxy, UUPS",p={unversionedId:"blockchain/upgradeable-contract/2",id:"blockchain/upgradeable-contract/2",title:"2. ERC1967, TransparentProxy, UUPS",description:"writing upgradeable contract with solidity.",source:"@site/docs/blockchain/upgradeable-contract/2.mdx",sourceDirName:"blockchain/upgradeable-contract",slug:"/blockchain/upgradeable-contract/2",permalink:"/blockchain/upgradeable-contract/2",draft:!1,tags:[{label:"Solidity",permalink:"/tags/solidity"}],version:"current",sidebarPosition:2,frontMatter:{title:"2. ERC1967, TransparentProxy, UUPS",description:"writing upgradeable contract with solidity.",keywords:["solidity","ethereum","contract","blockchain","ERC1967","TransparentProxy","UUPS"],tags:["Solidity"],sidebar_position:2},sidebar:"docs",previous:{title:"1. Migration, DelegateCall",permalink:"/blockchain/upgradeable-contract/1"},next:{title:"Contract Error Handling",permalink:"/blockchain/contract-errorhandling"}},d={},c=[{value:"fallback \ud568\uc218",id:"fallback-\ud568\uc218",level:3},{value:"ERC1967",id:"erc1967",level:2},{value:"\uc0dd\uc131\uc790 \ud568\uc218",id:"\uc0dd\uc131\uc790-\ud568\uc218",level:3},{value:"\ud568\uc218 \ucda9\ub3cc",id:"\ud568\uc218-\ucda9\ub3cc",level:3},{value:"\ucee8\ud2b8\ub799\ud2b8\uac00 \ud568\uc218\ub97c \uc2dd\ubcc4\ud558\ub294 \ubc29\uc2dd",id:"\ucee8\ud2b8\ub799\ud2b8\uac00-\ud568\uc218\ub97c-\uc2dd\ubcc4\ud558\ub294-\ubc29\uc2dd",level:3},{value:"TransparentProxy",id:"transparentproxy",level:2},{value:"\ud504\ub85d\uc2dc \uc5b4\ub4dc\ubbfc",id:"\ud504\ub85d\uc2dc-\uc5b4\ub4dc\ubbfc",level:3},{value:"@openzeppelin/hardhat-upgrades",id:"openzeppelinhardhat-upgrades",level:3},{value:"\ud22c\uba85\ud504\ub85d\uc2dc\uc758 \ub2e8\uc810",id:"\ud22c\uba85\ud504\ub85d\uc2dc\uc758-\ub2e8\uc810",level:3},{value:"UUPS",id:"uups",level:2},{value:"\ub9fa\uc74c\ub9d0",id:"\ub9fa\uc74c\ub9d0",level:2},{value:"\uc2a4\ub9c8\ud2b8 \ucee8\ud2b8\ub799\ud2b8\uc758 \ubd88\ubcc0\uc131",id:"\uc2a4\ub9c8\ud2b8-\ucee8\ud2b8\ub799\ud2b8\uc758-\ubd88\ubcc0\uc131",level:3}],u={toc:c},m="wrapper";function g(e){let{components:n,...t}=e;return(0,r.kt)(m,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"2-erc1967-transparentproxy-uups"},"2. ERC1967, TransparentProxy, UUPS"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/blockchain/upgradeable-contract/1"},"\uc774\uc804 \uae00"),"\uc5d0 \uc774\uc5b4\uc11c \ud504\ub85d\uc2dc \ud328\ud134\uc5d0 \ub300\ud574 \ubcf8\uaca9\uc801\uc73c\ub85c \uc0b4\ud3b4\ubcf4\ub824\uace0 \ud55c\ub2e4."),(0,r.kt)("p",null,"\ud504\ub85d\uc2dc \ud328\ud134\uc740 \uae30\ubcf8\uc801\uc73c\ub85c delegatecall \uacfc fallback \ud568\uc218\uc758 \uc870\ud569\uc744 \ud1b5\ud574 \uad6c\ud604\ub41c\ub2e4."),(0,r.kt)("h3",{id:"fallback-\ud568\uc218"},"fallback \ud568\uc218"),(0,r.kt)("p",null,"fallback \ud568\uc218\ub780 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud568\uc218\uac00 \ud638\ucd9c\ub418\uc5c8\uc744 \uacbd\uc6b0 \ub300\uc2e0\ud574\uc11c \ud638\ucd9c\ub418\ub294 \ud568\uc218\uc774\ub2e4."),(0,r.kt)("p",null,"0.6 \uc774\uc804\uc758 fallback \ud568\uc218"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"function() external payable {}\n")),(0,r.kt)("p",null,"0.6 \uc774\ud6c4\uc758 fallback \ud568\uc218"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"fallback : \ud638\ucd9c\ub41c \ud568\uc218\uac00 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc744\ub54c \uc791\ub3d9\ud558\ub294 \ud568\uc218"),(0,r.kt)("li",{parentName:"ul"},"receive : calldata \uc5c6\uc774 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc774\ub354\uac00 \uc804\uc1a1\ub410\uc744 \ub54c \uc791\ub3d9\ud558\ub294 \ud568\uc218")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"fallback() external payable {}\nreceive() external payable {}\n")),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\uc624\ud508\uc7ac\ud50c\ub9b0\uc758 ERC1967Proxy, TransparentProxy, UUPS \ub4f1 \ud504\ub85d\uc2dc \ud328\ud134\uc744 \uad6c\ud604\ud55c \uc5ec\ub7ec \ubc29\uc2dd\ub4e4\uc740 \ubaa8\ub450 Proxy \ucd94\uc0c1 \ucee8\ud2b8\ub799\ud2b8\ub97c \uae30\ubc18\uc73c\ub85c \uad6c\ud604\ub418\uc5b4\uc788\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="openzeppelin-contracts/contracts/proxy/Proxy.sol"',title:'"openzeppelin-contracts/contracts/proxy/Proxy.sol"'},"// SPDX-License-Identifier: MIT\n// OpenZeppelin Contracts (last updated v4.6.0) (proxy/Proxy.sol)\n\npragma solidity ^0.8.0;\n\n/**\n * @dev This abstract contract provides a fallback function that delegates all calls to another contract using the EVM\n * instruction `delegatecall`. We refer to the second contract as the _implementation_ behind the proxy, and it has to\n * be specified by overriding the virtual {_implementation} function.\n *\n * Additionally, delegation to the implementation can be triggered manually through the {_fallback} function, or to a\n * different contract through the {_delegate} function.\n *\n * The success and return data of the delegated call will be returned back to the caller of the proxy.\n */\nabstract contract Proxy {\n    /**\n     * @dev Delegates the current call to `implementation`.\n     *\n     * This function does not return to its internal call site, it will return directly to the external caller.\n     */\n    function _delegate(address implementation) internal virtual {\n        assembly {\n            // Copy msg.data. We take full control of memory in this inline assembly\n            // block because it will not return to Solidity code. We overwrite the\n            // Solidity scratch pad at memory position 0.\n            calldatacopy(0, 0, calldatasize())\n\n            // Call the implementation.\n            // out and outsize are 0 because we don't know the size yet.\n            let result := delegatecall(gas(), implementation, 0, calldatasize(), 0, 0)\n\n            // Copy the returned data.\n            returndatacopy(0, 0, returndatasize())\n\n            switch result\n            // delegatecall returns 0 on error.\n            case 0 {\n                revert(0, returndatasize())\n            }\n            default {\n                return(0, returndatasize())\n            }\n        }\n    }\n\n    /**\n     * @dev This is a virtual function that should be overridden so it returns the address to which the fallback function\n     * and {_fallback} should delegate.\n     */\n    function _implementation() internal view virtual returns (address);\n\n    /**\n     * @dev Delegates the current call to the address returned by `_implementation()`.\n     *\n     * This function does not return to its internal call site, it will return directly to the external caller.\n     */\n    function _fallback() internal virtual {\n        _beforeFallback();\n        _delegate(_implementation());\n    }\n\n    /**\n     * @dev Fallback function that delegates calls to the address returned by `_implementation()`. Will run if no other\n     * function in the contract matches the call data.\n     */\n    fallback() external payable virtual {\n        _fallback();\n    }\n\n    /**\n     * @dev Fallback function that delegates calls to the address returned by `_implementation()`. Will run if call data\n     * is empty.\n     */\n    receive() external payable virtual {\n        _fallback();\n    }\n\n    /**\n     * @dev Hook that is called before falling back to the implementation. Can happen as part of a manual `_fallback`\n     * call, or as part of the Solidity `fallback` or `receive` functions.\n     *\n     * If overridden should call `super._beforeFallback()`.\n     */\n    function _beforeFallback() internal virtual {}\n}\n")),(0,r.kt)("p",null,"Proxy \ucee8\ud2b8\ub799\ud2b8\uc758 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uba74, ",(0,r.kt)("inlineCode",{parentName:"p"},"_delegate"),"\ub77c\ub294 \uc778\ub77c\uc778 \uc5b4\uc148\ube14\ub9ac\ub85c \uc801\ud78c \ub0b4\ubd80 \ud568\uc218\uac00 \uc788\uace0, \uc774 \ud568\uc218\ub97c fallback \ud568\uc218\uc640 receive \ud568\uc218\uc5d0\uc11c \ud638\ucd9c\ud558\uace0 \uc788\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4. \ud604\uc7ac \uc774 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c\ub294 \uc678\ubd80\uc5d0\uc11c \ud638\ucd9c\ud560 \uc218 \uc788\ub294 \ud568\uc218\ub97c \ub530\ub85c \ub9cc\ub4e4\uc5b4\ub450\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0, \uc678\ubd80\uc5d0\uc11c \uc5b4\ub5a4 calldata\ub97c \uac16\uace0 \ud638\ucd9c\ud558\ub354\ub77c\ub3c4 \uc2e4\ud589\ub418\ub294 \uac83\uc740 fallback \ud568\uc218, \uc989 ",(0,r.kt)("inlineCode",{parentName:"p"},"_beforeFallback"),"\uacfc ",(0,r.kt)("inlineCode",{parentName:"p"},"_delegate")," \ub450 \ud568\uc218\uac00 \uc2e4\ud589\ub420 \uac83\uc774\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"_delegate")," \ud568\uc218\uc5d0\ub294 \ud2b8\ub79c\uc7ad\uc158\uc5d0 \ub2f4\uae34 calldata\ub97c \ud1b5\ud558\uc5ec ",(0,r.kt)("inlineCode",{parentName:"p"},"_implementation"),"(\uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c)\uc5d0 delegatecall\uc744 \ud558\uace0, \uc131\uacf5\ud588\ub2e4\uba74 return \ub370\uc774\ud130\ub97c \ubc18\ud658\ud558\uace0 \uc2e4\ud328\ud588\ub2e4\uba74 revert \uc2dc\ud0a4\ub294 \ub85c\uc9c1\uc774 \ub2f4\uaca8\uc788\ub2e4."),(0,r.kt)("p",null,"\uc774\uc640 \uac19\uc774 delegatecall\uacfc fallback \ud568\uc218\uc758 \uc870\ud569\uc744 \ud1b5\ud558\uc5ec, \uc774\uc804 \uae00\uc5d0\uc11c\ucc98\ub7fc \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8 \ucabd\uc5d0 \ud568\uc218\ub97c \uc815\uc758\ud560 \ud544\uc694 \uc5c6\uc774, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \ucabd\uc5d0 \uc788\ub294 \ud568\uc218\ub4e4\uc744 \uc720\ub3d9\uc801\uc73c\ub85c \ud638\ucd9c\ud558\ub294 \ubc29\uc2dd\uc774 \uac00\ub2a5\ud574\uc9c4\ub2e4. \uc774 \ubc29\uc2dd\uc744 \uc801\uc6a9\ud558\uba74 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub97c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\ub294 \uacbd\uc6b0\uc5d0 \ud568\uc218\uba85\uacfc \uc778\uc790, return \ub418\ub294 \ub370\uc774\ud130\uae4c\uc9c0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc5bd\ub9e4\uc774\uc9c0 \uc54a\uace0 \uc218\uc815\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4."),(0,r.kt)("h2",{id:"erc1967"},"ERC1967"),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc \uc774\uc804 \uae00\uc5d0\uc11c \uc0b4\ud3b4\ubcf4\uc558\ub4ef\uc774, delegatecall\uc744 \uc0ac\uc6a9\ud560 \ub54c \uc2a4\ud1a0\ub9ac\uc9c0\ucda9\ub3cc\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4\ub294 \ubb38\uc81c\ub294 \uc5ec\uc804\ud788 \ud574\uacb0\ub418\uc9c0 \uc54a\uc740 \ucc44\ub85c \ub0a8\uc544\uc788\ub2e4."),(0,r.kt)("p",null,"\ud2b9\ud788 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ub2f4\uae34 \ub85c\uc9c1\uc744 \ud638\ucd9c\ud558\uae30 \uc704\ud574 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\uac12\uc774 \uaf2d \ud544\uc694\ud55c\ub370, \uc774 \uc8fc\uc18c\uac12\uc774 \ub2f4\uae34 \ubcc0\uc218\uac00 \ucda9\ub3cc\ud558\uc5ec \uc608\uc0c1\uce58 \ubabb\ud55c \uac12\uc73c\ub85c \ubcc0\uacbd\ub41c\ub2e4\uba74 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uac00 \uc81c\ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \ubabb\ud558\uac8c \ub418\ub294 \uc2ec\uac01\ud55c \ubb38\uc81c\ub85c \uc774\uc5b4\uc9c4\ub2e4."),(0,r.kt)("p",null,"\uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc624\ud508\uc7ac\ud50c\ub9b0\uc5d0\ub294 ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1967"},"ERC1967"),"\uc744 \uae30\ubc18\uc73c\ub85c\ud55c ERC1967\uc774 \uad6c\ud604\ub418\uc5b4\uc788\ub2e4."),(0,r.kt)("p",null,"\ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub294 \uc544\uc774\ub514\uc5b4\ub294 \uc758\uc678\ub85c \uac04\ub2e8\ud558\ub2e4. \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\uac00 \uc800\uc7a5\ub418\ub294 \uc2a4\ud1a0\ub9ac\uc9c0 \uc2ac\ub86f\uc758 \uc704\uce58\ub97c \uc784\uc758\ub85c \ubc30\uc815\ud574\uc8fc\ub294 \uac83\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="openzeppelin-contracts-upgradeable/contracts/proxy/ERC1967/ERC1967UpgradeUpgradeable.sol"',title:'"openzeppelin-contracts-upgradeable/contracts/proxy/ERC1967/ERC1967UpgradeUpgradeable.sol"'},'abstract contract ERC1967UpgradeUpgradeable {\n    /**\n     * @dev Storage slot with the address of the current implementation.\n     * This is the keccak-256 hash of "eip1967.proxy.implementation" subtracted by 1, and is\n     * validated in the constructor.\n     */\n    bytes32 internal constant _IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;\n\n\n    /**\n     * @dev Returns the current implementation address.\n     */\n    function _getImplementation() internal view returns (address) {\n        return StorageSlotUpgradeable.getAddressSlot(_IMPLEMENTATION_SLOT).value;\n    }\n\n    /**\n     * @dev Stores a new address in the EIP1967 implementation slot.\n     */\n    function _setImplementation(address newImplementation) private {\n        require(AddressUpgradeable.isContract(newImplementation), "ERC1967: new implementation is not a contract");\n        StorageSlotUpgradeable.getAddressSlot(_IMPLEMENTATION_SLOT).value = newImplementation;\n    }\n\n    /**\n     * @dev Perform implementation upgrade\n     *\n     * Emits an {Upgraded} event.\n     */\n    function _upgradeTo(address newImplementation) internal {\n        _setImplementation(newImplementation);\n        emit Upgraded(newImplementation);\n    }\n}\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"_IMPLEMENTATION_SLOT"),"\uc758 \uac12\uc774 \ub3c4\ucd9c\ub41c \uacfc\uc815\uc740 \u201ceip1967.proxy.implementation\u201d \ub97c \ud574\uc2f1\ud55c \ud6c4\uc5d0 1\uc744 \ube80 \uac12\uc774\ub77c\uace0 \uc8fc\uc11d\uc5d0 \uc124\uba85 \ub418\uc5b4\uc788\ub2e4."),(0,r.kt)("p",null,"\uc774\ud6c4 ",(0,r.kt)("inlineCode",{parentName:"p"},"_setImplementation")," \ud568\uc218\ub098 ",(0,r.kt)("inlineCode",{parentName:"p"},"_getImplementation")," \ud568\uc218\uc5d0\uc11c\ub294 \ud574\ub2f9 \uc2ac\ub86f\uac12\uc744 \ud65c\uc6a9\ud558\uc5ec \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\ub97c \uc800\uc7a5\ud558\uac70\ub098 \uc870\ud68c\ud558\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\uc774\uc804 \uae00\uc5d0\uc11c \uc194\ub9ac\ub514\ud2f0\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ub808\uc774\uc544\uc6c3\uc5d0 \ub300\ud574 \uc0b4\ud3b4\ubcfc \ub54c, \ucee8\ud2b8\ub799\ud2b8\uc758 \ubcc0\uc218\ub4e4\uc774 \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \ud560\ub2f9\ub418\ub294 \uae30\ubcf8\uc801\uc778 \ubc29\uc2dd\uc740 \uc120\uc5b8\ub418\ub294 \uc21c\uc11c\uc5d0 \ub530\ub77c \uc2ac\ub86f\ub118\ubc84\uac00 \ud560\ub2f9\ub418\ub294 \ubc29\uc2dd\uc774\uba70, \ub9e4\ud551\ud0c0\uc785\uc758 \uacbd\uc6b0 value\uac00 \uc800\uc7a5\ub418\ub294 \ubc29\uc2dd\uc740 \ub9e4\ud551 \ud0c0\uc785 \ubcc0\uc218\uac00 \ucd5c\ucd08\uc5d0 \ud560\ub2f9\ub41c \uc2ac\ub86f\ub118\ubc84\uc640 \ub9e4\ud551\uc758 key\uac12\uc744 \ud568\uaed8 \ud574\uc2f1\ud55c \uc2ac\ub86f\ub118\ubc84\uc5d0 \ud560\ub2f9\ub41c\ub2e4\ub294 \uac83\uc744 \uc54c \uc218 \uc788\uc5c8\ub2e4."),(0,r.kt)("p",null,"ERC1967\uc5d0\uc11c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \uc2ac\ub86f\ub118\ubc84\ub97c \uc784\uc758\ub85c \uc9c0\uc815\ud558\uc5ec \uc800\uc7a5\ud558\ub294 \ubc29\uc2dd\uc740 \ub9e4\ud551 \ud0c0\uc785\uc758 value\uac00 \uc800\uc7a5\ub418\ub294 \ubc29\uc2dd\uc744 \ucc28\uc6a9\ud55c \ubc29\uc2dd\uc774\ub2e4. \uc77c\ubc18\uc801\uc778 \uacbd\uc6b0\uc5d0 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\uc744 \ud2b9\uc815 \uc2ac\ub86f\ub118\ubc84\uc5d0 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\ub97c \uc800\uc7a5\ud574\ub193\uc558\uae30 \ub54c\ubb38\uc5d0 \uc774\ud6c4 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc120\uc5b8\ub418\ub294 \ubcc0\uc218\ub4e4\uc5d0 \uc758\ud574 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\uc5d0 \ub300\ud55c \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc\uc774 \ubc1c\uc0dd\ud558\ub294 \uac83\uc744 \ub9c9\uc744 \uc218 \uc788\ub294 \uac83\uc774\ub2e4."),(0,r.kt)(l.Z,{mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"contracts/ERC1967/ERC1967.sol",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},'// SPDX-License-Identifier: MIT\n\npragma solidity ^0.8.0;\n\nimport "@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol";\nimport "@openzeppelin/contracts/access/Ownable.sol";\n\ncontract ERC1967 is ERC1967Proxy, Ownable {\n    constructor(address _logic, bytes memory _data)\n        payable\n        ERC1967Proxy(_logic, _data)\n    {}\n\n    function upgradeTo(address newImplementation) external onlyOwner {\n        _upgradeToAndCall(newImplementation, bytes(""), false);\n    }\n\n    function upgradeToAndCall(address newImplementation, bytes calldata data)\n        external\n        payable\n        onlyOwner\n    {\n        _upgradeToAndCall(newImplementation, data, true);\n    }\n\n    function implementation() external view returns (address) {\n        return _implementation();\n    }\n}\n'))),(0,r.kt)(o.Z,{value:"contracts/ERC1967/v1.sol",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},"//SPDX-License-Identifier: Unlicense\npragma solidity ^0.8.0;\n\ncontract ERC1967ImplementationV1 {\n    mapping(address => uint256) public counts;\n\n    function count() external {\n        counts[msg.sender] += 1;\n    }\n}\n"))),(0,r.kt)(o.Z,{value:"contracts/ERC1967/v2.sol",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},"//SPDX-License-Identifier: Unlicense\npragma solidity ^0.8.0;\n\ncontract ERC1967ImplementationV2 {\n    mapping(address => uint256) public counts;\n\n    function count() external {\n        counts[msg.sender] += 2;\n    }\n}\n")))),(0,r.kt)("p",null,"\uc704\uc640 \uac19\uc774 ERC1967\uc744 \ud1b5\ud574 \uc5c5\uadf8\ub808\uc774\ub4dc \uac00\ub2a5\ud55c \ucee8\ud2b8\ub799\ud2b8\ub97c \uad6c\ud604\ud558\uc600\uc744 \ub54c, \ub354 \uc774\uc0c1 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\uac00 \ub2f4\uae34 \ubcc0\uc218\ub97c \uc21c\uc11c\uc5d0 \ub9de\uac8c \uc120\uc5b8\ud574\uc904 \ud544\uc694\uac00 \uc5c6\uc5b4\uc9c4 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4. \uc65c\ub0d0\ud558\uba74 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\ub294 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/StorageSlot.sol"},"StorageSlot")," \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud65c\uc6a9\ud558\uc5ec \ubbf8\ub9ac \uc815\ud574\uc9c4 \uc2ac\ub86f\ub118\ubc84\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\uc2ac\ub86f\uc5d0 \uc800\uc7a5\ub418\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="contracts/ERC1967/v4.sol"',title:'"contracts/ERC1967/v4.sol"'},'//SPDX-License-Identifier: Unlicense\npragma solidity ^0.8.0;\n\nimport "@openzeppelin/contracts/utils/StorageSlot.sol";\n\ncontract ERC1967ImplementationV4 {\n    bytes32 internal constant _IMPLEMENTATION_SLOT =\n        0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;\n\n    mapping(address => uint256) public counts;\n\n    function count() external {\n        counts[msg.sender] += 3;\n    }\n\n    function storageTest(address _target) external {\n        StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value = _target;\n    }\n\n    function getAddress() external view returns (address target_) {\n        target_ = StorageSlot.getAddressSlot(_IMPLEMENTATION_SLOT).value;\n    }\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'console.log("V4 ------ storage test ------");\nconst storageTest = await proxy.storageTest(users[0].address);  await storageTest.wait();\nconsole.log("users[0]:", users[0].address);  console.log("implementation:", await erc1967Proxy.implementation());\n\ud14c\uc2a4\ud2b8 \uacb0\uacfc\nV4 ------ storage test ------\nusers[0]: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\nimplementation: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\n')),(0,r.kt)("p",null,"\ucc38\uace0\ub85c \ub2f9\uc5f0\ud55c \uacb0\uacfc\uaca0\uc9c0\ub9cc, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ud558\uace0 \uc788\ub294 \uc2ac\ub86f\ub118\ubc84\ub97c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \ub3d9\uc77c\ud558\uac8c \uc0ac\uc6a9\ud558\uac8c \ub418\uba74 \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc\uc774 \ubc1c\uc0dd\ud55c\ub2e4."),(0,r.kt)("hr",null),"\ubb3c\ub860 \uc774\uc640 \uac19\uc740 \ubc29\uc2dd\uc744 \ud1b5\ud574 \ud574\uacb0\ud55c \uac83\uc740 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ud544\uc218\uc801\uc73c\ub85c \ud544\uc694\ud55c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c \ubcc0\uc218\uc5d0 \ud55c\uc815\ub41c \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc\uc774\ub2e4. \uc5c5\uadf8\ub808\uc774\ub4dc \ub418\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc120\uc5b8\ub41c \ubcc0\uc218\uac00 \uc774\uc804 \ubc84\uc804\uc758 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub358 \ubcc0\uc218\uc640 \ucda9\ub3cc\ud560 \uc218 \uc788\ub294 \uc704\ud5d8\uc740 \uc5ec\uc804\ud788 \uadf8\ub300\ub85c \uc874\uc7ac\ud55c\ub2e4.",(0,r.kt)("p",null,"\uadf8\ub807\ub2e4\uba74 \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc \uc774\uc678\uc5d0\ub294 \ud504\ub85d\uc2dc \ud328\ud134\uc758 \ub2e8\uc810\uc740 \uc874\uc7ac\ud558\uc9c0 \uc54a\uace0 \uc774\uc81c ERC1967\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uae30\ub9cc \ud558\uba74 \ub418\ub294 \uac83\uc77c\uae4c?"),(0,r.kt)("h3",{id:"\uc0dd\uc131\uc790-\ud568\uc218"},"\uc0dd\uc131\uc790 \ud568\uc218"),(0,r.kt)("p",null,"\uc774 \ub2e8\uc810\uc740 ERC1967\uc758 \ub2e8\uc810\uc774\ub77c\uae30 \ubcf4\ub2e4\ub294 delegatecall\uc744 \uae30\ubc18\uc73c\ub85c \ud558\ub294 \ud504\ub85d\uc2dc \ud328\ud134 \uc790\uccb4\uc758 \ub2e8\uc810\uc774\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\ud504\ub85d\uc2dc \ud328\ud134\uc744 \uad6c\ud604\ud560 \ub54c \ub85c\uc9c1\uc774 \ub2f4\uae34 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c\ub294 constructor\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub2e4. \uc815\ud655\ud788 \ub9d0\ud574 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub2e4\uae30\ubcf4\ub2e4\ub294 \uc124\uc0ac \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc0dd\uc131\uc790 \ud568\uc218\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubcc0\uc218\ub4e4\uc5d0 \uac12\uc744 \ucd08\uae30\ud654\ud588\ub2e4\uace0 \ud558\ub354\ub77c\ub3c4 \uc758\ubbf8\uac00 \uc5c6\ub2e4."),(0,r.kt)("p",null,"\uc774\uc804 \uae00\uc5d0\uc11c \ubcf4\uc558\ub4ef\uc774 \ud504\ub85d\uc2dc \ud328\ud134\uc758 \uae30\ubcf8 \uc544\uc774\ub514\uc5b4\ub294 \ub370\uc774\ud130\uc640 \ub85c\uc9c1\uc744 \ubd84\ub9ac\ud558\ub294 \uac83\uc774\uace0, \ub370\uc774\ud130\ub294 \uc0c8\ub86d\uac8c \ubc30\ud3ec\ub41c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \ud65c\uc6a9\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c \uc774\ubbf8 \ubc30\ud3ec\ub418\uc5b4\uc788\ub358 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc774\uc5b4\uc11c \ud65c\uc6a9\ud55c\ub2e4\ub294 \uac83\uc774 \uc5c5\uadf8\ub808\uc774\ub4dc\uc758 \uc758\ubbf8\uc774\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,r.kt)("p",null,"\uc2e4\uc81c \ud504\ub85c\ub355\ud2b8\ub85c \ud65c\uc6a9\ub418\uace0 \uc788\ub294 \ucee8\ud2b8\ub799\ud2b8 \ub370\uc774\ud130\ub294 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \ub370\uc774\ud130\uc77c \uac83\uc774\uae30 \ub54c\ubb38\uc5d0, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uac00 \ubc30\ud3ec\ub418\uba74\uc11c \uc2e4\ud589\ub41c \uc0dd\uc131\uc790 \ud568\uc218\uc758 \ub85c\uc9c1\uc740 \uc758\ubbf8\uc5c6\uc774 \ub3d9\uc791\ud55c \ucc44\ub85c \ub05d\ub0a0 \uac83\uc774\ub2e4. \uc0dd\uc131\uc790 \ud568\uc218\ub294 \ucee8\ud2b8\ub799\ud2b8\uac00 \ubc30\ud3ec\ub418\ub294 \uc21c\uac04\uc5d0 \ud55c \ubc88 \uc2e4\ud589\ub41c \uc774\ud6c4\ub85c \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \ud638\ucd9c\ud560 \uc218 \uc5c6\uae30 \ub54c\ubb38\uc5d0, \ub9cc\uc57d \ucd08\uae30 \uc14b\ud305\uc774 \ud544\uc694\ud558\ub2e4\uba74 \uc0dd\uc131\uc790 \ud568\uc218\uac00 \uc544\ub2cc \ub2e4\ub978 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4."),(0,r.kt)("p",null,"\uc77c\ubc18\uc801\uc73c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubc29\uc2dd\uc740 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc784\uc758\uc758 \ucd08\uae30\ud654 \ud568\uc218\ub97c \ub9cc\ub4e4\uc5b4\ub193\uace0 \ubc84\uc804 \ubcc4\ub85c \ub531 \ud55c \ubc88\ub9cc \uc2e4\ud589\ub418\uace0, \ud55c \ubc88 \ud638\ucd9c\ub41c \uc774\ud6c4\ub85c\ub294 \ud638\ucd9c\ub418\ub354\ub77c\ub3c4 \uc2e4\ud589\ub418\uc9c0 \uc54a\uac8c ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/proxy/utils/Initializable.sol#L107"},"\uc81c\ud55c \ud574\ub193\ub294 \ubc29\uc2dd"),"\uc774\ub2e4."),(0,r.kt)("p",null,"\uac19\uc740 \uc774\uc720\ub85c \ud504\ub85d\uc2dc \ud328\ud134\uc744 \uc0ac\uc6a9\ud560 \ub54c\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub97c \uc791\uc131\ud560 \ub54c \ubcc0\uc218\uc5d0 \ucd08\uae30\uac12\uc744 \ub300\uc785\ud558\ub294 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub2e4. \ub300\uc785\ud55c \uac12\uc740 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \uc800\uc7a5\ub3fc\uc788\uc744 \ubfd0, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc2a4\ud1a0\ub9ac\uc9c0\uc640\ub294 \uc0c1\uad00\uc774 \uc5c6\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,r.kt)("h3",{id:"\ud568\uc218-\ucda9\ub3cc"},"\ud568\uc218 \ucda9\ub3cc"),(0,r.kt)("p",null,"\ub2e4\uc2dc ERC1967\ub85c \ub3cc\uc544\uc640\uc11c, ERC1967\uc744 \uc0ac\uc6a9\ud588\uc744 \ub54c \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \uc704\ud5d8 \uc911\uc5d0\ub294 \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc\ub9cc \uc874\uc7ac\ud558\ub294 \uac83\uc740 \uc544\ub2c8\ub2e4. \uc704\uc5d0\uc11c \ud14c\uc2a4\ud2b8\ub97c \uc704\ud574 \uad6c\ud604\ub41c ERC1967 \ucee8\ud2b8\ub799\ud2b8\ub97c \uc0b4\ud3b4\ubcf4\uba74, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\ub97c \ubcc0\uacbd\ud558\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeTo")," \ud568\uc218\uc640 \uc5c5\uadf8\ub808\uc774\ub4dc \ud558\uba74\uc11c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ubbf8\ub9ac \uc791\uc131\ud574\ub193\uc740 \ucd08\uae30\ud654 \ud568\uc218\ub97c \ud568\uaed8 \ud638\ucd9c\ud558\ub294 \uacbd\uc6b0\uc5d0 \ud65c\uc6a9\ud558\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeToAndCall")," \ud568\uc218, \uadf8\ub9ac\uace0 \ud604\uc7ac \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\ub97c \uc870\ud68c\ud558\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"implementation")," \ud568\uc218\uac00 \uc678\ubd80 \ud568\uc218\ub85c \uc874\uc7ac\ud558\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\uc6b0\ub9ac\ub294 \uc5ec\uae30\uc11c \ud55c \uac00\uc9c0 \ud569\ub2f9\ud55c \uad81\uae08\uc99d\uc744 \uac00\uc9c8 \uc218 \uc788\ub2e4. \ub9cc\uc57d \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\ub3c4 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeTo"),"\ub77c\ub294 \uc774\ub984\uc758 \ud568\uc218\uac00 \uc874\uc7ac\ud55c\ub2e4\uba74, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\ub85c ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeTo")," \ud568\uc218\ub97c \ud638\ucd9c \ud588\uc744 \ub54c, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud558\ub294 \ud568\uc218\uac00 \ub3d9\uc791\ud574\uc57c \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c \uac83\uc77c\uae4c \uc544\ub2c8\uba74 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud558\ub294 \ud568\uc218\uac00 \ub3d9\uc791\ud574\uc57c \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c \uac83\uc77c\uae4c?"),(0,r.kt)("p",null,"\ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\uac12\uc774 \uaf2d \ud544\uc694\ud55c \uac83\ucc98\ub7fc, \uc5c5\uadf8\ub808\uc774\ub4dc\ub97c \uc704\ud574\uc11c\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\ub97c \uc218\uc815\ud558\ub294 \ub85c\uc9c1\uc758 \ud568\uc218\uac00 \uaf2d \ud544\uc694\ud558\ub2e4. \ubb3c\ub860 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub97c \uc791\uc131\ud558\ub294 \uac1c\ubc1c\uc790\uac00 \uc774 \uc810\uc744 \uc798 \uc219\uc9c0\ud558\uace0 \uc788\uc744 \uac83\uc774\uae30 \ub54c\ubb38\uc5d0 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uad73\uc774 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc790\uccb4\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \ud568\uc218\uc640 \ub3d9\uc77c\ud55c \ud568\uc218\uba85\uacfc \uc778\uc790\ub97c \uac00\uc9c4 \ud568\uc218\ub97c \ub9cc\ub4e4\uc9c0\ub294 \uc54a\uc744 \uac83\uc774\ub2e4."),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc \uc0ac\ub78c\uc740 \uc5b8\uc81c\ub098 \uc2e4\uc218\ub97c \ud560 \uc218 \uc788\uc744 \ubfd0\ub354\ub7ec, \ub354 \uae4c\ub2e4\ub85c\uc6b4 \ubb38\uc81c\ub294 \ud568\uc218\uba85\uc774 \ub3d9\uc77c\ud558\uc9c0 \uc54a\ub354\ub77c\ub3c4 \ub3d9\uc77c\ud55c \ud568\uc218\ub85c \uc778\uc2dd\ub418\ub294 \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4\ub294 \uac83\uc774\ub2e4."),(0,r.kt)("h3",{id:"\ucee8\ud2b8\ub799\ud2b8\uac00-\ud568\uc218\ub97c-\uc2dd\ubcc4\ud558\ub294-\ubc29\uc2dd"},"\ucee8\ud2b8\ub799\ud2b8\uac00 \ud568\uc218\ub97c \uc2dd\ubcc4\ud558\ub294 \ubc29\uc2dd"),(0,r.kt)("p",null,"\ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc5b4\ub5a4 \ud568\uc218\ub97c \ud638\ucd9c\ud558\ub294 \uc694\uccad\uc774 \ub4e4\uc5b4\uc654\uc744 \ub54c, \ud638\ucd9c\ub41c \ud568\uc218\uac00 \ubb34\uc5c7\uc778\uc9c0\ub294 \ud2b8\ub79c\uc7ad\uc158\uc758 \ub370\uc774\ud130 \ud544\ub4dc(calldata)\uc5d0 \ub4e4\uc5b4\uc788\ub294 \ub370\uc774\ud130\ub4e4\uc744 \ud1b5\ud574 \uacb0\uc815\ub41c\ub2e4. \uc5ec\uae30\uc5d0\ub294 \ud568\uc218\uc758 \uc774\ub984\uacfc \uc778\uc790 \ud0c0\uc785\uc744 keccak256\uc73c\ub85c \ud574\uc2f1\ud55c \ud568\uc218 \uc2dc\uadf8\ub2c8\ucc98\uc758 4\ubc14\uc774\ud2b8 \ud568\uc218 \uc2dd\ubcc4\uc790\uc640 \uc778\uc790\uac12\ub4e4\uc774 \ud3ec\ud568\ub418\uc5b4\uc788\ub2e4."),(0,r.kt)("p",null,"fallback \ud568\uc218\ub97c \uae30\ubc18\uc73c\ub85c \uad6c\ud604\ub41c \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\ub294 calldata\uc5d0 \ub2f4\uae34 \ud568\uc218 \uc2dd\ubcc4\uc790\uc640 \ub3d9\uc77c\ud55c \uc2dd\ubcc4\uc790\ub97c \uac00\uc9c4 \ud568\uc218\uac00 \uc874\uc7ac\ud558\ub294\uc9c0 \ud655\uc778\ud558\uace0, \uc874\uc7ac\ud558\uc9c0 \uc54a\uc73c\uba74 fallback \ud568\uc218\ub97c \uc2e4\ud589\uc2dc\ud0ac \uac83\uc774\ub2e4. \uadf8\ub7ec\uba74 fallback \ud568\uc218\uc5d0\uc11c\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ud574\ub2f9 \ud568\uc218\ub97c delegatecall \ud558\ub294 \ub85c\uc9c1\uc744 \uc218\ud589\ud560 \uac83\uc774\ub2e4."),(0,r.kt)("p",null,"\ubb38\uc81c\ub294 \ud568\uc218 \uc2dd\ubcc4\uc790\uac00 \ud574\uc2dc\uac12\uc758 \uc55e\ubd80\ubd84 4\ubc14\uc774\ud2b8 \uac12\ub9cc\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c4\ub2e4\ub294 \uac83\uc774\ub2e4. \ub54c\ubb38\uc5d0 \ud568\uc218\uba85\uacfc \uc778\uc790\uac00 \ub2e4\ub978 \ud568\uc218\ub77c\ud558\ub354\ub77c\ub3c4 \ub3d9\uc77c\ud55c \ud568\uc218 \uc2dd\ubcc4\uc790\ub97c \uac16\uac8c \ub418\ub294 \uacbd\uc6b0\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4. \ud558\ub098\uc758 \ucee8\ud2b8\ub799\ud2b8 \uc548\uc5d0\uc11c \ud568\uc218 \uc2dd\ubcc4\uc790\uac00 \ucda9\ub3cc\ub418\ub294 \uacbd\uc6b0\uc5d0\ub294 ",(0,r.kt)("a",{parentName:"p",href:"https://solidity-kr.readthedocs.io/ko/latest/using-the-compiler.html"},"\uc194\ub9ac\ub514\ud2f0 \ucef4\ud30c\uc77c\ub7ec"),"\uac00 \ucef4\ud30c\uc77c \uacfc\uc815\uc5d0\uc11c \uc5d0\ub7ec\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\uae30 \ub54c\ubb38\uc5d0 \ubbf8\ub9ac \ubc29\uc9c0\ud560 \uc218 \uc788\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'"DeclarationError" : \uc720\ud6a8\ud558\uc9c0 \uc54a\uac70\ub098 \ud639\uc740 \uc758\uacb0 \ud560\uc218 \uc5c6\ub294(unresolvable), \uc2dd\ubcc4\uc790 \uc774\ub984\ucda9\ub3cc\uc785\ub2c8\ub2e4.\n')),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc640 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c\ucc98\ub7fc \uc11c\ub85c \ub2e4\ub978 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \ud568\uc218 \uc2dd\ubcc4\uc790\uac00 \uc911\ubcf5\ub418\ub294 \uacbd\uc6b0\ub294 \ucef4\ud30c\uc77c \uacfc\uc815\uc5d0\uc11c \ubc29\uc9c0\ud560 \uc218 \uc5c6\ub2e4."),(0,r.kt)("hr",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="contracts/ERC1967/v3.sol"',title:'"contracts/ERC1967/v3.sol"'},"//SPDX-License-Identifier: Unlicense\npragma solidity ^0.8.0;\n\ncontract ERC1967ImplementationV3 {\n    mapping(address => uint256) public counts;\n\n    function count() external {\n        counts[msg.sender] += 3;\n    }\n\n    function upgradeTo(address _target) external {\n        counts[_target] += 3;\n    }\n}\n")),(0,r.kt)("p",null,"\uc704\ucc98\ub7fc \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc640 \ub3d9\uc77c\ud55c \uc774\ub984\uacfc \ud30c\ub77c\ubbf8\ud130\ub97c \uac00\uc9c4 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeTo")," \ud568\uc218\uac00 \uc788\uc744 \ub54c, \ud574\ub2f9 \ud568\uc218\ub97c \ud638\ucd9c\ud558\uba74 \uc5b4\ub5bb\uac8c \ub420\uae4c?"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'console.log("V3 ------ upgradeTo function Error ------");\nawait expect(proxy.upgradeTo(users[0].address)).to.be.revertedWith(\n  "ERC1967: new implementation is not a contract"\n);\n')),(0,r.kt)("p",null,"\ud14c\uc2a4\ud2b8 \uacb0\uacfc\ub97c \ubcf4\uba74, \uc5c5\uadf8\ub808\uc774\ub4dc \ud558\ub824\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\uac00 \ucee8\ud2b8\ub799\ud2b8\uc778\uc9c0 \ud655\uc778\ud558\ub294 require\ubb38\uc5d0 \uac78\ub824 revert \ub418\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0\ub294 \ud574\ub2f9 \ud568\uc218\uc2dd\ubcc4\uc790\ub97c \uac00\uc9c4 \ud568\uc218\uac00 \uc774\ubbf8 \uc874\uc7ac\ud558\uae30 \ub54c\ubb38\uc5d0 fallback \ud568\uc218\ub85c \ub118\uc5b4\uac00\uc9c0 \uc54a\uace0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeTo")," \ud568\uc218\uac00 \uc2e4\ud589\ub41c\ub2e4."),(0,r.kt)("p",null,"\ub9cc\uc57d \ud568\uc218\ud638\ucd9c\uc790\uac00 \ucee8\ud2b8\ub799\ud2b8\ub97c \uc5c5\uadf8\ub808\uc774\ub4dc \ud558\ub824\ub358\uac8c \uc544\ub2c8\ub77c, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub294 target \uc8fc\uc18c\uc5d0 \uce74\uc6b4\ud2b8\ub97c 3 \ub354 \ud574\uc8fc\ub294 \uae30\ub2a5\uc744 \uc218\ud589\ud558\uace0 \uc2f6\uc5c8\ub358 \uac83\uc774\ub77c\uba74 \uc694\uccad\uc758 \uc2e4\ud328\uac00 \ubb34\ucc99 \ub2f9\ud669\uc2a4\uc6e0\uc744 \uac83\uc774\ub2e4."),(0,r.kt)("p",null,"\uc774\ucc98\ub7fc \ud638\ucd9c\uc790\uc758 \uc758\ub3c4\uc640\ub294 \ub2e4\ub974\uac8c \ucee8\ud2b8\ub799\ud2b8\uc758 \uae30\ub2a5\ub4e4\uc774 \ub3d9\uc791\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 ERC1967\uc744 \uc0ac\uc6a9\ud560 \ub54c\ub294 \ud568\uc218 \ucda9\ub3cc\uc758 \ubb38\uc81c\ub97c \uace0\ub824\ud574\uc57c\ud55c\ub2e4."),(0,r.kt)("h2",{id:"transparentproxy"},"TransparentProxy"),(0,r.kt)("p",null,"ERC1967\uc758 \ud568\uc218 \ucda9\ub3cc \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ub098\uc628 \ubc29\uc2dd\uc774 \uc624\ud508\uc7ac\ud50c\ub9b0\uc758 \ud22c\uba85\ud504\ub85d\uc2dc\uc774\ub2e4."),(0,r.kt)("p",null,"\ud22c\uba85\ud504\ub85d\uc2dc\uac00 \ud568\uc218 \ucda9\ub3cc \ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub294 \uc544\uc774\ub514\uc5b4\ub294 \ud638\ucd9c\uc790\uac00 \ub204\uad6c\uc778\uc9c0\ub97c \uae30\uc900\uc73c\ub85c \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc790\uccb4 \ud568\uc218\ub97c \ud638\ucd9c\ud560\uc9c0, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \ud568\uc218\ub97c \ud638\ucd9c\ud560\uc9c0\ub97c \uacb0\uc815\ud558\uac8c \ud558\ub294 \uac83\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="openzeppelin-contracts/contracts/proxy/transparent/TransparentUpgradeableProxy.sol"',title:'"openzeppelin-contracts/contracts/proxy/transparent/TransparentUpgradeableProxy.sol"'},'contract TransparentUpgradeableProxy is ERC1967Proxy {\n    /**\n     * @dev Initializes an upgradeable proxy managed by `_admin`, backed by the implementation at `_logic`, and\n     * optionally initialized with `_data` as explained in {ERC1967Proxy-constructor}.\n     */\n    constructor(\n        address _logic,\n        address admin_,\n        bytes memory _data\n    ) payable ERC1967Proxy(_logic, _data) {\n        _changeAdmin(admin_);\n    }\n\n    /**\n     * @dev Modifier used internally that will delegate the call to the implementation unless the sender is the admin.\n     */\n    modifier ifAdmin() {\n        if (msg.sender == _getAdmin()) {\n            _;\n        } else {\n            _fallback();\n        }\n    }\n\n    /**\n     * @dev Returns the current admin.\n     *\n     * NOTE: Only the admin can call this function. See {ProxyAdmin-getProxyAdmin}.\n     *\n     * TIP: To get this value clients can read directly from the storage slot shown below (specified by EIP1967) using the\n     * https://eth.wiki/json-rpc/API#eth_getstorageat[`eth_getStorageAt`] RPC call.\n     * `0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103`\n     */\n    function admin() external ifAdmin returns (address admin_) {\n        admin_ = _getAdmin();\n    }\n\n    /**\n     * @dev Returns the current implementation.\n     *\n     * NOTE: Only the admin can call this function. See {ProxyAdmin-getProxyImplementation}.\n     *\n     * TIP: To get this value clients can read directly from the storage slot shown below (specified by EIP1967) using the\n     * https://eth.wiki/json-rpc/API#eth_getstorageat[`eth_getStorageAt`] RPC call.\n     * `0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc`\n     */\n    function implementation() external ifAdmin returns (address implementation_) {\n        implementation_ = _implementation();\n    }\n\n    /**\n     * @dev Changes the admin of the proxy.\n     *\n     * Emits an {AdminChanged} event.\n     *\n     * NOTE: Only the admin can call this function. See {ProxyAdmin-changeProxyAdmin}.\n     */\n    function changeAdmin(address newAdmin) external virtual ifAdmin {\n        _changeAdmin(newAdmin);\n    }\n\n    /**\n     * @dev Upgrade the implementation of the proxy.\n     *\n     * NOTE: Only the admin can call this function. See {ProxyAdmin-upgrade}.\n     */\n    function upgradeTo(address newImplementation) external ifAdmin {\n        _upgradeToAndCall(newImplementation, bytes(""), false);\n    }\n\n    /**\n     * @dev Upgrade the implementation of the proxy, and then call a function from the new implementation as specified\n     * by `data`, which should be an encoded function call. This is useful to initialize new storage variables in the\n     * proxied contract.\n     *\n     * NOTE: Only the admin can call this function. See {ProxyAdmin-upgradeAndCall}.\n     */\n    function upgradeToAndCall(address newImplementation, bytes calldata data) external payable ifAdmin {\n        _upgradeToAndCall(newImplementation, data, true);\n    }\n\n    /**\n     * @dev Returns the current admin.\n     */\n    function _admin() internal view virtual returns (address) {\n        return _getAdmin();\n    }\n\n    /**\n     * @dev Makes sure the admin cannot access the fallback function. See {Proxy-_beforeFallback}.\n     */\n    function _beforeFallback() internal virtual override {\n        require(msg.sender != _getAdmin(), "TransparentUpgradeableProxy: admin cannot fallback to proxy target");\n        super._beforeFallback();\n    }\n}\n')),(0,r.kt)("p",null,"\ud22c\uba85\ud504\ub85d\uc2dc\uc758 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uba74, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub97c \uc5c5\uadf8\ub808\uc774\ub4dc \ud558\uac70\ub098 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc5b4\ub4dc\ubbfc\uc744 \ubc14\uafb8\ub294 \ub4f1\uc758 \ud504\ub85d\uc2dc \uc790\uccb4 \ud568\uc218\ub4e4\uc5d0\ub294 \ubaa8\ub450 ",(0,r.kt)("inlineCode",{parentName:"p"},"ifAdmin"),"\uc774\ub77c\ub294 modifier\uac00 \ucd94\uac00 \ub3fc\uc788\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ifAdmin"),"\uc758 \ub85c\uc9c1\uc744 \ubcf4\uba74 sender\uac00 \uc5b4\ub4dc\ubbfc\uc778 \uacbd\uc6b0\uc5d0\ub9cc \uc790\uccb4 \ud568\uc218\ub97c \uc2e4\ud589\ud558\uace0 \uc5b4\ub4dc\ubbfc\uc774 \uc544\ub2cc \uacbd\uc6b0\uc5d0\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"_fallback"),"\uc744 \uc2e4\ud589\ud55c\ub2e4. \ub610\ud55c ",(0,r.kt)("inlineCode",{parentName:"p"},"_beforeFallback")," \ud568\uc218\uc5d0\uc11c\ub294 sender\uac00 \uc5b4\ub4dc\ubbfc\uc778 \uacbd\uc6b0\uc5d0 revert \uc2dc\ud0a4\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4. ",(0,r.kt)("inlineCode",{parentName:"p"},"_beforeFallback")," \ud568\uc218\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"_fallback")," \ud568\uc218 \uc548\uc5d0\uc11c delegatecall\uc774 \uc2e4\ud589\ub418\uae30 \uc804\uc5d0 \ud638\ucd9c\ub418\uae30 \ub54c\ubb38\uc5d0 sender\uac00 \uc5b4\ub4dc\ubbfc\uc778 \uacbd\uc6b0\uc5d0\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ub300\ud55c \ud568\uc218 \ud638\ucd9c\uc774 \ucc28\ub2e8\ub418\uace0, \uc624\ub85c\uc9c0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc790\uccb4 \ud568\uc218\ub4e4\uc5d0\ub9cc \uc811\uadfc\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4."),(0,r.kt)("p",null,"ERC1967\uc5d0\uc11c\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc640 \ub3d9\uc77c\ud55c \ud568\uc218 \uc2dd\ubcc4\uc790\ub97c \uac00\uc9c4 \ud568\uc218\uac00 \uc874\uc7ac\ud55c\ub2e4\uba74, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \ud568\uc218\ub97c \ud638\ucd9c\ud558\ub824\ub294 \uc758\ub3c4\ub85c \ud568\uc218\ub97c \ud638\ucd9c\ud558\ub354\ub77c\ub3c4 fallback \ud568\uc218\uac00 \uc2e4\ud589\ub418\uc9c0 \uc54a\uace0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8 \uc790\uccb4 \ud568\uc218\uac00 \uc2e4\ud589\ub418\uc5c8\uc744 \uac83\uc774\ub2e4."),(0,r.kt)("p",null,"\ubc18\uba74 \ud22c\uba85 \ud504\ub85d\uc2dc\uc5d0\uc11c\ub294 \ud638\ucd9c\uc790\uac00 \uc5b4\ub4dc\ubbfc\uc778\uc9c0 \uc544\ub2cc\uc9c0\uc5d0 \ub530\ub77c\uc11c \ud638\ucd9c\uc790\uc758 \uc758\ub3c4\ub97c \uacb0\uc815 \uc9d3\ub294 \ubc29\uc2dd\uc774\ub77c\uace0 \ubcfc \uc218 \uc788\ub2e4. \ud638\ucd9c\uc790\uac00 \uc5b4\ub4dc\ubbfc\uc774\ub77c\uba74 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc5b4\ub4dc\ubbfc \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\uae30 \uc704\ud574 \uc790\uccb4 \ud568\uc218\ub97c \ud638\ucd9c\ud588\uc744 \uac83\uc774\ub77c\uace0 \ubcf4\uace0, \uc5b4\ub4dc\ubbfc\uc774 \uc544\ub2c8\ub77c\uba74 \uc790\uccb4 \ud568\uc218\uc640 \ub3d9\uc77c\ud55c \ud568\uc218\uc2dd\ubcc4\uc790 \ud568\uc218\uac00 \ud638\ucd9c\ub410\ub354\ub77c\ub3c4 \ubb34\uc870\uac74 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub85c delegatecall\ud558\ub294 \ubc29\uc2dd\uc778 \uac83\uc774\ub2e4."),(0,r.kt)("h3",{id:"\ud504\ub85d\uc2dc-\uc5b4\ub4dc\ubbfc"},"\ud504\ub85d\uc2dc \uc5b4\ub4dc\ubbfc"),(0,r.kt)("p",null,"\ud22c\uba85\ud504\ub85d\uc2dc\ub97c \uc0ac\uc6a9\ud560 \ub54c \uc5b4\ub4dc\ubbfc\uc744 EOA \uc8fc\uc18c\ub85c \uc124\uc815\ud558\uae30 \ubcf4\ub2e4\ub294, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc5b4\ub4dc\ubbfc \uae30\ub2a5\uc744 \ud638\ucd9c\ud558\ub294 \ud568\uc218\ub4e4\uc774 \uad6c\ud604\ub41c ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/proxy/transparent/ProxyAdmin.sol"},"\uc5b4\ub4dc\ubbfc \ucee8\ud2b8\ub799\ud2b8"),"\ub97c \ub530\ub85c \ubc30\ud3ec\ud558\uc5ec \ud574\ub2f9 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\ub85c \uc124\uc815\ud558\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc774\ub2e4."),(0,r.kt)("p",null,"\uc5b4\ub4dc\ubbfc\uc744 EOA\ub85c \uc124\uc815\ud558\uba74 \ud574\ub2f9 \uc5b4\uce74\uc6b4\ud2b8\ub294 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc790\uccb4 \ud568\uc218\ub4e4\ub9cc \ud638\ucd9c\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0, \uc5c5\uadf8\ub808\uc774\ub4dc\uc640 \uad00\ub828\ub41c \uc5b4\ub4dc\ubbfc \uc5b4\uce74\uc6b4\ud2b8\uc640 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud558\ub294 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uacfc \uc5f0\uacc4\ub41c \uc5b4\ub4dc\ubbfc \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub294 \uc5b4\uce74\uc6b4\ud2b8\ub97c \ubd84\ub9ac\ud558\uc5ec \uad00\ub9ac\ud574\uc57c\ud55c\ub2e4."),(0,r.kt)("p",null,"\ucee8\ud2b8\ub799\ud2b8\ub97c \ud504\ub85d\uc2dc \uc5b4\ub4dc\ubbfc\uc73c\ub85c \uc124\uc815\ud558\uace0, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \ud568\uc218\ub97c \ud638\ucd9c\ud558\ub294 \uc5b4\ub4dc\ubbfc \ucee8\ud2b8\ub799\ud2b8\uc758 \ud568\uc218\uc5d0 \ub530\ub85c \uad8c\ud55c\uc744 \uc124\uc815\ud558\ub294 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\uba74 \ub3d9\uc77c\ud55c \uc5b4\uce74\uc6b4\ud2b8\ub85c\ub3c4 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uae30\ub2a5\uacfc \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc5b4\ub4dc\ubbfc \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4. (\ub610\ud55c \uc5ec\ub7ec \uc5b4\uce74\uc6b4\ud2b8\ub97c \uc5b4\ub4dc\ubbfc\uc73c\ub85c \uc124\uc815\ud560 \uc218\ub3c4 \uc788\uac8c \ub41c\ub2e4.)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="contracts/transparent/v2.sol"',title:'"contracts/transparent/v2.sol"'},'//SPDX-License-Identifier: Unlicense\npragma solidity ^0.8.0;\n\nimport "./v1.sol";\n\ncontract TransparentImplementationV2 is TransparentImplementationV1 {\n    function initialize(uint256 _count) external virtual override {\n        uint256 version = 2;\n        require(!initializes[version], "already initialize");\n\n        counts[msg.sender] = _count + 1;\n        initializes[version] = true;\n    }\n\n    function count() external override {\n        counts[msg.sender] += 2;\n    }\n\n    function admin() external view returns (address) {\n        return msg.sender;\n    }\n}\n')),(0,r.kt)("p",null,"\uc704\uc640 \uac19\uc774 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc790\uccb4 \ud568\uc218\uc640 \ub3d9\uc77c\ud55c ",(0,r.kt)("inlineCode",{parentName:"p"},"admin")," \ud568\uc218\uac00 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\ub3c4 \uc874\uc7ac\ud55c\ub2e4\uace0 \ud588\uc744 \ub54c,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'console.log("proxyAdmin:", proxyAdmin.address);\nconsole.log(\n  "admin() from proxyAdmin",\n  await proxyAdmin.getProxyAdmin(proxy.address)\n);\nconsole.log("users[0]", users[0].address);\nconsole.log("admin() from users[0]", await proxy.admin());\n')),(0,r.kt)("p",null,"\ud14c\uc2a4\ud2b8 \uacb0\uacfc\ub294 \uc544\ub798\uc640 \uac19\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\ud14c\uc2a4\ud2b8 \uacb0\uacfc\nproxyAdmin: 0x5FbDB2315678afecb367f032d93F642f64180aa3\nadmin() from proxyAdmin 0x5FbDB2315678afecb367f032d93F642f64180aa3\nusers[0] 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\nadmin() from users[0] 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="openzeppelin-contracts/contracts/proxy/transparent/ProxyAdmin.sol"',title:'"openzeppelin-contracts/contracts/proxy/transparent/ProxyAdmin.sol"'},'pragma solidity ^0.8.0;\n\nfunction getProxyAdmin(TransparentUpgradeableProxy proxy) public view virtual returns (address) {\n    // We need to manually run the static call since the getter cannot be flagged as view\n    // bytes4(keccak256("admin()")) == 0xf851a440\n    (bool success, bytes memory returndata) = address(proxy).staticcall(hex"f851a440");\n    require(success);\n    return abi.decode(returndata, (address));\n}\n')),(0,r.kt)("p",null,"\ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 ",(0,r.kt)("inlineCode",{parentName:"p"},"admin")," \ud568\uc218\ub97c \ud638\ucd9c\ud574\uc11c return \ud574\uc8fc\ub294 \uc5b4\ub4dc\ubbfc \ucee8\ud2b8\ub799\ud2b8\uc758 ",(0,r.kt)("inlineCode",{parentName:"p"},"getProxyAdmin")," \ud568\uc218\ub97c \ud1b5\ud574 \ud638\ucd9c\ud588\uc744 \ub54c\ub294 sender\uac00 \ud504\ub85d\uc2dc\uc758 \uc5b4\ub4dc\ubbfc\uc774\uae30 \ub54c\ubb38\uc5d0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"admin")," \ud568\uc218\uac00 \uc2e4\ud589\ub41c \uac83\uc744 \ubcfc \uc218 \uc788\uace0, \uac19\uc740 \uc5b4\uce74\uc6b4\ud2b8\ub85c \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ubc14\ub85c ",(0,r.kt)("inlineCode",{parentName:"p"},"admin")," \ud568\uc218\ub97c \ud638\ucd9c\ud588\uc744 \ub54c\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"_fallback")," \uc73c\ub85c \ub118\uc5b4\uac00\uc11c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 ",(0,r.kt)("inlineCode",{parentName:"p"},"admin")," \ud568\uc218\uac00 \uc2e4\ud589\ub41c \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("h3",{id:"openzeppelinhardhat-upgrades"},"@openzeppelin/hardhat-upgrades"),(0,r.kt)("p",null,"hardhat\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ud50c\ub7ec\uadf8\uc778\uc744 \uc0ac\uc6a9\ud558\uba74 \ud504\ub85d\uc2dc \ud328\ud134\uc744 \ud65c\uc6a9\ud55c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \ubc30\ud3ec \ubc0f \uc5c5\uadf8\ub808\uc774\ub4dc\ub97c \ubcf4\ub2e4 \uc27d\uac8c \uc9c4\ud589\ud560 \uc218 \uc788\ub294\ub370, \uac00\uc7a5 \ub9ce\uc774 \uc0ac\uc6a9\ub418\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeProxy")," \ud568\uc218\uc758 \ub0b4\ubd80 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uba74 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ub4f1\ub85d\ub41c \uc5b4\ub4dc\ubbfc\uc774 EOA\uc778\uc9c0 CA\uc778\uc9c0\uc5d0 \ub530\ub77c \ub2e4\ub974\uac8c \ub3d9\uc791\ud558\ub294 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'async function getUpgrader(\n  proxyAddress: string,\n  signer: Signer\n): Promise<Upgrader> {\n  const { provider } = hre.network;\n\n  const adminAddress = await getAdminAddress(provider, proxyAddress);\n  const adminBytecode = await getCode(provider, adminAddress);\n\n  if (adminBytecode === "0x") {\n    // No admin contract: use TransparentUpgradeableProxyFactory to get proxiable interface\n    const TransparentUpgradeableProxyFactory =\n      await getTransparentUpgradeableProxyFactory(hre, signer);\n    const proxy = TransparentUpgradeableProxyFactory.attach(proxyAddress);\n\n    return (nextImpl, call) =>\n      call ? proxy.upgradeToAndCall(nextImpl, call) : proxy.upgradeTo(nextImpl);\n  } else {\n    // Admin contract: redirect upgrade call through it\n    const manifest = await Manifest.forNetwork(provider);\n    const AdminFactory = await getProxyAdminFactory(hre, signer);\n    const admin = AdminFactory.attach(adminAddress);\n    const manifestAdmin = await manifest.getAdmin();\n\n    if (admin.address !== manifestAdmin?.address) {\n      throw new Error(\n        "Proxy admin is not the one registered in the network manifest"\n      );\n    }\n\n    return (nextImpl, call) =>\n      call\n        ? admin.upgradeAndCall(proxyAddress, nextImpl, call)\n        : admin.upgrade(proxyAddress, nextImpl);\n  }\n}\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"adminBytecode"),"\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294\ub2e4\ub294 \uac83\uc740 \ud574\ub2f9 \uc5b4\uce74\uc6b4\ud2b8\uac00 \ucee8\ud2b8\ub799\ud2b8\uac00 \uc544\ub2c8\ub77c\ub294 \uac83\uc774\uae30 \ub54c\ubb38\uc5d0 \uc774 \uacbd\uc6b0\uc5d0\ub294 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \ud568\uc218\ub97c \uc9c1\uc811 \ud638\ucd9c\ud558\uace0, \uc5b4\ub4dc\ubbfc\uc774 \ucee8\ud2b8\ub799\ud2b8\ub77c\uba74 \uc5b4\ub4dc\ubbfc \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\ub97c \uac00\uc838\uc640\uc11c \uc5b4\ub4dc\ubbfc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \ud568\uc218\ub97c \ud638\ucd9c\ud558\ub294 \uc2dd\uc73c\ub85c \ub3d9\uc791\ud558\ub294 \uac83\uc774\ub2e4."),(0,r.kt)("h3",{id:"\ud22c\uba85\ud504\ub85d\uc2dc\uc758-\ub2e8\uc810"},"\ud22c\uba85\ud504\ub85d\uc2dc\uc758 \ub2e8\uc810"),(0,r.kt)("p",null,"\uc774\ub807\uac8c \ud22c\uba85\ud504\ub85d\uc2dc\ub97c \ud1b5\ud558\uc5ec ERC1967\uc5d0 \uc874\uc7ac\ud558\ub358 \ud568\uc218 \ucda9\ub3cc\uc758 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub294 \uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uc558\ub2e4."),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc \uc5ed\uc2dc \ud22c\uba85\ud504\ub85d\uc2dc\uc5d0\ub3c4 \ub2e8\uc810\uc740 \uc874\uc7ac\ud55c\ub2e4. ERC1967\uc5d0\uc11c \uc2dc\uc791\ud558\uc5ec \ud22c\uba85\ud504\ub85d\uc2dc\ub85c \uc774\uc5b4\uc838\uc624\uba74\uc11c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc \ubb38\uc81c, \ud568\uc218 \ucda9\ub3cc \ubb38\uc81c\uc640 \uac19\uc740 \ubcf4\uc548 \uad00\ub828 \ubb38\uc81c\ub4e4\uc740 \uc5b4\ub290 \uc815\ub3c4 \ud574\uacb0\ub418\uc5c8\ub2e4\uace0 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\ub2e4\ub9cc \ubb38\uc81c\uac00 \ud574\uacb0\ub418\uc5c8\ub2e4\ub294 \uacb0\uacfc\ub3c4 \uc911\uc694\ud558\uc9c0\ub9cc, \uc5bc\ub9c8\ub098 \ud6a8\uc728\uc801\uc73c\ub85c \ubb38\uc81c\ub97c \ud574\uacb0\ud588\ub294\uc9c0 \uadf8 \uacfc\uc815\ub3c4 \uc911\uc694\ud560 \uac83\uc774\ub2e4."),(0,r.kt)("p",null,"\ud22c\uba85\ud504\ub85d\uc2dc\uc758 \ubc29\uc2dd\uc744 \ub2e4\uc2dc \ub418\uc9da\uc5b4\ubcf4\uba74, \ud568\uc218 \ucda9\ub3cc \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ud56d\uc0c1 \ud638\ucd9c\uc790\uac00 \ub204\uad6c\uc778\uc9c0\ub97c \ud544\uc218\uc801\uc73c\ub85c \ud655\uc778\ud574\uc57c\ud55c\ub2e4."),(0,r.kt)("p",null,"\ud504\ub85c\ub355\ud2b8 \ud658\uacbd\uc5d0\uc11c \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc5c5\uadf8\ub808\uc774\ub4dc \uae30\ub2a5\uc774 \ud638\ucd9c\ub418\ub294 \ube48\ub3c4\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc774 \ub2f4\uae34 \uae30\ub2a5\ub4e4\uc774 \ud638\ucd9c\ub418\ub294 \ube48\ub3c4\uc5d0 \ube44\ud574 \uadf9\ud788 \ub0ae\uc744 \uac83\uc774\ub2e4. \uadf8\ub7fc\uc5d0\ub3c4 \ucee8\ud2b8\ub799\ud2b8\uc758 \uae30\ub2a5\uc774 \ud638\ucd9c\ub420 \ub54c\ub9c8\ub2e4 \ud638\ucd9c\uc790\uac00 \uc5b4\ub4dc\ubbfc\uc778\uc9c0 \uc5ec\ubd80\ub97c \ud56d\uc0c1 \ud655\uc778\ud558\ub294 \ud22c\uba85\ud504\ub85d\uc2dc\uc758 \ubc29\uc2dd\uc740 \uadf8\ub9ac \ud6a8\uc728\uc801\uc774\ub77c\uace0 \ubcfc \uc218 \uc5c6\ub2e4."),(0,r.kt)("p",null,"\ud2b9\ud788 \uc774\ub354\ub9ac\uc6c0\uc744 \uc0ac\uc6a9\ud558\uba74 \uac00\uc2a4\ube44 \ubb38\uc81c\ub294 \ubcf4\uc548 \ubb38\uc81c\ub9cc\ud07c\uc774\ub098 \uc911\uc694\ud55c \ubb38\uc81c\uc774\ub2e4. \ucee8\ud2b8\ub799\ud2b8 \uc0ac\uc6a9\uc790\ub4e4\uc758 \uc785\uc7a5\uc5d0\uc11c\ub294 \ubd88\ud544\uc694\ud55c \uc791\uc5c5\uc744 \ucd5c\ub300\ud55c \uc904\uc5ec \uac00\uc2a4\ube44\ub97c \ub0ae\ucdb0\uc8fc\ub294\uac8c \ubcf4\uc548\uc801\uc73c\ub85c \ubb38\uc81c\uac00 \uc5c6\ub294 \ucee8\ud2b8\ub799\ud2b8\ub9cc\ud07c\uc774\ub098 \uc88b\uc740 \ucee8\ud2b8\ub799\ud2b8\ub97c \ud310\ub2e8\ud558\ub294 \uc9c0\ud45c\uc77c \uac83\uc774\ub2e4."),(0,r.kt)("h2",{id:"uups"},"UUPS"),(0,r.kt)("p",null,"\ud22c\uba85\ud504\ub85d\uc2dc\uc758 \ube44\ud6a8\uc728\uc801\uc778 \ubd80\ubd84\uc744 \uac1c\uc120\ud558\uace0 \ubcf4\ub2e4 \ud6a8\uc728\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \ud568\uc218 \ucda9\ub3cc \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ub098\uc628 \uac83\uc774 UUPS\uc774\ub2e4."),(0,r.kt)("p",null,"UUPS\ub294 ",(0,r.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-1822"},"EIP-1822"),"\uc5d0\uc11c \ub530\uc628 \uc774\ub984\uc73c\ub85c Universal Upgradeable Proxy Standard\uc758 \uc57d\uc790\uc774\ub2e4."),(0,r.kt)("p",null,"\ud22c\uba85\ud504\ub85d\uc2dc\uac00 \uac00\uc9c4 \ube44\ud6a8\uc728\uc758 \uc694\uc810\uc740, \ud568\uc218 \ucda9\ub3cc\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc5b4\ub5a4 \uc694\uccad\uc5d0\uc11c\ub4e0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ub4f1\ub85d\ub41c \uc5b4\ub4dc\ubbfc \uc8fc\uc18c\uac12\uc5d0 \uc811\uadfc\ud558\uc5ec \uc694\uccad\uc790\uc758 \uc8fc\uc18c\uc640 \ub3d9\uc77c\ud55c\uc9c0 \uc5ec\ubd80\ub97c \ud56d\uc0c1 \ud655\uc778\ud574\uc57c\ud55c\ub2e4\ub294 \uac83\uc774\uc5c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub807\ub2e4\uba74 UUPS\ub294 \uc5b4\ub5a4 \ubc29\uc2dd\uc73c\ub85c \uc774\ub7f0 \ube44\ud6a8\uc728\uc744 \ud574\uacb0\ud588\uc744\uae4c? UUPS\uc5d0\uc11c\ub294 \ud568\uc218 \ucda9\ub3cc \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ud638\ucd9c\uc790\ub97c \uae30\uc900\uc73c\ub85c \ud638\ucd9c \ud568\uc218\ub97c \uad6c\ubd84\ud558\ub294 \ubc29\uc2dd\uc774 \uc544\ub2c8\ub77c, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud558\ub294 \uc790\uccb4 \ud568\uc218\ub4e4\ub3c4 \uc544\uc608 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub85c \uc62e\uae30\ub294 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud588\ub2e4."),(0,r.kt)("p",null,"\uae30\uc874\uc5d0\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc\uc640 \uad00\ub828\ub41c \uae30\ub2a5\uc758 \ud568\uc218\ub4e4\uc740 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\ub97c \ubc30\ud3ec\ud560 \ub54c \uc790\uccb4 \ud568\uc218\ub4e4\ub85c \uc774\ubbf8 \uad6c\ud604\ub418\uc5b4\uc788\uace0, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \uc774\uc678\uc758 \uc2e4\uc81c \uc0ac\uc6a9\ud574\uc57c\ud560 \uae30\ub2a5\ub4e4\uc774 \ud568\uc218\ub85c \uad6c\ud604\ub418\uc5b4 \ubc30\ud3ec \ubc0f \uc5c5\uadf8\ub808\uc774\ub4dc \ub418\ub294 \ubc29\uc2dd\uc774\uc5c8\ub2e4."),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc UUPS\uc5d0\uc11c\ub294 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc790\uccb4 \ud568\uc218\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uace0 \uc5c5\uadf8\ub808\uc774\ub4dc\ub97c \ud3ec\ud568\ud55c \ubaa8\ub4e0 \uae30\ub2a5\ub4e4\uc774 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud55c\ub2e4. \ub54c\ubb38\uc5d0 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\ub294 \uc5b4\ub5a4 \ud568\uc218\uc5d0 \ub300\ud55c \ud638\ucd9c\uc774 \ub4e4\uc5b4\uc640\ub3c4 \ubb34\uc870\uac74 fallback \ud568\uc218\uac00 \uc2e4\ud589\ub418\uc5b4 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \ud568\uc218\ub97c \ud638\ucd9c\ud558\uac8c \ub41c\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="openzeppelin-contracts-upgradeable/contracts/proxy/utils/UUPSUpgradeable.sol"',title:'"openzeppelin-contracts-upgradeable/contracts/proxy/utils/UUPSUpgradeable.sol"'},'abstract contract UUPSUpgradeable is\n    Initializable,\n    IERC1822ProxiableUpgradeable,\n    ERC1967UpgradeUpgradeable\n{\n    function __UUPSUpgradeable_init() internal onlyInitializing {}\n\n    function __UUPSUpgradeable_init_unchained() internal onlyInitializing {}\n\n    /// @custom:oz-upgrades-unsafe-allow state-variable-immutable state-variable-assignment\n    address private immutable __self = address(this);\n\n    /**\n     * @dev Check that the execution is being performed through a delegatecall call and that the execution context is\n     * a proxy contract with an implementation (as defined in ERC1967) pointing to self. This should only be the case\n     * for UUPS and transparent proxies that are using the current contract as their implementation. Execution of a\n     * function through ERC1167 minimal proxies (clones) would not normally pass this test, but is not guaranteed to\n     * fail.\n     */\n    modifier onlyProxy() {\n        require(\n            address(this) != __self,\n            "Function must be called through delegatecall"\n        );\n        require(\n            _getImplementation() == __self,\n            "Function must be called through active proxy"\n        );\n        _;\n    }\n\n    /**\n     * @dev Check that the execution is not being performed through a delegate call. This allows a function to be\n     * callable on the implementing contract but not through proxies.\n     */\n    modifier notDelegated() {\n        require(\n            address(this) == __self,\n            "UUPSUpgradeable: must not be called through delegatecall"\n        );\n        _;\n    }\n\n    /**\n     * @dev Implementation of the ERC1822 {proxiableUUID} function. This returns the storage slot used by the\n     * implementation. It is used to validate that the this implementation remains valid after an upgrade.\n     *\n     * IMPORTANT: A proxy pointing at a proxiable contract should not be considered proxiable itself, because this risks\n     * bricking a proxy that upgrades to it, by delegating to itself until out of gas. Thus it is critical that this\n     * function revert if invoked through a proxy. This is guaranteed by the `notDelegated` modifier.\n     */\n    function proxiableUUID()\n        external\n        view\n        virtual\n        override\n        notDelegated\n        returns (bytes32)\n    {\n        return _IMPLEMENTATION_SLOT;\n    }\n\n    /**\n     * @dev Upgrade the implementation of the proxy to `newImplementation`.\n     *\n     * Calls {_authorizeUpgrade}.\n     *\n     * Emits an {Upgraded} event.\n     */\n    function upgradeTo(address newImplementation) external virtual onlyProxy {\n        _authorizeUpgrade(newImplementation);\n        _upgradeToAndCallUUPS(newImplementation, new bytes(0), false);\n    }\n\n    /**\n     * @dev Upgrade the implementation of the proxy to `newImplementation`, and subsequently execute the function call\n     * encoded in `data`.\n     *\n     * Calls {_authorizeUpgrade}.\n     *\n     * Emits an {Upgraded} event.\n     */\n    function upgradeToAndCall(address newImplementation, bytes memory data)\n        external\n        payable\n        virtual\n        onlyProxy\n    {\n        _authorizeUpgrade(newImplementation);\n        _upgradeToAndCallUUPS(newImplementation, data, true);\n    }\n\n    /**\n     * @dev Function that should revert when `msg.sender` is not authorized to upgrade the contract. Called by\n     * {upgradeTo} and {upgradeToAndCall}.\n     *\n     * Normally, this function will use an xref:access.adoc[access control] modifier such as {Ownable-onlyOwner}.\n     *\n     * ```solidity\n     * function _authorizeUpgrade(address) internal override onlyOwner {}\n     * ```\n     */\n    function _authorizeUpgrade(address newImplementation) internal virtual;\n\n    /**\n     * @dev This empty reserved space is put in place to allow future versions to add new\n     * variables without shifting down storage in the inheritance chain.\n     * See https://docs.openzeppelin.com/contracts/4.x/upgradeable#storage_gaps\n     */\n    uint256[50] private __gap;\n}\n')),(0,r.kt)("p",null,"\uadf8\ub7fc \uc624\ud508\uc7ac\ud50c\ub9b0\uc758 UUPS \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uc790. \uae30\uc874 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\uc5c8\ub358 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeTo")," \ud568\uc218\uc640 ",(0,r.kt)("inlineCode",{parentName:"p"},"upgradeToAndCall")," \ud568\uc218 \ub4f1\uc774 \uc774\uc81c\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ubaa8\ub450 \ud3ec\ud568\ub418\uc5b4\uc788\ub2e4."),(0,r.kt)("p",null,"\uc5c5\uadf8\ub808\uc774\ub4dc \ud568\uc218\ub4e4\uc5d0\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"onlyProxy"),"\ub77c\ub294 modifier\uac00 \ubd99\uc5b4\uc788\ub2e4. ",(0,r.kt)("inlineCode",{parentName:"p"},"__self"),"\uc5d0\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uac00 \ubc30\ud3ec\ub420 \ub54c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\uac12\uc774 \ub2f4\uaca8\uc788\uc744 \uac83\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},'require(address(this) != __self, "Function must be called through delegatecall");\n')),(0,r.kt)("p",null,"\ub9cc\uc57d delegatecall\uc744 \ud1b5\ud574 \ud638\ucd9c\ub410\ub2e4\uba74, \ud604\uc7ac \ucf58\ud14d\uc2a4\ud2b8\uc758 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c(address(this))\uac00 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\uac12\uc774 \uc544\ub2cc delegatecall\uc744 \uc2e4\ud589\ud55c \ucee8\ud2b8\ub799\ud2b8 (\ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8) \uc758 \uc8fc\uc18c\uc77c \uac83\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol"},'require(_getImplementation() == __self, "Function must be called through active proxy");\n')),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 \ud574\ub2f9 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c ",(0,r.kt)("inlineCode",{parentName:"p"},"_getImplementation()"),"\ub85c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\ub97c \uc870\ud68c\ud588\uc744 \ub54c \ud604\uc7ac \ud638\ucd9c\ud55c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc18c\uc640 \ub3d9\uc77c\ud55c\uc9c0\ub97c \uccb4\ud06c\ud568\uc73c\ub85c\uc368 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \uc801\uc808\ud55c \uc694\uccad\uc774 \ub9de\ub294\uc9c0\ub97c \ud655\uc778\ud558\ub294 \uac83\uc774\ub2e4."),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\uc55e\uc11c ERC1967\uc5d0\uc11c\ub294 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\uac00 \ub2f4\uae34 \uc0c1\ud0dc \ubcc0\uc218\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ud574\ub2f9 \ubcc0\uc218\ub97c \uc784\uc758\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \uc2ac\ub86f\ub118\ubc84\uc5d0 \ud560\ub2f9\ud558\ub294 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud588\ub2e4. \uadf8\ub807\ub2e4\uba74 \uc5c5\uadf8\ub808\uc774\ub4dc \ud568\uc218\uac00 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\uc744 \ub54c, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \ub418\ub294 \uc8fc\uc18c\ub97c \ud560\ub2f9\ud560 \uc2ac\ub86f\ub118\ubc84\ub97c \uc54c\uace0 \uc788\uc5b4\uc57c\ud560 \uac83\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="openzeppelin-contracts-upgradeable/contracts/proxy/ERC1967/ERC1967UpgradeUpgradeable.sol"',title:'"openzeppelin-contracts-upgradeable/contracts/proxy/ERC1967/ERC1967UpgradeUpgradeable.sol"'},'/**\n * @dev Perform implementation upgrade with security checks for UUPS proxies, and additional setup call.\n *\n * Emits an {Upgraded} event.\n */\nfunction _upgradeToAndCallUUPS(\n    address newImplementation,\n    bytes memory data,\n    bool forceCall\n) internal {\n    // Upgrades from old implementations will perform a rollback test. This test requires the new\n    // implementation to upgrade back to the old, non-ERC1822 compliant, implementation. Removing\n    // this special case will break upgrade paths from old UUPS implementation to new ones.\n    if (StorageSlotUpgradeable.getBooleanSlot(_ROLLBACK_SLOT).value) {\n        _setImplementation(newImplementation);\n    } else {\n        try\n            IERC1822ProxiableUpgradeable(newImplementation).proxiableUUID()\n        returns (bytes32 slot) {\n            require(\n                slot == _IMPLEMENTATION_SLOT,\n                "ERC1967Upgrade: unsupported proxiableUUID"\n            );\n        } catch {\n            revert("ERC1967Upgrade: new implementation is not UUPS");\n        }\n        _upgradeToAndCall(newImplementation, data, forceCall);\n    }\n}\n')),(0,r.kt)("p",null,"UUPSUpgradeable \ucee8\ud2b8\ub799\ud2b8\uac00 \uc0c1\uc18d \ubc1b\uace0 \uc788\ub294 ERC1967\uc758 ",(0,r.kt)("inlineCode",{parentName:"p"},"_upgradeToAndCallUUPS")," \ud568\uc218\ub97c \uc0b4\ud3b4\ubcf4\uba74, \ucee8\ud2b8\ub799\ud2b8\uac00 \uc5c5\uadf8\ub808\uc774\ub4dc \ub420 \ub54c \uc0c8\ub85c\uc6b4 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \uc8fc\uc18c\ub85c ",(0,r.kt)("inlineCode",{parentName:"p"},"proxibleUUID")," \ud568\uc218\ub97c call\ud558\uc5ec return\ub41c \uc2ac\ub86f \ub118\ubc84\uac12\uc774 \uae30\uc874 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub97c \ud560\ub2f9\ud574\ub450\uc5c8\ub358 \uc2ac\ub86f \ub118\ubc84\uc640 \uac19\uc740\uc9c0\ub97c \ud655\uc778\ud55c\ub2e4."),(0,r.kt)("p",null,"\ub9cc\uc57d \uc2ac\ub86f\uc774 \uac19\uc9c0 \uc54a\uac70\ub098, \uc0c8 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"p"},"proxibleUUID")," \ud568\uc218\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc73c\uba74 \uc5c5\uadf8\ub808\uc774\ub4dc\uac00 \ubd88\uac00\ub2a5\ud55c \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\uc5c5\uadf8\ub808\uc774\ub4dc\uc640 \uad00\ub828\ub41c \uad8c\ud55c \uc124\uc815\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},"_authorizeUpgrade")," \ud568\uc218\ub97c \ud1b5\ud574 \uc124\uc815\ud558\uba74 \ub41c\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"_authorizeUpgrade"),"\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \ub85c\uc9c1\uc774 \uc2e4\ud589\ub418\uae30 \uc804\uc5d0 \ud56d\uc0c1 \uba3c\uc800 \uc2e4\ud589\ub418\ub294 \ud568\uc218\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sol",metastring:'title="contracts/UUPS/v1.sol"',title:'"contracts/UUPS/v1.sol"'},'pragma solidity ^0.8.0;\n\nimport "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";\nimport "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";\n\ncontract UUPSImplementationV1 is UUPSUpgradeable, OwnableUpgradeable {\n    mapping(address => uint256) public counts;\n\n    function initialize(uint256 _count) public virtual initializer {\n        __Ownable_init();\n\n        counts[msg.sender] = _count;\n    }\n\n    function _authorizeUpgrade(address) internal override onlyOwner {}\n\n    function count() external virtual {\n        counts[msg.sender] += 1;\n    }\n}\n')),(0,r.kt)("p",null,"\uc704\uc640 \uac19\uc774 ",(0,r.kt)("inlineCode",{parentName:"p"},"_authorizeUpgrade")," \ud568\uc218\ub97c \uc624\ubc84\ub77c\uc774\ub529\ud558\uc5ec \uc5c5\uadf8\ub808\uc774\ub4dc\uc5d0 \ub300\ud55c \uad8c\ud55c \ubc0f \uc870\uac74\uc5d0 \ub300\ud55c \ub85c\uc9c1\uc744 \ucd94\uac00\ud574\uc8fc\uba74 \ub41c\ub2e4."),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\uc774\ucc98\ub7fc UUPS\ub294 \uae30\uc874 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub358 \uc5c5\uadf8\ub808\uc774\ub4dc \ud568\uc218\ub97c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub85c \ubaa8\ub450 \uc62e\uae40\uc73c\ub85c\uc368 \ubcf4\ub2e4 \uac00\uc2a4 \ud6a8\uc728\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c \ud568\uc218 \ucda9\ub3cc \ubb38\uc81c\ub97c \ud574\uacb0\ud588\ub2e4. \uc55e\uc11c \uc598\uae30\ud588\ub4ef\uc774 \ub3d9\uc77c \ucee8\ud2b8\ub799\ud2b8 \uc548\uc5d0\uc11c\ub294 \ub3d9\uc77c\ud55c \ud568\uc218 \uc2dd\ubcc4\uc790\ub97c \uac00\uc9c4 \ud568\uc218\uac00 \uc874\uc7ac\ud560 \uc218 \uc5c6\uae30 \ub54c\ubb38\uc5d0, \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub294 \ud568\uc218\ub4e4\ub07c\ub9ac\ub294 \ud568\uc218 \ucda9\ub3cc\uc774 \uc77c\uc5b4\ub098\uc9c0 \uc54a\ub294\ub2e4. \uc774\uc81c \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\ub294 \ud638\ucd9c\uc790\uac00 \ub204\uad6c\uc778\uc9c0\ub97c \ud655\uc778\ud560 \ud544\uc694\uc5c6\uc774 \ubb34\uc870\uac74 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub85c delegatecall \ud558\uae30\ub9cc \ud558\uba74 \ub41c\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://miro.medium.com/v2/resize:fit:720/format:webp/1*_mwOE2Ou0zf8x5kIiJAANg.png",alt:"UUPS"})),(0,r.kt)("p",null,"\ud22c\uba85\ud504\ub85d\uc2dc\uc640 UUPS\uc758 \uac00\uc2a4\ube44 \ucc28\uc774\ub97c \uc0b4\ud3b4\ubcf4\uba74, \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc758 \ubc30\ud3ec \ube44\uc6a9\uc774 \ub9e4\uc6b0 \uc800\ub834\ud574\uc9c4 \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4. \uae30\uc874 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uad6c\ud604\ub418\uc5b4\uc788\ub358 \ud568\uc218\ub4e4\uc774 \ubaa8\ub450 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub85c \uc62e\uaca8\uac14\uae30 \ub54c\ubb38\uc5d0 \ub2f9\uc5f0\ud55c \uacb0\uacfc\uc77c \uac83\uc774\ub2e4. \ub9cc\uc57d \ud22c\uba85 \ud504\ub85d\uc2dc\ub97c \uc0ac\uc6a9\ud558\uba74 \ud1b5\uc0c1\uc801\uc73c\ub85c \ud504\ub85d\uc2dc \uc5b4\ub4dc\ubbfc\uc73c\ub85c \uc124\uc815\ud560 \uc5b4\ub4dc\ubbfc \ucee8\ud2b8\ub799\ud2b8\ub3c4 \ud568\uaed8 \ubc30\ud3ec\ud558\uae30 \ub54c\ubb38\uc5d0, UUPS\ub97c \uc0ac\uc6a9\ud558\uba74 \uc774 \ube44\uc6a9\ub3c4 \uc808\uc57d\ud560 \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\ubb3c\ub860 \ubc18\ub300\ub85c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub97c \ubc30\ud3ec\ud560 \ub54c\ub294 \ube44\uc6a9\uc774 \uc99d\uac00\ud55c \uac83\uc744 \ubcfc \uc218 \uc788\ub2e4. \uc544\ubb34\ub798\ub3c4 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\ub294 \ucd5c\ucd08 \ud55c \ubc88 \ubc30\ud3ec\ub418\uace0, \uc774\ud6c4\uc5d0\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \ub420 \ub54c\ub9c8\ub2e4 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub9cc \ubc30\ud3ec\ub418\uae30 \ub54c\ubb38\uc5d0 \uc7a5\uae30\uc801\uc778 \ubc30\ud3ec \ube44\uc6a9\uc744 \uc0dd\uac01\ud558\uba74 UUPS\uac00 \ub354 \ube44\uc2f8\ub2e4\uace0 \ubcfc \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\ud558\uc9c0\ub9cc \uc911\uc694\ud55c \uac83\uc740 \ucee8\ud2b8\ub799\ud2b8 \ub7f0\ud0c0\uc784\uc2dc\uc5d0 \uc624\ubc84\ud5e4\ub4dc\uac00 \uc904\uc5b4\ub4e4\uc5c8\ub2e4\ub294 \uc810\uc774\ub2e4. UUPS\uc5d0\uc11c\ub294 \ud568\uc218\uac00 \ud638\ucd9c\ub420 \ub54c\ub9c8\ub2e4 \uc5b4\ub4dc\ubbfc \ubcc0\uc218 \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \uc811\uadfc\ud558\uc5ec \uac12\uc744 \ube44\uad50\ud558\ub294 \uc5f0\uc0b0\uc744 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\uae30 \ub54c\ubb38\uc774\ub2e4."),(0,r.kt)("hr",null),(0,r.kt)("p",null,"UUPS\ub97c \uc0ac\uc6a9\ud560 \ub54c \uc720\ub150\ud574\uc57c\ud560 \uc810\uc740 \uc5c5\uadf8\ub808\uc774\ub4dc \uae30\ub2a5\uc774 \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc874\uc7ac\ud558\uae30 \ub54c\ubb38\uc5d0, \ub9cc\uc57d \uc0c8\ub86d\uac8c \uc5c5\uadf8\ub808\uc774\ub4dc\ud55c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8 \ucabd\uc5d0 \uc5c5\uadf8\ub808\uc774\ub4dc\ub97c \uc218\ud589\ud558\ub294 \ud568\uc218\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294\ub2e4\uba74 \ub354 \uc774\uc0c1\uc758 \uc5c5\uadf8\ub808\uc774\ub4dc\uac00 \ubd88\uac00\ub2a5\ud574\uc9c4\ub2e4\ub294 \uc810\uc774\ub2e4."),(0,r.kt)("p",null,"\uc624\ud788\ub824 \uc774\ub7f0 \ud2b9\uc131\uc744 \uc774\uc6a9\ud558\uc5ec \ub354 \uc774\uc0c1\uc758 \uc5c5\uadf8\ub808\uc774\ub4dc\uac00 \ubd88\uac00\ub2a5\ud558\uac8c \ub9cc\ub4e4\uace0 \uc2f6\uc744 \ub54c \uace0\uc758\uc801\uc73c\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc \uae30\ub2a5\uc744 \ubc30\uc81c\ud55c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\ub85c \uc5c5\uadf8\ub808\uc774\ub4dc \ud558\ub294 \uc2dd\uc73c\ub85c UUPS\ub97c \uc6b4\uc601\ud560 \uc218\ub3c4 \uc788\ub2e4."),(0,r.kt)("p",null,"UUPS\uc758 \ub610 \ub2e4\ub978 \uc7a5\uc810 \uc911\uc5d0 \ud558\ub098\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \uae30\ub2a5\uc774 \ud504\ub85d\uc2dc \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ubd84\ub9ac\ub3fc\uc788\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0, \uc5c5\uadf8\ub808\uc774\ub4dc \uae30\ub2a5\uc744 \uc5b4\ub4dc\ubbfc \uae30\ub2a5\uc73c\ub85c\ub9cc \uc81c\ud55c\ud558\uc9c0 \uc54a\uace0 \uc11c\ube44\uc2a4\uc640 \uc5f0\uacc4\ud558\uc5ec \uc720\uc800\ub4e4\ub3c4 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uae30\ub2a5\uc73c\ub85c \uc720\uc5f0\ud558\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub2e4\ub294 \uc810\uc774\ub2e4."),(0,r.kt)("p",null,"\uc608\ub97c \ub4e4\uc5b4 \uc5c5\uadf8\ub808\uc774\ub4dc \ud568\uc218\uc758 \uad8c\ud55c\uc744 \ub2e8\uc21c\ud788 \ud2b9\uc815 \uc5b4\uce74\uc6b4\ud2b8\ub85c \uc124\uc815\ud574\ub193\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, \uc5b4\ub5a4 \uc870\uac74\uc744 \ub2ec\uc131\ud55c \uc5b4\uce74\uc6b4\ud2b8\uc778 \uacbd\uc6b0\uc5d0 \uc2e4\ud589\ud560 \uc218 \uc788\ub294 \uc2dd\uc73c\ub85c \uc124\uc815\ud574\ub193\ub294\ub2e4\uba74, \uae30\ub2a5 \ucd94\uac00\uc5d0 \ub300\ud55c \uac70\ubc84\ub10c\uc2a4 \ud22c\ud45c\ub97c \ud1b5\ud574 \uc120\uc815\ub41c \uae30\ub2a5\uc744 \uc81c\uc548\ud55c \uc720\uc800\uac00 \uc5c5\uadf8\ub808\uc774\ub4dc\ub97c \uc9c1\uc811 \uc218\ud589\ud558\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"(\ubb3c\ub860 \ud22c\uba85\ud504\ub85d\uc2dc\uc5d0\uc11c\ub3c4 \uc5b4\ub4dc\ubbfc \ucee8\ud2b8\ub799\ud2b8\ub97c \ud1b5\ud574 \uc774\ub7f0 \ub85c\uc9c1\uc744 \uc801\uc6a9\uc2dc\ud0a4\ub294 \uac83\uc774 \uac00\ub2a5\ud558\uc9c0\ub9cc, \uc720\uc800\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc \uae30\ub2a5\uacfc \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \uc788\ub294 \uae30\ub2a5\uc744 \ubcc4 \uac1c\uc758 \ucee8\ud2b8\ub799\ud2b8\ub85c \ub098\ub204\uc5b4 \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.)"),(0,r.kt)("h2",{id:"\ub9fa\uc74c\ub9d0"},"\ub9fa\uc74c\ub9d0"),(0,r.kt)("p",null,"ERC1967\ubd80\ud130 \ud22c\uba85\ud504\ub85d\uc2dc, UUPS\uae4c\uc9c0 \uc5c5\uadf8\ub808\uc774\ub4dc \uac00\ub2a5\ud55c \ucee8\ud2b8\ub799\ud2b8\ub97c \uad6c\ud604\ud558\uae30 \uc704\ud574 \uac00\uc7a5 \ubcf4\ud3b8\uc801\uc73c\ub85c \uc0ac\uc6a9\ub418\uace0\uc788\ub294 \uc5ec\ub7ec \ubc29\uc2dd\uc758 \ud504\ub85d\uc2dc \ud328\ud134\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uc558\ub2e4."),(0,r.kt)("p",null,"\ubb3c\ub860, \ub9c8\uc9c0\ub9c9\uc5d0 \uc0b4\ud3b4\ubcf8 UUPS \ubc29\uc2dd\ub3c4 \uc7a5\uc810\ub9cc \uc874\uc7ac\ud558\ub294 \uac83\uc740 \uc544\ub2d0 \uac83\uc774\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c \uad6c\ud604 \ucee8\ud2b8\ub799\ud2b8\uc5d0\uc11c \uc120\uc5b8\ub418\ub294 \ubcc0\uc218\ub4e4\uc758 \uc2a4\ud1a0\ub9ac\uc9c0 \ucda9\ub3cc\uc740 \ud504\ub85d\uc2dc \ud328\ud134\uc744 \uc0ac\uc6a9\ud560 \ub54c \uc5ec\uc804\ud788 \ud070 \ubb38\uc81c\ub97c \ubd88\ub7ec\uc77c\uc73c\ud0ac \uc218 \uc788\ub294 \ubd80\ubd84\uc774\uae30 \ub54c\ubb38\uc5d0 \ud56d\uc0c1 \uc720\ub150\ud558\uc5ec \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4."),(0,r.kt)("p",null,"\ub610\ud55c \ucee8\ud2b8\ub799\ud2b8\ub294 \ubc30\ud3ec\uc2dc\uc5d0 24KB\uc758 \ud06c\uae30 \uc81c\ud55c\uc774 \uc788\uae30 \ub54c\ubb38\uc5d0 \ucee8\ud2b8\ub799\ud2b8\ub97c \uacc4\uc18d \uc5c5\uadf8\ub808\uc774\ub4dc \ud558\uba74\uc11c \uae30\ub2a5 \ubc0f \uc2a4\ud1a0\ub9ac\uc9c0 \ubcc0\uc218\ub97c \ucd94\uac00\ud558\ub294 \ub370\uc5d0\ub3c4 \uadfc\ubcf8\uc801\uc778 \ud55c\uacc4\uac00 \uc788\ub2e4. \uc774\ub7f0 \ub2e8\uc810\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc81c\uc548\ub41c ",(0,r.kt)("a",{parentName:"p",href:"https://eip2535diamonds.substack.com/p/introduction-to-the-diamond-standard?s=r"},"\ub2e4\uc774\uc544\ubaac\ub4dc \ud328\ud134"),"\uc774\ub77c\ub294 \uac83\ub3c4 \uc874\uc7ac\ud55c\ub2e4. \ub2e4\uc774\uc544\ubaac\ub4dc \ud328\ud134\uc5d0 \ub300\ud574\uc11c\ub3c4 \ub2e4\uc74c\uc5d0 \uae30\ud68c\uac00 \ub41c\ub2e4\uba74 \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\ub3c4\ub85d \ud558\uaca0\ub2e4."),(0,r.kt)("p",null,"\uc774\ub807\uac8c \uc624\ud508\uc7ac\ud50c\ub9b0\uc744 \ud544\ub450\ub85c\ud55c \uc774\ub354\ub9ac\uc6c0 \uc0dd\ud0dc\uacc4\uc5d0\uc11c\ub294 \ub354 \ud6a8\uc728\uc801\uc774\uace0 \ub354 \uc548\uc815\uc801\uc778 \uc5c5\uadf8\ub808\uc774\ub4dc \uac00\ub2a5\ud55c \ucee8\ud2b8\ub799\ud2b8\ub97c \uad6c\ud604\ud558\uae30 \uc704\ud574 \uc0c8\ub85c\uc6b4 \uc544\uc774\ub514\uc5b4\uc640 \uae30\uc220\uc801 \uc811\uadfc\uc744 \ud1b5\ud55c \uc624\ud508\uc18c\uc2a4\ub4e4\uc774 \ub04a\uc784\uc5c6\uc774 \uc81c\uc548\ub418\uace0 \uc788\ub2e4."),(0,r.kt)("h3",{id:"\uc2a4\ub9c8\ud2b8-\ucee8\ud2b8\ub799\ud2b8\uc758-\ubd88\ubcc0\uc131"},"\uc2a4\ub9c8\ud2b8 \ucee8\ud2b8\ub799\ud2b8\uc758 \ubd88\ubcc0\uc131"),(0,r.kt)("p",null,"\uac1c\uc778\uc801\uc73c\ub85c \ub04a\uc784\uc5c6\uc774 \uac1c\uc120\ub418\uace0 \ubc1c\uc804\ud558\ub294 \ubc29\uc2dd\ub4e4\uc744 \uc774\ud574\ud558\uace0 \ud559\uc2b5\ud558\uba70 \uac1c\ubc1c \ud658\uacbd\uc5d0 \uc801\uc6a9\ud558\ub294 \uac83\ub3c4 \uc911\uc694\ud558\uc9c0\ub9cc, \uc5c5\uadf8\ub808\uc774\ub4dc \uac00\ub2a5\ud55c \ucee8\ud2b8\ub799\ud2b8\ub77c\ub294 \ud0a4\uc6cc\ub4dc\uc5d0 \uc811\uadfc\ud560 \ub54c\ub294 \uae30\uc220\uc801\uc778 \uace0\ubbfc\uacfc \ud568\uaed8 \ucee8\ud2b8\ub799\ud2b8\uc5d0 \ub300\ud55c \uc758\ubbf8\ub860\uc801\uc778 \uace0\ubbfc\ub3c4 \ubcd1\ud589\ub3fc\uc57c\ud55c\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4."),(0,r.kt)("p",null,"\uc774\uc804 \uae00\uc5d0\uc11c \ucee8\ud2b8\ub799\ud2b8\uc758 \ubd88\ubcc0\uc131\uc5d0 \ub300\ud574 \uc598\uae30\ud560 \ub54c \uc5b8\uae09\ud588\ub4ef\uc774, \uc2a4\ub9c8\ud2b8 \ucee8\ud2b8\ub799\ud2b8\ub780 \uadfc\ubcf8\uc801\uc73c\ub85c \ub514\uc9c0\ud138 \uacc4\uc57d\uc11c\ub85c\uc11c\uc758 \uc5ed\ud560\uc744 \ud558\uae30 \uc704\ud574 \ud0c4\uc0dd\ud55c \uae30\uc220\uc774\ub2e4. \uadf8\ub7f0 \uba74\uc5d0\uc11c \uacc4\uc57d\uc758 \ubd88\ubcc0\uc131\uc740 \ub2e8\uc21c\ud788 \ubd88\ud3b8\ud558\uace0 \uadf8\ub807\uae30 \ub54c\ubb38\uc5d0 \uadf9\ubcf5\ub3fc\uc57c\ud558\ub294 \uc81c\uc57d\uc0ac\ud56d\uc73c\ub85c\uc11c\ub9cc \uc874\uc7ac\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c web3 \uc0dd\ud0dc\uacc4\uc5d0\uc11c \ud0c8\uc911\uc559\ud654\ub41c \uc11c\ube44\uc2a4\ub97c \uc81c\uacf5\ud558\uae30 \uc704\ud55c \uc911\uc694\ud55c \uc815\uccb4\uc131 \uc911\uc5d0 \ud558\ub098\uc774\ub2e4."),(0,r.kt)("p",null,"\ub530\ub77c\uc11c \uc5b4\ub5a4 \ub514\uc571\uc5d0\uc11c \uc5c5\uadf8\ub808\uc774\ub4dc \uac00\ub2a5\ud55c \ucee8\ud2b8\ub799\ud2b8\ub97c \ub3c4\uc785\ud55c\ub2e4\uace0 \ud588\uc744 \ub54c\ub294 \ubb34\uc870\uac74\uc801\uc73c\ub85c \ud3b8\ub9ac\ud558\uace0 \ud6a8\uc728\uc801\uc778 \uc5c5\uadf8\ub808\uc774\ub4dc\ub9cc \ucd94\uad6c\ud558\uae30\ubcf4\ub2e4, \ud0c8\uc911\uc559\uc131\uacfc \uc11c\ube44\uc2a4 \uad00\ub9ac \uce21\uba74 \uc0ac\uc774\uc5d0\uc11c\uc758 \uc801\uc808\ud55c \uade0\ud615\uc774 \ud56d\uc0c1 \uace0\ub824\ub3fc\uc57c\ud55c\ub2e4."),(0,r.kt)("p",null,"\uc544\ubb34\ub9ac \uc11c\ube44\uc2a4 \uac1c\uc120\uacfc \ub354 \ub2e4\uc591\ud55c \uae30\ub2a5 \ucd94\uac00\ub97c \ubaa9\uc801\uc73c\ub85c \ud558\ub294 \uc5c5\uadf8\ub808\uc774\ub4dc\ub77c\uace0 \ud558\ub354\ub77c\ub3c4, \uc5b4\ub4dc\ubbfc \ucc28\uc6d0\uc5d0\uc11c \ub2e8 \ud55c\ubc88\uc758 \ud2b8\ub79c\uc7ad\uc158\uc73c\ub85c \ucee8\ud2b8\ub799\ud2b8\uc758 \uc8fc\uc694 \ub85c\uc9c1\uc774 \ubcc0\uacbd\ub420 \uc218 \uc788\ub2e4\uace0 \ud55c\ub2e4\uba74 \uc720\uc800\ub294 \uacfc\uc5f0 \uadf8 \ucee8\ud2b8\ub799\ud2b8\ub97c \uacc4\uc57d\uc11c\ub85c\uc11c \uc2e0\ub8b0\ud560 \uc218 \uc788\uc744\uae4c? \uadf8\ub9ac\uace0 \uadf8\ub7f0 \uacc4\uc57d\uc11c\ub4e4\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uacfc\uc5f0 \ub514\uc571\uc774\ub77c\uace0 \ubd80\ub97c \uc218 \uc788\uc744\uae4c?"),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\uae00\uc5d0\uc11c \uc5b8\uae09\ub41c \uc608\uc2dc\ucf54\ub4dc\ub294 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/chihunmanse/solidity-upgradeable"},"\ub9c1\ud06c"),"\ub85c \ub4e4\uc5b4\uac00\uba74 \ubcfc \uc218 \uc788\uace0, \uc9c1\uc811 \ud14c\uc2a4\ud2b8 \uacb0\uacfc\ub97c \ud655\uc778\ud574\ubcfc \uc218 \uc788\ub2e4."))}g.isMDXComponent=!0}}]);